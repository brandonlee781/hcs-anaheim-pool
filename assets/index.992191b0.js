var Dm=Object.defineProperty,Am=Object.defineProperties;var km=Object.getOwnPropertyDescriptors;var Nc=Object.getOwnPropertySymbols;var Nm=Object.prototype.hasOwnProperty,Mm=Object.prototype.propertyIsEnumerable;var Mc=(t,e,n)=>e in t?Dm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qo=(t,e)=>{for(var n in e||(e={}))Nm.call(e,n)&&Mc(t,n,e[n]);if(Nc)for(var n of Nc(e))Mm.call(e,n)&&Mc(t,n,e[n]);return t},jo=(t,e)=>Am(t,km(e));const Om=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};Om();function ru(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const Pm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rm=ru(Pm);function Bh(t){return!!t||t===""}function ls(t){if(K(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ne(r)?Bm(r):ls(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(Ne(t))return t;if(_e(t))return t}}const Lm=/;(?![^(]*\))/g,Fm=/:(.+)/;function Bm(t){const e={};return t.split(Lm).forEach(n=>{if(n){const r=n.split(Fm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function su(t){let e="";if(Ne(t))e=t;else if(K(t))for(let n=0;n<t.length;n++){const r=su(t[n]);r&&(e+=r+" ")}else if(_e(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Vm(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Xi(t[r],e[r]);return n}function Xi(t,e){if(t===e)return!0;let n=Oc(t),r=Oc(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=K(t),r=K(e),n||r)return n&&r?Vm(t,e):!1;if(n=_e(t),r=_e(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(a&&!u||!a&&u||!Xi(t[o],e[o]))return!1}}return String(t)===String(e)}function Vh(t,e){return t.findIndex(n=>Xi(n,e))}const ot=t=>Ne(t)?t:t==null?"":K(t)||_e(t)&&(t.toString===$h||!X(t.toString))?JSON.stringify(t,Uh,2):String(t),Uh=(t,e)=>e&&e.__v_isRef?Uh(t,e.value):hr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Zi(e)?{[`Set(${e.size})`]:[...e.values()]}:_e(e)&&!K(e)&&!qh(e)?String(e):e,le={},lr=[],It=()=>{},Um=()=>!1,$m=/^on[^a-z]/,Ji=t=>$m.test(t),iu=t=>t.startsWith("onUpdate:"),Ke=Object.assign,ou=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},qm=Object.prototype.hasOwnProperty,re=(t,e)=>qm.call(t,e),K=Array.isArray,hr=t=>eo(t)==="[object Map]",Zi=t=>eo(t)==="[object Set]",Oc=t=>t instanceof Date,X=t=>typeof t=="function",Ne=t=>typeof t=="string",au=t=>typeof t=="symbol",_e=t=>t!==null&&typeof t=="object",uu=t=>_e(t)&&X(t.then)&&X(t.catch),$h=Object.prototype.toString,eo=t=>$h.call(t),jm=t=>eo(t).slice(8,-1),qh=t=>eo(t)==="[object Object]",cu=t=>Ne(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,hi=ru(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),to=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Km=/-(\w)/g,vr=to(t=>t.replace(Km,(e,n)=>n?n.toUpperCase():"")),Wm=/\B([A-Z])/g,Cr=to(t=>t.replace(Wm,"-$1").toLowerCase()),jh=to(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ko=to(t=>t?`on${jh(t)}`:""),hs=(t,e)=>!Object.is(t,e),di=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ei=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Kh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Pc;const Hm=()=>Pc||(Pc=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let St;class Gm{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&St&&(this.parent=St,this.index=(St.scopes||(St.scopes=[])).push(this)-1)}run(e){if(this.active){const n=St;try{return St=this,e()}finally{St=n}}}on(){St=this}off(){St=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function zm(t,e=St){e&&e.active&&e.effects.push(t)}const lu=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Wh=t=>(t.w&on)>0,Hh=t=>(t.n&on)>0,Ym=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=on},Qm=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];Wh(s)&&!Hh(s)?s.delete(t):e[n++]=s,s.w&=~on,s.n&=~on}e.length=n}},da=new WeakMap;let Gr=0,on=1;const fa=30;let wt;const Nn=Symbol(""),ga=Symbol("");class hu{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,zm(this,r)}run(){if(!this.active)return this.fn();let e=wt,n=en;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=wt,wt=this,en=!0,on=1<<++Gr,Gr<=fa?Ym(this):Rc(this),this.fn()}finally{Gr<=fa&&Qm(this),on=1<<--Gr,wt=this.parent,en=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){wt===this?this.deferStop=!0:this.active&&(Rc(this),this.onStop&&this.onStop(),this.active=!1)}}function Rc(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let en=!0;const Gh=[];function _r(){Gh.push(en),en=!1}function Sr(){const t=Gh.pop();en=t===void 0?!0:t}function dt(t,e,n){if(en&&wt){let r=da.get(t);r||da.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=lu()),zh(s)}}function zh(t,e){let n=!1;Gr<=fa?Hh(t)||(t.n|=on,n=!Wh(t)):n=!t.has(wt),n&&(t.add(wt),wt.deps.push(t))}function Vt(t,e,n,r,s,i){const o=da.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&K(t))o.forEach((u,c)=>{(c==="length"||c>=r)&&a.push(u)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":K(t)?cu(n)&&a.push(o.get("length")):(a.push(o.get(Nn)),hr(t)&&a.push(o.get(ga)));break;case"delete":K(t)||(a.push(o.get(Nn)),hr(t)&&a.push(o.get(ga)));break;case"set":hr(t)&&a.push(o.get(Nn));break}if(a.length===1)a[0]&&ma(a[0]);else{const u=[];for(const c of a)c&&u.push(...c);ma(lu(u))}}function ma(t,e){for(const n of K(t)?t:[...t])(n!==wt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Xm=ru("__proto__,__v_isRef,__isVue"),Yh=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(au)),Jm=du(),Zm=du(!1,!0),ep=du(!0),Lc=tp();function tp(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=oe(this);for(let i=0,o=this.length;i<o;i++)dt(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(oe)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){_r();const r=oe(this)[e].apply(this,n);return Sr(),r}}),t}function du(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?yp:ed:e?Zh:Jh).get(r))return r;const o=K(r);if(!t&&o&&re(Lc,s))return Reflect.get(Lc,s,i);const a=Reflect.get(r,s,i);return(au(s)?Yh.has(s):Xm(s))||(t||dt(r,"get",s),e)?a:ke(a)?!o||!cu(s)?a.value:a:_e(a)?t?td(a):mu(a):a}}const np=Qh(),rp=Qh(!0);function Qh(t=!1){return function(n,r,s,i){let o=n[r];if(ds(o)&&ke(o)&&!ke(s))return!1;if(!t&&!ds(s)&&(nd(s)||(s=oe(s),o=oe(o)),!K(n)&&ke(o)&&!ke(s)))return o.value=s,!0;const a=K(n)&&cu(r)?Number(r)<n.length:re(n,r),u=Reflect.set(n,r,s,i);return n===oe(i)&&(a?hs(s,o)&&Vt(n,"set",r,s):Vt(n,"add",r,s)),u}}function sp(t,e){const n=re(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Vt(t,"delete",e,void 0),r}function ip(t,e){const n=Reflect.has(t,e);return(!au(e)||!Yh.has(e))&&dt(t,"has",e),n}function op(t){return dt(t,"iterate",K(t)?"length":Nn),Reflect.ownKeys(t)}const Xh={get:Jm,set:np,deleteProperty:sp,has:ip,ownKeys:op},ap={get:ep,set(t,e){return!0},deleteProperty(t,e){return!0}},up=Ke({},Xh,{get:Zm,set:rp}),fu=t=>t,no=t=>Reflect.getPrototypeOf(t);function Gs(t,e,n=!1,r=!1){t=t.__v_raw;const s=oe(t),i=oe(e);e!==i&&!n&&dt(s,"get",e),!n&&dt(s,"get",i);const{has:o}=no(s),a=r?fu:n?yu:fs;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function zs(t,e=!1){const n=this.__v_raw,r=oe(n),s=oe(t);return t!==s&&!e&&dt(r,"has",t),!e&&dt(r,"has",s),t===s?n.has(t):n.has(t)||n.has(s)}function Ys(t,e=!1){return t=t.__v_raw,!e&&dt(oe(t),"iterate",Nn),Reflect.get(t,"size",t)}function Fc(t){t=oe(t);const e=oe(this);return no(e).has.call(e,t)||(e.add(t),Vt(e,"add",t,t)),this}function Bc(t,e){e=oe(e);const n=oe(this),{has:r,get:s}=no(n);let i=r.call(n,t);i||(t=oe(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?hs(e,o)&&Vt(n,"set",t,e):Vt(n,"add",t,e),this}function Vc(t){const e=oe(this),{has:n,get:r}=no(e);let s=n.call(e,t);s||(t=oe(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Vt(e,"delete",t,void 0),i}function Uc(){const t=oe(this),e=t.size!==0,n=t.clear();return e&&Vt(t,"clear",void 0,void 0),n}function Qs(t,e){return function(r,s){const i=this,o=i.__v_raw,a=oe(o),u=e?fu:t?yu:fs;return!t&&dt(a,"iterate",Nn),o.forEach((c,l)=>r.call(s,u(c),u(l),i))}}function Xs(t,e,n){return function(...r){const s=this.__v_raw,i=oe(s),o=hr(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=s[t](...r),l=n?fu:e?yu:fs;return!e&&dt(i,"iterate",u?ga:Nn),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[l(h[0]),l(h[1])]:l(h),done:d}},[Symbol.iterator](){return this}}}}function Wt(t){return function(...e){return t==="delete"?!1:this}}function cp(){const t={get(i){return Gs(this,i)},get size(){return Ys(this)},has:zs,add:Fc,set:Bc,delete:Vc,clear:Uc,forEach:Qs(!1,!1)},e={get(i){return Gs(this,i,!1,!0)},get size(){return Ys(this)},has:zs,add:Fc,set:Bc,delete:Vc,clear:Uc,forEach:Qs(!1,!0)},n={get(i){return Gs(this,i,!0)},get size(){return Ys(this,!0)},has(i){return zs.call(this,i,!0)},add:Wt("add"),set:Wt("set"),delete:Wt("delete"),clear:Wt("clear"),forEach:Qs(!0,!1)},r={get(i){return Gs(this,i,!0,!0)},get size(){return Ys(this,!0)},has(i){return zs.call(this,i,!0)},add:Wt("add"),set:Wt("set"),delete:Wt("delete"),clear:Wt("clear"),forEach:Qs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Xs(i,!1,!1),n[i]=Xs(i,!0,!1),e[i]=Xs(i,!1,!0),r[i]=Xs(i,!0,!0)}),[t,n,e,r]}const[lp,hp,dp,fp]=cp();function gu(t,e){const n=e?t?fp:dp:t?hp:lp;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(re(n,s)&&s in r?n:r,s,i)}const gp={get:gu(!1,!1)},mp={get:gu(!1,!0)},pp={get:gu(!0,!1)},Jh=new WeakMap,Zh=new WeakMap,ed=new WeakMap,yp=new WeakMap;function vp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wp(t){return t.__v_skip||!Object.isExtensible(t)?0:vp(jm(t))}function mu(t){return ds(t)?t:pu(t,!1,Xh,gp,Jh)}function bp(t){return pu(t,!1,up,mp,Zh)}function td(t){return pu(t,!0,ap,pp,ed)}function pu(t,e,n,r,s){if(!_e(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=wp(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function dr(t){return ds(t)?dr(t.__v_raw):!!(t&&t.__v_isReactive)}function ds(t){return!!(t&&t.__v_isReadonly)}function nd(t){return!!(t&&t.__v_isShallow)}function rd(t){return dr(t)||ds(t)}function oe(t){const e=t&&t.__v_raw;return e?oe(e):t}function sd(t){return Ei(t,"__v_skip",!0),t}const fs=t=>_e(t)?mu(t):t,yu=t=>_e(t)?td(t):t;function id(t){en&&wt&&(t=oe(t),zh(t.dep||(t.dep=lu())))}function od(t,e){t=oe(t),t.dep&&ma(t.dep)}function ke(t){return!!(t&&t.__v_isRef===!0)}function an(t){return Ep(t,!1)}function Ep(t,e){return ke(t)?t:new Tp(t,e)}class Tp{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:oe(e),this._value=n?e:fs(e)}get value(){return id(this),this._value}set value(e){e=this.__v_isShallow?e:oe(e),hs(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:fs(e),od(this))}}function ee(t){return ke(t)?t.value:t}const Ip={get:(t,e,n)=>ee(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ke(s)&&!ke(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ad(t){return dr(t)?t:new Proxy(t,Ip)}class xp{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new hu(e,()=>{this._dirty||(this._dirty=!0,od(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=oe(this);return id(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function zr(t,e,n=!1){let r,s;const i=X(t);return i?(r=t,s=It):(r=t.get,s=t.set),new xp(r,s,i||!s,n)}function tn(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){Os(i,e,n)}return s}function pt(t,e,n,r){if(X(t)){const i=tn(t,e,n,r);return i&&uu(i)&&i.catch(o=>{Os(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(pt(t[i],e,n,r));return s}function Os(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const c=i.ec;if(c){for(let l=0;l<c.length;l++)if(c[l](t,o,a)===!1)return}i=i.parent}const u=e.appContext.config.errorHandler;if(u){tn(u,null,10,[t,o,a]);return}}Cp(t,n,s,r)}function Cp(t,e,n,r=!0){console.error(t)}let Ti=!1,pa=!1;const lt=[];let Rt=0;const ts=[];let Yr=null,sr=0;const ns=[];let zt=null,ir=0;const ud=Promise.resolve();let vu=null,ya=null;function _p(t){const e=vu||ud;return t?e.then(this?t.bind(this):t):e}function Sp(t){let e=Rt+1,n=lt.length;for(;e<n;){const r=e+n>>>1;gs(lt[r])<t?e=r+1:n=r}return e}function cd(t){(!lt.length||!lt.includes(t,Ti&&t.allowRecurse?Rt+1:Rt))&&t!==ya&&(t.id==null?lt.push(t):lt.splice(Sp(t.id),0,t),ld())}function ld(){!Ti&&!pa&&(pa=!0,vu=ud.then(gd))}function Dp(t){const e=lt.indexOf(t);e>Rt&&lt.splice(e,1)}function hd(t,e,n,r){K(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&n.push(t),ld()}function Ap(t){hd(t,Yr,ts,sr)}function dd(t){hd(t,zt,ns,ir)}function wu(t,e=null){if(ts.length){for(ya=e,Yr=[...new Set(ts)],ts.length=0,sr=0;sr<Yr.length;sr++)Yr[sr]();Yr=null,sr=0,ya=null,wu(t,e)}}function fd(t){if(ns.length){const e=[...new Set(ns)];if(ns.length=0,zt){zt.push(...e);return}for(zt=e,zt.sort((n,r)=>gs(n)-gs(r)),ir=0;ir<zt.length;ir++)zt[ir]();zt=null,ir=0}}const gs=t=>t.id==null?1/0:t.id;function gd(t){pa=!1,Ti=!0,wu(t),lt.sort((n,r)=>gs(n)-gs(r));const e=It;try{for(Rt=0;Rt<lt.length;Rt++){const n=lt[Rt];n&&n.active!==!1&&tn(n,null,14)}}finally{Rt=0,lt.length=0,fd(),Ti=!1,vu=null,(lt.length||ts.length||ns.length)&&gd(t)}}function kp(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||le;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[l]||le;d?s=n.map(m=>m.trim()):h&&(s=n.map(Kh))}let a,u=r[a=Ko(e)]||r[a=Ko(vr(e))];!u&&i&&(u=r[a=Ko(Cr(e))]),u&&pt(u,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,pt(c,t,6,s)}}function md(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!X(t)){const u=c=>{const l=md(c,e,!0);l&&(a=!0,Ke(o,l))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(r.set(t,null),null):(K(i)?i.forEach(u=>o[u]=null):Ke(o,i),r.set(t,o),o)}function ro(t,e){return!t||!Ji(e)?!1:(e=e.slice(2).replace(/Once$/,""),re(t,e[0].toLowerCase()+e.slice(1))||re(t,Cr(e))||re(t,e))}let Qe=null,so=null;function Ii(t){const e=Qe;return Qe=t,so=t&&t.type.__scopeId||null,e}function Np(t){so=t}function Mp(){so=null}function He(t,e=Qe,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Xc(-1);const i=Ii(e),o=t(...s);return Ii(i),r._d&&Xc(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Wo(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:d,setupState:m,ctx:y,inheritAttrs:I}=t;let N,P;const k=Ii(t);try{if(n.shapeFlag&4){const q=s||r;N=vt(l.call(q,q,h,i,m,d,y)),P=u}else{const q=e;N=vt(q.length>1?q(i,{attrs:u,slots:a,emit:c}):q(i,null)),P=e.props?u:Pp(u)}}catch(q){rs.length=0,Os(q,t,1),N=he(ut)}let A=N;if(P&&I!==!1){const q=Object.keys(P),{shapeFlag:W}=A;q.length&&W&7&&(o&&q.some(iu)&&(P=Rp(P,o)),A=On(A,P))}return n.dirs&&(A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&(A.transition=n.transition),N=A,Ii(k),N}function Op(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(_u(r)){if(r.type!==ut||r.children==="v-if"){if(e)return;e=r}}else return}return e}const Pp=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ji(n))&&((e||(e={}))[n]=t[n]);return e},Rp=(t,e)=>{const n={};for(const r in t)(!iu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Lp(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?$c(r,o,c):!!o;if(u&8){const l=e.dynamicProps;for(let h=0;h<l.length;h++){const d=l[h];if(o[d]!==r[d]&&!ro(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$c(r,o,c):!0:!!o;return!1}function $c(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ro(n,i))return!0}return!1}function bu({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Fp=t=>t.__isSuspense,Bp={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,u,c){t==null?Up(e,n,r,s,i,o,a,u,c):$p(t,e,n,r,s,o,a,u,c)},hydrate:qp,create:Eu,normalize:jp},Vp=Bp;function ms(t,e){const n=t.props&&t.props[e];X(n)&&n()}function Up(t,e,n,r,s,i,o,a,u){const{p:c,o:{createElement:l}}=u,h=l("div"),d=t.suspense=Eu(t,s,r,e,h,n,i,o,a,u);c(null,d.pendingBranch=t.ssContent,h,null,r,d,i,o),d.deps>0?(ms(t,"onPending"),ms(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,i,o),fr(d,t.ssFallback)):d.resolve()}function $p(t,e,n,r,s,i,o,a,{p:u,um:c,o:{createElement:l}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,m=e.ssFallback,{activeBranch:y,pendingBranch:I,isInFallback:N,isHydrating:P}=h;if(I)h.pendingBranch=d,Dt(d,I)?(u(I,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0?h.resolve():N&&(u(y,m,n,r,s,null,i,o,a),fr(h,m))):(h.pendingId++,P?(h.isHydrating=!1,h.activeBranch=I):c(I,s,h),h.deps=0,h.effects.length=0,h.hiddenContainer=l("div"),N?(u(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0?h.resolve():(u(y,m,n,r,s,null,i,o,a),fr(h,m))):y&&Dt(d,y)?(u(y,d,n,r,s,h,i,o,a),h.resolve(!0)):(u(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0&&h.resolve()));else if(y&&Dt(d,y))u(y,d,n,r,s,h,i,o,a),fr(h,d);else if(ms(e,"onPending"),h.pendingBranch=d,h.pendingId++,u(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0)h.resolve();else{const{timeout:k,pendingId:A}=h;k>0?setTimeout(()=>{h.pendingId===A&&h.fallback(m)},k):k===0&&h.fallback(m)}}function Eu(t,e,n,r,s,i,o,a,u,c,l=!1){const{p:h,m:d,um:m,n:y,o:{parentNode:I,remove:N}}=c,P=Kh(t.props&&t.props.timeout),k={vnode:t,parent:e,parentComponent:n,isSVG:o,container:r,hiddenContainer:s,anchor:i,deps:0,pendingId:0,timeout:typeof P=="number"?P:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:l,isUnmounted:!1,effects:[],resolve(A=!1){const{vnode:q,activeBranch:W,pendingBranch:G,pendingId:$,effects:te,parentComponent:fe,container:Le}=k;if(k.isHydrating)k.isHydrating=!1;else if(!A){const Mt=W&&G.transition&&G.transition.mode==="out-in";Mt&&(W.transition.afterLeave=()=>{$===k.pendingId&&d(G,Le,Yn,0)});let{anchor:Yn}=k;W&&(Yn=y(W),m(W,fe,k,!0)),Mt||d(G,Le,Yn,0)}fr(k,G),k.pendingBranch=null,k.isInFallback=!1;let be=k.parent,tt=!1;for(;be;){if(be.pendingBranch){be.effects.push(...te),tt=!0;break}be=be.parent}tt||dd(te),k.effects=[],ms(q,"onResolve")},fallback(A){if(!k.pendingBranch)return;const{vnode:q,activeBranch:W,parentComponent:G,container:$,isSVG:te}=k;ms(q,"onFallback");const fe=y(W),Le=()=>{!k.isInFallback||(h(null,A,$,fe,G,null,te,a,u),fr(k,A))},be=A.transition&&A.transition.mode==="out-in";be&&(W.transition.afterLeave=Le),k.isInFallback=!0,m(W,G,null,!0),be||Le()},move(A,q,W){k.activeBranch&&d(k.activeBranch,A,q,W),k.container=A},next(){return k.activeBranch&&y(k.activeBranch)},registerDep(A,q){const W=!!k.pendingBranch;W&&k.deps++;const G=A.vnode.el;A.asyncDep.catch($=>{Os($,A,0)}).then($=>{if(A.isUnmounted||k.isUnmounted||k.pendingId!==A.suspenseId)return;A.asyncResolved=!0;const{vnode:te}=A;Ca(A,$,!1),G&&(te.el=G);const fe=!G&&A.subTree.el;q(A,te,I(G||A.subTree.el),G?null:y(A.subTree),k,o,u),fe&&N(fe),bu(A,te.el),W&&--k.deps===0&&k.resolve()})},unmount(A,q){k.isUnmounted=!0,k.activeBranch&&m(k.activeBranch,n,A,q),k.pendingBranch&&m(k.pendingBranch,n,A,q)}};return k}function qp(t,e,n,r,s,i,o,a,u){const c=e.suspense=Eu(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),l=u(t,c.pendingBranch=e.ssContent,n,c,i,o);return c.deps===0&&c.resolve(),l}function jp(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=qc(r?n.default:n),t.ssFallback=r?qc(n.fallback):he(ut)}function qc(t){let e;if(X(t)){const n=ps&&t._c;n&&(t._d=!1,ue()),t=t(),n&&(t._d=!0,e=nn,Nd())}return K(t)&&(t=Op(t)),t=vt(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Kp(t,e){e&&e.pendingBranch?K(t)?e.effects.push(...t):e.effects.push(t):dd(t)}function fr(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,s=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=s,bu(r,s))}function Wp(t,e){if(Be){let n=Be.provides;const r=Be.parent&&Be.parent.provides;r===n&&(n=Be.provides=Object.create(r)),n[t]=e}}function Ho(t,e,n=!1){const r=Be||Qe;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&X(e)?e.call(r.proxy):e}}const jc={};function fi(t,e,n){return pd(t,e,n)}function pd(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=le){const a=Be;let u,c=!1,l=!1;if(ke(t)?(u=()=>t.value,c=nd(t)):dr(t)?(u=()=>t,r=!0):K(t)?(l=!0,c=t.some(dr),u=()=>t.map(P=>{if(ke(P))return P.value;if(dr(P))return Dn(P);if(X(P))return tn(P,a,2)})):X(t)?e?u=()=>tn(t,a,2):u=()=>{if(!(a&&a.isUnmounted))return h&&h(),pt(t,a,3,[d])}:u=It,e&&r){const P=u;u=()=>Dn(P())}let h,d=P=>{h=N.onStop=()=>{tn(P,a,4)}};if(vs)return d=It,e?n&&pt(e,a,3,[u(),l?[]:void 0,d]):u(),It;let m=l?[]:jc;const y=()=>{if(!!N.active)if(e){const P=N.run();(r||c||(l?P.some((k,A)=>hs(k,m[A])):hs(P,m)))&&(h&&h(),pt(e,a,3,[P,m===jc?void 0:m,d]),m=P)}else N.run()};y.allowRecurse=!!e;let I;s==="sync"?I=y:s==="post"?I=()=>rt(y,a&&a.suspense):I=()=>{!a||a.isMounted?Ap(y):y()};const N=new hu(u,I);return e?n?y():m=N.run():s==="post"?rt(N.run.bind(N),a&&a.suspense):N.run(),()=>{N.stop(),a&&a.scope&&ou(a.scope.effects,N)}}function Hp(t,e,n){const r=this.proxy,s=Ne(t)?t.includes(".")?yd(r,t):()=>r[t]:t.bind(r,r);let i;X(e)?i=e:(i=e.handler,n=e);const o=Be;cn(this);const a=pd(s,i.bind(r),n);return o?cn(o):rn(),a}function yd(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Dn(t,e){if(!_e(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ke(t))Dn(t.value,e);else if(K(t))for(let n=0;n<t.length;n++)Dn(t[n],e);else if(Zi(t)||hr(t))t.forEach(n=>{Dn(n,e)});else if(qh(t))for(const n in t)Dn(t[n],e);return t}function Gp(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tu(()=>{t.isMounted=!0}),Ed(()=>{t.isUnmounting=!0}),t}const gt=[Function,Array],zp={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gt,onEnter:gt,onAfterEnter:gt,onEnterCancelled:gt,onBeforeLeave:gt,onLeave:gt,onAfterLeave:gt,onLeaveCancelled:gt,onBeforeAppear:gt,onAppear:gt,onAfterAppear:gt,onAppearCancelled:gt},setup(t,{slots:e}){const n=Ld(),r=Gp();let s;return()=>{const i=e.default&&wd(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const I of i)if(I.type!==ut){o=I;break}}const a=oe(t),{mode:u}=a;if(r.isLeaving)return Go(o);const c=Kc(o);if(!c)return Go(o);const l=va(c,a,r,n);wa(c,l);const h=n.subTree,d=h&&Kc(h);let m=!1;const{getTransitionKey:y}=c.type;if(y){const I=y();s===void 0?s=I:I!==s&&(s=I,m=!0)}if(d&&d.type!==ut&&(!Dt(c,d)||m)){const I=va(d,a,r,n);if(wa(d,I),u==="out-in")return r.isLeaving=!0,I.afterLeave=()=>{r.isLeaving=!1,n.update()},Go(o);u==="in-out"&&c.type!==ut&&(I.delayLeave=(N,P,k)=>{const A=vd(r,d);A[String(d.key)]=d,N._leaveCb=()=>{P(),N._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=k})}return o}}},Yp=zp;function vd(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function va(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:d,onAfterLeave:m,onLeaveCancelled:y,onBeforeAppear:I,onAppear:N,onAfterAppear:P,onAppearCancelled:k}=e,A=String(t.key),q=vd(n,t),W=($,te)=>{$&&pt($,r,9,te)},G={mode:i,persisted:o,beforeEnter($){let te=a;if(!n.isMounted)if(s)te=I||a;else return;$._leaveCb&&$._leaveCb(!0);const fe=q[A];fe&&Dt(t,fe)&&fe.el._leaveCb&&fe.el._leaveCb(),W(te,[$])},enter($){let te=u,fe=c,Le=l;if(!n.isMounted)if(s)te=N||u,fe=P||c,Le=k||l;else return;let be=!1;const tt=$._enterCb=Mt=>{be||(be=!0,Mt?W(Le,[$]):W(fe,[$]),G.delayedLeave&&G.delayedLeave(),$._enterCb=void 0)};te?(te($,tt),te.length<=1&&tt()):tt()},leave($,te){const fe=String(t.key);if($._enterCb&&$._enterCb(!0),n.isUnmounting)return te();W(h,[$]);let Le=!1;const be=$._leaveCb=tt=>{Le||(Le=!0,te(),tt?W(y,[$]):W(m,[$]),$._leaveCb=void 0,q[fe]===t&&delete q[fe])};q[fe]=t,d?(d($,be),d.length<=1&&be()):be()},clone($){return va($,e,n,r)}};return G}function Go(t){if(io(t))return t=On(t),t.children=null,t}function Kc(t){return io(t)?t.children?t.children[0]:void 0:t}function wa(t,e){t.shapeFlag&6&&t.component?wa(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function wd(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ce?(o.patchFlag&128&&s++,r=r.concat(wd(o.children,e,a))):(e||o.type!==ut)&&r.push(a!=null?On(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Wn(t){return X(t)?{setup:t,name:t.name}:t}const xi=t=>!!t.type.__asyncLoader,io=t=>t.type.__isKeepAlive;function Qp(t,e){bd(t,"a",e)}function Xp(t,e){bd(t,"da",e)}function bd(t,e,n=Be){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(oo(e,r,n),n){let s=n.parent;for(;s&&s.parent;)io(s.parent.vnode)&&Jp(r,e,n,s),s=s.parent}}function Jp(t,e,n,r){const s=oo(e,t,r,!0);Iu(()=>{ou(r[e],s)},n)}function oo(t,e,n=Be,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;_r(),cn(n);const a=pt(e,n,t,o);return rn(),Sr(),a});return r?s.unshift(i):s.push(i),i}}const jt=t=>(e,n=Be)=>(!vs||t==="sp")&&oo(t,e,n),Zp=jt("bm"),Tu=jt("m"),ey=jt("bu"),ty=jt("u"),Ed=jt("bum"),Iu=jt("um"),ny=jt("sp"),ry=jt("rtg"),sy=jt("rtc");function iy(t,e=Be){oo("ec",t,e)}let ba=!0;function oy(t){const e=Id(t),n=t.proxy,r=t.ctx;ba=!1,e.beforeCreate&&Wc(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:d,beforeUpdate:m,updated:y,activated:I,deactivated:N,beforeDestroy:P,beforeUnmount:k,destroyed:A,unmounted:q,render:W,renderTracked:G,renderTriggered:$,errorCaptured:te,serverPrefetch:fe,expose:Le,inheritAttrs:be,components:tt,directives:Mt,filters:Yn}=e;if(c&&ay(c,r,null,t.appContext.config.unwrapInjectedRef),o)for(const Ee in o){const me=o[Ee];X(me)&&(r[Ee]=me.bind(n))}if(s){const Ee=s.call(n,n);_e(Ee)&&(t.data=mu(Ee))}if(ba=!0,i)for(const Ee in i){const me=i[Ee],Ot=X(me)?me.bind(n,n):X(me.get)?me.get.bind(n,n):It,Vo=!X(me)&&X(me.set)?me.set.bind(n):It,Lr=Jt({get:Ot,set:Vo});Object.defineProperty(r,Ee,{enumerable:!0,configurable:!0,get:()=>Lr.value,set:Qn=>Lr.value=Qn})}if(a)for(const Ee in a)Td(a[Ee],r,n,Ee);if(u){const Ee=X(u)?u.call(n):u;Reflect.ownKeys(Ee).forEach(me=>{Wp(me,Ee[me])})}l&&Wc(l,t,"c");function nt(Ee,me){K(me)?me.forEach(Ot=>Ee(Ot.bind(n))):me&&Ee(me.bind(n))}if(nt(Zp,h),nt(Tu,d),nt(ey,m),nt(ty,y),nt(Qp,I),nt(Xp,N),nt(iy,te),nt(sy,G),nt(ry,$),nt(Ed,k),nt(Iu,q),nt(ny,fe),K(Le))if(Le.length){const Ee=t.exposed||(t.exposed={});Le.forEach(me=>{Object.defineProperty(Ee,me,{get:()=>n[me],set:Ot=>n[me]=Ot})})}else t.exposed||(t.exposed={});W&&t.render===It&&(t.render=W),be!=null&&(t.inheritAttrs=be),tt&&(t.components=tt),Mt&&(t.directives=Mt)}function ay(t,e,n=It,r=!1){K(t)&&(t=Ea(t));for(const s in t){const i=t[s];let o;_e(i)?"default"in i?o=Ho(i.from||s,i.default,!0):o=Ho(i.from||s):o=Ho(i),ke(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function Wc(t,e,n){pt(K(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Td(t,e,n,r){const s=r.includes(".")?yd(n,r):()=>n[r];if(Ne(t)){const i=e[t];X(i)&&fi(s,i)}else if(X(t))fi(s,t.bind(n));else if(_e(t))if(K(t))t.forEach(i=>Td(i,e,n,r));else{const i=X(t.handler)?t.handler.bind(n):e[t.handler];X(i)&&fi(s,i,t)}}function Id(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(c=>Ci(u,c,o,!0)),Ci(u,e,o)),i.set(e,u),u}function Ci(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Ci(t,i,n,!0),s&&s.forEach(o=>Ci(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=uy[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const uy={data:Hc,props:En,emits:En,methods:En,computed:En,beforeCreate:We,created:We,beforeMount:We,mounted:We,beforeUpdate:We,updated:We,beforeDestroy:We,beforeUnmount:We,destroyed:We,unmounted:We,activated:We,deactivated:We,errorCaptured:We,serverPrefetch:We,components:En,directives:En,watch:ly,provide:Hc,inject:cy};function Hc(t,e){return e?t?function(){return Ke(X(t)?t.call(this,this):t,X(e)?e.call(this,this):e)}:e:t}function cy(t,e){return En(Ea(t),Ea(e))}function Ea(t){if(K(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function We(t,e){return t?[...new Set([].concat(t,e))]:e}function En(t,e){return t?Ke(Ke(Object.create(null),t),e):e}function ly(t,e){if(!t)return e;if(!e)return t;const n=Ke(Object.create(null),t);for(const r in e)n[r]=We(t[r],e[r]);return n}function hy(t,e,n,r=!1){const s={},i={};Ei(i,ao,1),t.propsDefaults=Object.create(null),xd(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:bp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function dy(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=oe(s),[u]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let h=0;h<l.length;h++){let d=l[h];if(ro(t.emitsOptions,d))continue;const m=e[d];if(u)if(re(i,d))m!==i[d]&&(i[d]=m,c=!0);else{const y=vr(d);s[y]=Ta(u,a,y,m,t,!1)}else m!==i[d]&&(i[d]=m,c=!0)}}}else{xd(t,e,s,i)&&(c=!0);let l;for(const h in a)(!e||!re(e,h)&&((l=Cr(h))===h||!re(e,l)))&&(u?n&&(n[h]!==void 0||n[l]!==void 0)&&(s[h]=Ta(u,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!re(e,h)&&!0)&&(delete i[h],c=!0)}c&&Vt(t,"set","$attrs")}function xd(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(hi(u))continue;const c=e[u];let l;s&&re(s,l=vr(u))?!i||!i.includes(l)?n[l]=c:(a||(a={}))[l]=c:ro(t.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(i){const u=oe(n),c=a||le;for(let l=0;l<i.length;l++){const h=i[l];n[h]=Ta(s,u,h,c[h],t,!re(c,h))}}return o}function Ta(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=re(o,"default");if(a&&r===void 0){const u=o.default;if(o.type!==Function&&X(u)){const{propsDefaults:c}=s;n in c?r=c[n]:(cn(s),r=c[n]=u.call(null,e),rn())}else r=u}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Cr(n))&&(r=!0))}return r}function Cd(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let u=!1;if(!X(t)){const l=h=>{u=!0;const[d,m]=Cd(h,e,!0);Ke(o,d),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!i&&!u)return r.set(t,lr),lr;if(K(i))for(let l=0;l<i.length;l++){const h=vr(i[l]);Gc(h)&&(o[h]=le)}else if(i)for(const l in i){const h=vr(l);if(Gc(h)){const d=i[l],m=o[h]=K(d)||X(d)?{type:d}:d;if(m){const y=Qc(Boolean,m.type),I=Qc(String,m.type);m[0]=y>-1,m[1]=I<0||y<I,(y>-1||re(m,"default"))&&a.push(h)}}}const c=[o,a];return r.set(t,c),c}function Gc(t){return t[0]!=="$"}function zc(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Yc(t,e){return zc(t)===zc(e)}function Qc(t,e){return K(e)?e.findIndex(n=>Yc(n,t)):X(e)&&Yc(e,t)?0:-1}const _d=t=>t[0]==="_"||t==="$stable",xu=t=>K(t)?t.map(vt):[vt(t)],fy=(t,e,n)=>{const r=He((...s)=>xu(e(...s)),n);return r._c=!1,r},Sd=(t,e,n)=>{const r=t._ctx;for(const s in t){if(_d(s))continue;const i=t[s];if(X(i))e[s]=fy(s,i,r);else if(i!=null){const o=xu(i);e[s]=()=>o}}},Dd=(t,e)=>{const n=xu(e);t.slots.default=()=>n},gy=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=oe(e),Ei(e,"_",n)):Sd(e,t.slots={})}else t.slots={},e&&Dd(t,e);Ei(t.slots,ao,1)},my=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=le;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(Ke(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Sd(e,s)),o=e}else e&&(Dd(t,e),o={default:1});if(i)for(const a in s)!_d(a)&&!(a in o)&&delete s[a]};function py(t,e){const n=Qe;if(n===null)return t;const r=uo(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,u,c=le]=e[i];X(o)&&(o={mounted:o,updated:o}),o.deep&&Dn(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:u,modifiers:c})}return t}function yn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let u=a.dir[r];u&&(_r(),pt(u,n,8,[t.el,a,t,e]),Sr())}}function Ad(){return{app:null,config:{isNativeTag:Um,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yy=0;function vy(t,e){return function(r,s=null){X(r)||(r=Object.assign({},r)),s!=null&&!_e(s)&&(s=null);const i=Ad(),o=new Set;let a=!1;const u=i.app={_uid:yy++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Fy,get config(){return i.config},set config(c){},use(c,...l){return o.has(c)||(c&&X(c.install)?(o.add(c),c.install(u,...l)):X(c)&&(o.add(c),c(u,...l))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,l){return l?(i.components[c]=l,u):i.components[c]},directive(c,l){return l?(i.directives[c]=l,u):i.directives[c]},mount(c,l,h){if(!a){const d=he(r,s);return d.appContext=i,l&&e?e(d,c):t(d,c,h),a=!0,u._container=c,c.__vue_app__=u,uo(d.component)||d.component.proxy}},unmount(){a&&(t(null,u._container),delete u._container.__vue_app__)},provide(c,l){return i.provides[c]=l,u}};return u}}function Ia(t,e,n,r,s=!1){if(K(t)){t.forEach((d,m)=>Ia(d,e&&(K(e)?e[m]:e),n,r,s));return}if(xi(r)&&!s)return;const i=r.shapeFlag&4?uo(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:u}=t,c=e&&e.r,l=a.refs===le?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==u&&(Ne(c)?(l[c]=null,re(h,c)&&(h[c]=null)):ke(c)&&(c.value=null)),X(u))tn(u,a,12,[o,l]);else{const d=Ne(u),m=ke(u);if(d||m){const y=()=>{if(t.f){const I=d?l[u]:u.value;s?K(I)&&ou(I,i):K(I)?I.includes(i)||I.push(i):d?(l[u]=[i],re(h,u)&&(h[u]=l[u])):(u.value=[i],t.k&&(l[t.k]=u.value))}else d?(l[u]=o,re(h,u)&&(h[u]=o)):ke(u)&&(u.value=o,t.k&&(l[t.k]=o))};o?(y.id=-1,rt(y,n)):y()}}}const rt=Kp;function wy(t){return by(t)}function by(t,e){const n=Hm();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:l,parentNode:h,nextSibling:d,setScopeId:m=It,cloneNode:y,insertStaticContent:I}=t,N=(f,g,v,b=null,w=null,S=null,M=!1,x=null,D=!!g.dynamicChildren)=>{if(f===g)return;f&&!Dt(f,g)&&(b=Hs(f),Kt(f,w,S,!0),f=null),g.patchFlag===-2&&(D=!1,g.dynamicChildren=null);const{type:T,ref:V,shapeFlag:L}=g;switch(T){case Cu:P(f,g,v,b);break;case ut:k(f,g,v,b);break;case zo:f==null&&A(g,v,b,M);break;case Ce:Mt(f,g,v,b,w,S,M,x,D);break;default:L&1?G(f,g,v,b,w,S,M,x,D):L&6?Yn(f,g,v,b,w,S,M,x,D):(L&64||L&128)&&T.process(f,g,v,b,w,S,M,x,D,Xn)}V!=null&&w&&Ia(V,f&&f.ref,S,g||f,!g)},P=(f,g,v,b)=>{if(f==null)r(g.el=a(g.children),v,b);else{const w=g.el=f.el;g.children!==f.children&&c(w,g.children)}},k=(f,g,v,b)=>{f==null?r(g.el=u(g.children||""),v,b):g.el=f.el},A=(f,g,v,b)=>{[f.el,f.anchor]=I(f.children,g,v,b,f.el,f.anchor)},q=({el:f,anchor:g},v,b)=>{let w;for(;f&&f!==g;)w=d(f),r(f,v,b),f=w;r(g,v,b)},W=({el:f,anchor:g})=>{let v;for(;f&&f!==g;)v=d(f),s(f),f=v;s(g)},G=(f,g,v,b,w,S,M,x,D)=>{M=M||g.type==="svg",f==null?$(g,v,b,w,S,M,x,D):Le(f,g,w,S,M,x,D)},$=(f,g,v,b,w,S,M,x)=>{let D,T;const{type:V,props:L,shapeFlag:U,transition:z,patchFlag:se,dirs:ve}=f;if(f.el&&y!==void 0&&se===-1)D=f.el=y(f.el);else{if(D=f.el=o(f.type,S,L&&L.is,L),U&8?l(D,f.children):U&16&&fe(f.children,D,null,b,w,S&&V!=="foreignObject",M,x),ve&&yn(f,null,b,"created"),L){for(const pe in L)pe!=="value"&&!hi(pe)&&i(D,pe,null,L[pe],S,f.children,b,w,Pt);"value"in L&&i(D,"value",null,L.value),(T=L.onVnodeBeforeMount)&&_t(T,b,f)}te(D,f,f.scopeId,M,b)}ve&&yn(f,null,b,"beforeMount");const ce=(!w||w&&!w.pendingBranch)&&z&&!z.persisted;ce&&z.beforeEnter(D),r(D,g,v),((T=L&&L.onVnodeMounted)||ce||ve)&&rt(()=>{T&&_t(T,b,f),ce&&z.enter(D),ve&&yn(f,null,b,"mounted")},w)},te=(f,g,v,b,w)=>{if(v&&m(f,v),b)for(let S=0;S<b.length;S++)m(f,b[S]);if(w){let S=w.subTree;if(g===S){const M=w.vnode;te(f,M,M.scopeId,M.slotScopeIds,w.parent)}}},fe=(f,g,v,b,w,S,M,x,D=0)=>{for(let T=D;T<f.length;T++){const V=f[T]=x?Yt(f[T]):vt(f[T]);N(null,V,g,v,b,w,S,M,x)}},Le=(f,g,v,b,w,S,M)=>{const x=g.el=f.el;let{patchFlag:D,dynamicChildren:T,dirs:V}=g;D|=f.patchFlag&16;const L=f.props||le,U=g.props||le;let z;v&&vn(v,!1),(z=U.onVnodeBeforeUpdate)&&_t(z,v,g,f),V&&yn(g,f,v,"beforeUpdate"),v&&vn(v,!0);const se=w&&g.type!=="foreignObject";if(T?be(f.dynamicChildren,T,x,v,b,se,S):M||Ot(f,g,x,null,v,b,se,S,!1),D>0){if(D&16)tt(x,g,L,U,v,b,w);else if(D&2&&L.class!==U.class&&i(x,"class",null,U.class,w),D&4&&i(x,"style",L.style,U.style,w),D&8){const ve=g.dynamicProps;for(let ce=0;ce<ve.length;ce++){const pe=ve[ce],yt=L[pe],Jn=U[pe];(Jn!==yt||pe==="value")&&i(x,pe,yt,Jn,w,f.children,v,b,Pt)}}D&1&&f.children!==g.children&&l(x,g.children)}else!M&&T==null&&tt(x,g,L,U,v,b,w);((z=U.onVnodeUpdated)||V)&&rt(()=>{z&&_t(z,v,g,f),V&&yn(g,f,v,"updated")},b)},be=(f,g,v,b,w,S,M)=>{for(let x=0;x<g.length;x++){const D=f[x],T=g[x],V=D.el&&(D.type===Ce||!Dt(D,T)||D.shapeFlag&70)?h(D.el):v;N(D,T,V,null,b,w,S,M,!0)}},tt=(f,g,v,b,w,S,M)=>{if(v!==b){for(const x in b){if(hi(x))continue;const D=b[x],T=v[x];D!==T&&x!=="value"&&i(f,x,T,D,M,g.children,w,S,Pt)}if(v!==le)for(const x in v)!hi(x)&&!(x in b)&&i(f,x,v[x],null,M,g.children,w,S,Pt);"value"in b&&i(f,"value",v.value,b.value)}},Mt=(f,g,v,b,w,S,M,x,D)=>{const T=g.el=f?f.el:a(""),V=g.anchor=f?f.anchor:a("");let{patchFlag:L,dynamicChildren:U,slotScopeIds:z}=g;z&&(x=x?x.concat(z):z),f==null?(r(T,v,b),r(V,v,b),fe(g.children,v,V,w,S,M,x,D)):L>0&&L&64&&U&&f.dynamicChildren?(be(f.dynamicChildren,U,v,w,S,M,x),(g.key!=null||w&&g===w.subTree)&&kd(f,g,!0)):Ot(f,g,v,V,w,S,M,x,D)},Yn=(f,g,v,b,w,S,M,x,D)=>{g.slotScopeIds=x,f==null?g.shapeFlag&512?w.ctx.activate(g,v,b,M,D):Bo(g,v,b,w,S,M,D):nt(f,g,D)},Bo=(f,g,v,b,w,S,M)=>{const x=f.component=ky(f,b,w);if(io(f)&&(x.ctx.renderer=Xn),Ny(x),x.asyncDep){if(w&&w.registerDep(x,Ee),!f.el){const D=x.subTree=he(ut);k(null,D,g,v)}return}Ee(x,f,g,v,w,S,M)},nt=(f,g,v)=>{const b=g.component=f.component;if(Lp(f,g,v))if(b.asyncDep&&!b.asyncResolved){me(b,g,v);return}else b.next=g,Dp(b.update),b.update();else g.component=f.component,g.el=f.el,b.vnode=g},Ee=(f,g,v,b,w,S,M)=>{const x=()=>{if(f.isMounted){let{next:V,bu:L,u:U,parent:z,vnode:se}=f,ve=V,ce;vn(f,!1),V?(V.el=se.el,me(f,V,M)):V=se,L&&di(L),(ce=V.props&&V.props.onVnodeBeforeUpdate)&&_t(ce,z,V,se),vn(f,!0);const pe=Wo(f),yt=f.subTree;f.subTree=pe,N(yt,pe,h(yt.el),Hs(yt),f,w,S),V.el=pe.el,ve===null&&bu(f,pe.el),U&&rt(U,w),(ce=V.props&&V.props.onVnodeUpdated)&&rt(()=>_t(ce,z,V,se),w)}else{let V;const{el:L,props:U}=g,{bm:z,m:se,parent:ve}=f,ce=xi(g);if(vn(f,!1),z&&di(z),!ce&&(V=U&&U.onVnodeBeforeMount)&&_t(V,ve,g),vn(f,!0),L&&$o){const pe=()=>{f.subTree=Wo(f),$o(L,f.subTree,f,w,null)};ce?g.type.__asyncLoader().then(()=>!f.isUnmounted&&pe()):pe()}else{const pe=f.subTree=Wo(f);N(null,pe,v,b,f,w,S),g.el=pe.el}if(se&&rt(se,w),!ce&&(V=U&&U.onVnodeMounted)){const pe=g;rt(()=>_t(V,ve,pe),w)}g.shapeFlag&256&&f.a&&rt(f.a,w),f.isMounted=!0,g=v=b=null}},D=f.effect=new hu(x,()=>cd(f.update),f.scope),T=f.update=D.run.bind(D);T.id=f.uid,vn(f,!0),T()},me=(f,g,v)=>{g.component=f;const b=f.vnode.props;f.vnode=g,f.next=null,dy(f,g.props,b,v),my(f,g.children,v),_r(),wu(void 0,f.update),Sr()},Ot=(f,g,v,b,w,S,M,x,D=!1)=>{const T=f&&f.children,V=f?f.shapeFlag:0,L=g.children,{patchFlag:U,shapeFlag:z}=g;if(U>0){if(U&128){Lr(T,L,v,b,w,S,M,x,D);return}else if(U&256){Vo(T,L,v,b,w,S,M,x,D);return}}z&8?(V&16&&Pt(T,w,S),L!==T&&l(v,L)):V&16?z&16?Lr(T,L,v,b,w,S,M,x,D):Pt(T,w,S,!0):(V&8&&l(v,""),z&16&&fe(L,v,b,w,S,M,x,D))},Vo=(f,g,v,b,w,S,M,x,D)=>{f=f||lr,g=g||lr;const T=f.length,V=g.length,L=Math.min(T,V);let U;for(U=0;U<L;U++){const z=g[U]=D?Yt(g[U]):vt(g[U]);N(f[U],z,v,null,w,S,M,x,D)}T>V?Pt(f,w,S,!0,!1,L):fe(g,v,b,w,S,M,x,D,L)},Lr=(f,g,v,b,w,S,M,x,D)=>{let T=0;const V=g.length;let L=f.length-1,U=V-1;for(;T<=L&&T<=U;){const z=f[T],se=g[T]=D?Yt(g[T]):vt(g[T]);if(Dt(z,se))N(z,se,v,null,w,S,M,x,D);else break;T++}for(;T<=L&&T<=U;){const z=f[L],se=g[U]=D?Yt(g[U]):vt(g[U]);if(Dt(z,se))N(z,se,v,null,w,S,M,x,D);else break;L--,U--}if(T>L){if(T<=U){const z=U+1,se=z<V?g[z].el:b;for(;T<=U;)N(null,g[T]=D?Yt(g[T]):vt(g[T]),v,se,w,S,M,x,D),T++}}else if(T>U)for(;T<=L;)Kt(f[T],w,S,!0),T++;else{const z=T,se=T,ve=new Map;for(T=se;T<=U;T++){const ct=g[T]=D?Yt(g[T]):vt(g[T]);ct.key!=null&&ve.set(ct.key,T)}let ce,pe=0;const yt=U-se+1;let Jn=!1,Dc=0;const Fr=new Array(yt);for(T=0;T<yt;T++)Fr[T]=0;for(T=z;T<=L;T++){const ct=f[T];if(pe>=yt){Kt(ct,w,S,!0);continue}let Ct;if(ct.key!=null)Ct=ve.get(ct.key);else for(ce=se;ce<=U;ce++)if(Fr[ce-se]===0&&Dt(ct,g[ce])){Ct=ce;break}Ct===void 0?Kt(ct,w,S,!0):(Fr[Ct-se]=T+1,Ct>=Dc?Dc=Ct:Jn=!0,N(ct,g[Ct],v,null,w,S,M,x,D),pe++)}const Ac=Jn?Ey(Fr):lr;for(ce=Ac.length-1,T=yt-1;T>=0;T--){const ct=se+T,Ct=g[ct],kc=ct+1<V?g[ct+1].el:b;Fr[T]===0?N(null,Ct,v,kc,w,S,M,x,D):Jn&&(ce<0||T!==Ac[ce]?Qn(Ct,v,kc,2):ce--)}}},Qn=(f,g,v,b,w=null)=>{const{el:S,type:M,transition:x,children:D,shapeFlag:T}=f;if(T&6){Qn(f.component.subTree,g,v,b);return}if(T&128){f.suspense.move(g,v,b);return}if(T&64){M.move(f,g,v,Xn);return}if(M===Ce){r(S,g,v);for(let L=0;L<D.length;L++)Qn(D[L],g,v,b);r(f.anchor,g,v);return}if(M===zo){q(f,g,v);return}if(b!==2&&T&1&&x)if(b===0)x.beforeEnter(S),r(S,g,v),rt(()=>x.enter(S),w);else{const{leave:L,delayLeave:U,afterLeave:z}=x,se=()=>r(S,g,v),ve=()=>{L(S,()=>{se(),z&&z()})};U?U(S,se,ve):ve()}else r(S,g,v)},Kt=(f,g,v,b=!1,w=!1)=>{const{type:S,props:M,ref:x,children:D,dynamicChildren:T,shapeFlag:V,patchFlag:L,dirs:U}=f;if(x!=null&&Ia(x,null,v,f,!0),V&256){g.ctx.deactivate(f);return}const z=V&1&&U,se=!xi(f);let ve;if(se&&(ve=M&&M.onVnodeBeforeUnmount)&&_t(ve,g,f),V&6)Sm(f.component,v,b);else{if(V&128){f.suspense.unmount(v,b);return}z&&yn(f,null,g,"beforeUnmount"),V&64?f.type.remove(f,g,v,w,Xn,b):T&&(S!==Ce||L>0&&L&64)?Pt(T,g,v,!1,!0):(S===Ce&&L&384||!w&&V&16)&&Pt(D,g,v),b&&_c(f)}(se&&(ve=M&&M.onVnodeUnmounted)||z)&&rt(()=>{ve&&_t(ve,g,f),z&&yn(f,null,g,"unmounted")},v)},_c=f=>{const{type:g,el:v,anchor:b,transition:w}=f;if(g===Ce){_m(v,b);return}if(g===zo){W(f);return}const S=()=>{s(v),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(f.shapeFlag&1&&w&&!w.persisted){const{leave:M,delayLeave:x}=w,D=()=>M(v,S);x?x(f.el,S,D):D()}else S()},_m=(f,g)=>{let v;for(;f!==g;)v=d(f),s(f),f=v;s(g)},Sm=(f,g,v)=>{const{bum:b,scope:w,update:S,subTree:M,um:x}=f;b&&di(b),w.stop(),S&&(S.active=!1,Kt(M,f,g,v)),x&&rt(x,g),rt(()=>{f.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},Pt=(f,g,v,b=!1,w=!1,S=0)=>{for(let M=S;M<f.length;M++)Kt(f[M],g,v,b,w)},Hs=f=>f.shapeFlag&6?Hs(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el),Sc=(f,g,v)=>{f==null?g._vnode&&Kt(g._vnode,null,null,!0):N(g._vnode||null,f,g,null,null,null,v),fd(),g._vnode=f},Xn={p:N,um:Kt,m:Qn,r:_c,mt:Bo,mc:fe,pc:Ot,pbc:be,n:Hs,o:t};let Uo,$o;return e&&([Uo,$o]=e(Xn)),{render:Sc,hydrate:Uo,createApp:vy(Sc,Uo)}}function vn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function kd(t,e,n=!1){const r=t.children,s=e.children;if(K(r)&&K(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Yt(s[i]),a.el=o.el),n||kd(o,a))}}function Ey(t){const e=t.slice(),n=[0];let r,s,i,o,a;const u=t.length;for(r=0;r<u;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const Ty=t=>t.__isTeleport,Iy=Symbol(),Ce=Symbol(void 0),Cu=Symbol(void 0),ut=Symbol(void 0),zo=Symbol(void 0),rs=[];let nn=null;function ue(t=!1){rs.push(nn=t?null:[])}function Nd(){rs.pop(),nn=rs[rs.length-1]||null}let ps=1;function Xc(t){ps+=t}function Md(t){return t.dynamicChildren=ps>0?nn||lr:null,Nd(),ps>0&&nn&&nn.push(t),t}function De(t,e,n,r,s,i){return Md(Y(t,e,n,r,s,i,!0))}function un(t,e,n,r,s){return Md(he(t,e,n,r,s,!0))}function _u(t){return t?t.__v_isVNode===!0:!1}function Dt(t,e){return t.type===e.type&&t.key===e.key}const ao="__vInternal",Od=({key:t})=>t!=null?t:null,gi=({ref:t,ref_key:e,ref_for:n})=>t!=null?Ne(t)||ke(t)||X(t)?{i:Qe,r:t,k:e,f:!!n}:t:null;function Y(t,e=null,n=null,r=0,s=null,i=t===Ce?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Od(e),ref:e&&gi(e),scopeId:so,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(Su(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=Ne(n)?8:16),ps>0&&!o&&nn&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&nn.push(u),u}const he=xy;function xy(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Iy)&&(t=ut),_u(t)){const a=On(t,e,!0);return n&&Su(a,n),a}if(Ry(t)&&(t=t.__vccOpts),e){e=Cy(e);let{class:a,style:u}=e;a&&!Ne(a)&&(e.class=su(a)),_e(u)&&(rd(u)&&!K(u)&&(u=Ke({},u)),e.style=ls(u))}const o=Ne(t)?1:Fp(t)?128:Ty(t)?64:_e(t)?4:X(t)?2:0;return Y(t,e,n,r,s,o,i,!0)}function Cy(t){return t?rd(t)||ao in t?Ke({},t):t:null}function On(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?_y(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Od(a),ref:e&&e.ref?n&&s?K(s)?s.concat(gi(e)):[s,gi(e)]:gi(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ce?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&On(t.ssContent),ssFallback:t.ssFallback&&On(t.ssFallback),el:t.el,anchor:t.anchor}}function xt(t=" ",e=0){return he(Cu,null,t,e)}function Jc(t="",e=!1){return e?(ue(),un(ut,null,t)):he(ut,null,t)}function vt(t){return t==null||typeof t=="boolean"?he(ut):K(t)?he(Ce,null,t.slice()):typeof t=="object"?Yt(t):he(Cu,null,String(t))}function Yt(t){return t.el===null||t.memo?t:On(t)}function Su(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(K(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Su(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(ao in e)?e._ctx=Qe:s===3&&Qe&&(Qe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else X(e)?(e={default:e,_ctx:Qe},n=32):(e=String(e),r&64?(n=16,e=[xt(e)]):n=8);t.children=e,t.shapeFlag|=n}function _y(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=su([e.class,r.class]));else if(s==="style")e.style=ls([e.style,r.style]);else if(Ji(s)){const i=e[s],o=r[s];o&&i!==o&&!(K(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function _t(t,e,n,r=null){pt(t,e,7,[n,r])}function ys(t,e,n,r){let s;const i=n&&n[r];if(K(t)||Ne(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(_e(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,u=o.length;a<u;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function Pd(t,e,n={},r,s){if(Qe.isCE||Qe.parent&&xi(Qe.parent)&&Qe.parent.isCE)return he("slot",e==="default"?null:{name:e},r&&r());let i=t[e];i&&i._c&&(i._d=!1),ue();const o=i&&Rd(i(n)),a=un(Ce,{key:n.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Rd(t){return t.some(e=>_u(e)?!(e.type===ut||e.type===Ce&&!Rd(e.children)):!0)?t:null}const xa=t=>t?Fd(t)?uo(t)||t.proxy:xa(t.parent):null,_i=Ke(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xa(t.parent),$root:t=>xa(t.root),$emit:t=>t.emit,$options:t=>Id(t),$forceUpdate:t=>()=>cd(t.update),$nextTick:t=>_p.bind(t.proxy),$watch:t=>Hp.bind(t)}),Sy={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(r!==le&&re(r,e))return o[e]=1,r[e];if(s!==le&&re(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&re(c,e))return o[e]=3,i[e];if(n!==le&&re(n,e))return o[e]=4,n[e];ba&&(o[e]=0)}}const l=_i[e];let h,d;if(l)return e==="$attrs"&&dt(t,"get",e),l(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==le&&re(n,e))return o[e]=4,n[e];if(d=u.config.globalProperties,re(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return s!==le&&re(s,e)?(s[e]=n,!0):r!==le&&re(r,e)?(r[e]=n,!0):re(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==le&&re(t,o)||e!==le&&re(e,o)||(a=i[0])&&re(a,o)||re(r,o)||re(_i,o)||re(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:re(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},Dy=Ad();let Ay=0;function ky(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Dy,i={uid:Ay++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Gm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cd(r,s),emitsOptions:md(r,s),emit:null,emitted:null,propsDefaults:le,inheritAttrs:r.inheritAttrs,ctx:le,data:le,props:le,attrs:le,slots:le,refs:le,setupState:le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=kp.bind(null,i),t.ce&&t.ce(i),i}let Be=null;const Ld=()=>Be||Qe,cn=t=>{Be=t,t.scope.on()},rn=()=>{Be&&Be.scope.off(),Be=null};function Fd(t){return t.vnode.shapeFlag&4}let vs=!1;function Ny(t,e=!1){vs=e;const{props:n,children:r}=t.vnode,s=Fd(t);hy(t,n,s,e),gy(t,r);const i=s?My(t,e):void 0;return vs=!1,i}function My(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=sd(new Proxy(t.ctx,Sy));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?Py(t):null;cn(t),_r();const i=tn(r,t,0,[t.props,s]);if(Sr(),rn(),uu(i)){if(i.then(rn,rn),e)return i.then(o=>{Ca(t,o,e)}).catch(o=>{Os(o,t,0)});t.asyncDep=i}else Ca(t,i,e)}else Bd(t,e)}function Ca(t,e,n){X(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:_e(e)&&(t.setupState=ad(e)),Bd(t,n)}let Zc;function Bd(t,e,n){const r=t.type;if(!t.render){if(!e&&Zc&&!r.render){const s=r.template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:u}=r,c=Ke(Ke({isCustomElement:i,delimiters:a},o),u);r.render=Zc(s,c)}}t.render=r.render||It}cn(t),_r(),oy(t),Sr(),rn()}function Oy(t){return new Proxy(t.attrs,{get(e,n){return dt(t,"get","$attrs"),e[n]}})}function Py(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=Oy(t))},slots:t.slots,emit:t.emit,expose:e}}function uo(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ad(sd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in _i)return _i[n](t)}}))}function Ry(t){return X(t)&&"__vccOpts"in t}const Jt=(t,e)=>zr(t,e,vs);function Ly(t){const e=Ld();let n=t();return rn(),uu(n)&&(n=n.catch(r=>{throw cn(e),r})),[n,()=>cn(e)]}const Fy="3.2.33",By="http://www.w3.org/2000/svg",Cn=typeof document!="undefined"?document:null,el=Cn&&Cn.createElement("template"),Vy={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Cn.createElementNS(By,t):Cn.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Cn.createTextNode(t),createComment:t=>Cn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Cn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{el.innerHTML=r?`<svg>${t}</svg>`:t;const a=el.content;if(r){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Uy(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function $y(t,e,n){const r=t.style,s=Ne(n);if(n&&!s){for(const i in n)_a(r,i,n[i]);if(e&&!Ne(e))for(const i in e)n[i]==null&&_a(r,i,"")}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const tl=/\s*!important$/;function _a(t,e,n){if(K(n))n.forEach(r=>_a(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=qy(t,e);tl.test(n)?t.setProperty(Cr(r),n.replace(tl,""),"important"):t[r]=n}}const nl=["Webkit","Moz","ms"],Yo={};function qy(t,e){const n=Yo[e];if(n)return n;let r=vr(e);if(r!=="filter"&&r in t)return Yo[e]=r;r=jh(r);for(let s=0;s<nl.length;s++){const i=nl[s]+r;if(i in t)return Yo[e]=i}return e}const rl="http://www.w3.org/1999/xlink";function jy(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(rl,e.slice(6,e.length)):t.setAttributeNS(rl,e,n);else{const i=Rm(e);n==null||i&&!Bh(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Ky(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const u=n==null?"":n;(t.value!==u||t.tagName==="OPTION")&&(t.value=u),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=Bh(n):n==null&&u==="string"?(n="",a=!0):u==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[Vd,Wy]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let Sa=0;const Hy=Promise.resolve(),Gy=()=>{Sa=0},zy=()=>Sa||(Hy.then(Gy),Sa=Vd());function Ud(t,e,n,r){t.addEventListener(e,n,r)}function Yy(t,e,n,r){t.removeEventListener(e,n,r)}function Qy(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,u]=Xy(e);if(r){const c=i[e]=Jy(r,s);Ud(t,a,c,u)}else o&&(Yy(t,a,o,u),i[e]=void 0)}}const sl=/(?:Once|Passive|Capture)$/;function Xy(t){let e;if(sl.test(t)){e={};let n;for(;n=t.match(sl);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[Cr(t.slice(2)),e]}function Jy(t,e){const n=r=>{const s=r.timeStamp||Vd();(Wy||s>=n.attached-1)&&pt(Zy(r,n.value),e,5,[r])};return n.value=t,n.attached=zy(),n}function Zy(t,e){if(K(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const il=/^on[a-z]/,ev=(t,e,n,r,s=!1,i,o,a,u)=>{e==="class"?Uy(t,r,s):e==="style"?$y(t,n,r):Ji(e)?iu(e)||Qy(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):tv(t,e,r,s))?Ky(t,e,r,i,o,a,u):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),jy(t,e,r,s))};function tv(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&il.test(e)&&X(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||il.test(e)&&Ne(n)?!1:e in t}const nv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Yp.props;const ol=t=>{const e=t.props["onUpdate:modelValue"];return K(e)?n=>di(e,n):e},rv={deep:!0,created(t,e,n){t._assign=ol(n),Ud(t,"change",()=>{const r=t._modelValue,s=sv(t),i=t.checked,o=t._assign;if(K(r)){const a=Vh(r,s),u=a!==-1;if(i&&!u)o(r.concat(s));else if(!i&&u){const c=[...r];c.splice(a,1),o(c)}}else if(Zi(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o($d(t,i))})},mounted:al,beforeUpdate(t,e,n){t._assign=ol(n),al(t,e,n)}};function al(t,{value:e,oldValue:n},r){t._modelValue=e,K(e)?t.checked=Vh(e,r.props.value)>-1:Zi(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Xi(e,$d(t,!0)))}function sv(t){return"_value"in t?t._value:t.value}function $d(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const iv=Ke({patchProp:ev},Vy);let ul;function ov(){return ul||(ul=wy(iv))}const av=(...t)=>{const e=ov().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=uv(r);if(!s)return;const i=e._component;!X(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function uv(t){return Ne(t)?document.querySelector(t):t}try{self["workbox:window:6.5.2"]&&_()}catch{}function Da(t,e){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(s){n(s.data)},t.postMessage(e,[r.port2])})}function cv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cl(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lv(t,e){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(s,i){if(s){if(typeof s=="string")return cl(s,i);var o=Object.prototype.toString.call(s).slice(8,-1);return o==="Object"&&s.constructor&&(o=s.constructor.name),o==="Map"||o==="Set"?Array.from(s):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?cl(s,i):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var Qo=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function Xo(t,e){var n=location.href;return new URL(t,n).href===new URL(e,n).href}var Br=function(t,e){this.type=t,Object.assign(this,e)};function Js(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function hv(){}var dv={type:"SKIP_WAITING"};function ll(t,e){if(!e)return t&&t.then?t.then(hv):Promise.resolve()}var fv=function(t){var e,n;function r(a,u){var c,l;return u===void 0&&(u={}),(c=t.call(this)||this).nn={},c.tn=0,c.rn=new Qo,c.en=new Qo,c.on=new Qo,c.un=0,c.an=new Set,c.cn=function(){var h=c.fn,d=h.installing;c.tn>0||!Xo(d.scriptURL,c.sn.toString())||performance.now()>c.un+6e4?(c.vn=d,h.removeEventListener("updatefound",c.cn)):(c.hn=d,c.an.add(d),c.rn.resolve(d)),++c.tn,d.addEventListener("statechange",c.ln)},c.ln=function(h){var d=c.fn,m=h.target,y=m.state,I=m===c.vn,N={sw:m,isExternal:I,originalEvent:h};!I&&c.mn&&(N.isUpdate=!0),c.dispatchEvent(new Br(y,N)),y==="installed"?c.wn=self.setTimeout(function(){y==="installed"&&d.waiting===m&&c.dispatchEvent(new Br("waiting",N))},200):y==="activating"&&(clearTimeout(c.wn),I||c.en.resolve(m))},c.dn=function(h){var d=c.hn,m=d!==navigator.serviceWorker.controller;c.dispatchEvent(new Br("controlling",{isExternal:m,originalEvent:h,sw:d,isUpdate:c.mn})),m||c.on.resolve(d)},c.gn=(l=function(h){var d=h.data,m=h.ports,y=h.source;return Js(c.getSW(),function(){c.an.has(y)&&c.dispatchEvent(new Br("message",{data:d,originalEvent:h,ports:m,sw:y}))})},function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];try{return Promise.resolve(l.apply(this,h))}catch(m){return Promise.reject(m)}}),c.sn=a,c.nn=u,navigator.serviceWorker.addEventListener("message",c.gn),c}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s,i,o=r.prototype;return o.register=function(a){var u=(a===void 0?{}:a).immediate,c=u!==void 0&&u;try{var l=this;return function(h,d){var m=h();return m&&m.then?m.then(d):d(m)}(function(){if(!c&&document.readyState!=="complete")return ll(new Promise(function(h){return window.addEventListener("load",h)}))},function(){return l.mn=Boolean(navigator.serviceWorker.controller),l.yn=l.pn(),Js(l.bn(),function(h){l.fn=h,l.yn&&(l.hn=l.yn,l.en.resolve(l.yn),l.on.resolve(l.yn),l.yn.addEventListener("statechange",l.ln,{once:!0}));var d=l.fn.waiting;return d&&Xo(d.scriptURL,l.sn.toString())&&(l.hn=d,Promise.resolve().then(function(){l.dispatchEvent(new Br("waiting",{sw:d,wasWaitingBeforeRegister:!0}))}).then(function(){})),l.hn&&(l.rn.resolve(l.hn),l.an.add(l.hn)),l.fn.addEventListener("updatefound",l.cn),navigator.serviceWorker.addEventListener("controllerchange",l.dn),l.fn})})}catch(h){return Promise.reject(h)}},o.update=function(){try{return this.fn?ll(this.fn.update()):void 0}catch(a){return Promise.reject(a)}},o.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(a){try{return Js(this.getSW(),function(u){return Da(u,a)})}catch(u){return Promise.reject(u)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Da(this.fn.waiting,dv)},o.pn=function(){var a=navigator.serviceWorker.controller;return a&&Xo(a.scriptURL,this.sn.toString())?a:void 0},o.bn=function(){try{var a=this;return function(u,c){try{var l=u()}catch(h){return c(h)}return l&&l.then?l.then(void 0,c):l}(function(){return Js(navigator.serviceWorker.register(a.sn,a.nn),function(u){return a.un=performance.now(),u})},function(u){throw u})}catch(u){return Promise.reject(u)}},s=r,(i=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&cv(s.prototype,i),r}(function(){function t(){this.Pn=new Map}var e=t.prototype;return e.addEventListener=function(n,r){this.Sn(n).add(r)},e.removeEventListener=function(n,r){this.Sn(n).delete(r)},e.dispatchEvent=function(n){n.target=this;for(var r,s=lv(this.Sn(n.type));!(r=s()).done;)(0,r.value)(n)},e.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function gv(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisterError:i}=t;let o,a;const u=async(c=!0)=>{c&&(o==null||o.addEventListener("controlling",l=>{l.isUpdate&&window.location.reload()})),a&&a.waiting&&await Da(a.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){o=new fv("/hcs-anaheim-pool/sw.js",{scope:"/hcs-anaheim-pool/",type:"classic"}),o.addEventListener("activated",c=>{c.isUpdate||r==null||r()});{const c=()=>{n==null||n()};o.addEventListener("waiting",c),o.addEventListener("externalwaiting",c)}o.register({immediate:e}).then(c=>{a=c,s==null||s(c)}).catch(c=>{i==null||i(c)})}return u}function mv(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisterError:i}=t,o=an(!1),a=an(!1);return{updateServiceWorker:gv({immediate:e,onNeedRefresh(){o.value=!0,n==null||n()},onOfflineReady(){a.value=!0,r==null||r()},onRegistered:s,onRegisterError:i}),offlineReady:a,needRefresh:o}}const pv={key:0,class:"pwa-toast bg-gray-700 rounded-lg",role:"alert"},yv={class:"message"},vv={key:0},wv={key:1},bv=Wn({setup(t){const{offlineReady:e,needRefresh:n,updateServiceWorker:r}=mv(),s=async()=>{e.value=!1,n.value=!1};return(i,o)=>ee(e)||ee(n)?(ue(),De("div",pv,[Y("div",yv,[ee(e)?(ue(),De("span",vv," App ready to work offline ")):(ue(),De("span",wv," New content available, click on reload button to update. "))]),ee(n)?(ue(),De("button",{key:0,onClick:o[0]||(o[0]=a=>ee(r)())}," Reload ")):Jc("",!0),Y("button",{onClick:s}," Close ")])):Jc("",!0)}}),Ev={class:"table-auto min-w-full divide-y divide-gray-200"},Tv={class:"bg-gray-700"},Iv={key:0},xv=["href"],Cv={class:"bg-gray-900 divide-y divide-gray-200"},qd=Wn({props:{headers:null},setup(t){return(e,n)=>(ue(),De("table",Ev,[Y("thead",Tv,[Y("tr",null,[(ue(!0),De(Ce,null,ys(t.headers,(r,s)=>(ue(),De("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-100 uppercase tracking-wider lg:text-center",key:s},[r.text&&!r.link?(ue(),De("span",Iv,ot(r.text),1)):(ue(),De("a",{key:1,href:r.link,class:"underline",target:"_blank"},ot(r.text),9,xv))]))),128))])]),Y("tbody",Cv,[Pd(e.$slots,"default",{headers:t.headers})])]))}}),jd=an(window.innerWidth),hl=()=>jd.value=window.innerWidth;function co(){return Tu(()=>window.addEventListener("resize",hl)),Iu(()=>window.removeEventListener("resize",hl)),{windowWidth:jd}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_v=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,l=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,m=c&63;u||(m=64,o||(d=64)),r.push(n[l],n[h],n[d],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kd(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_v(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw Error();const d=i<<2|a>>4;if(r.push(d),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Dv=function(t){const e=Kd(t);return Sv.encodeByteArray(e,!0)},Wd=function(t){return Dv(t).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kv(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function Nv(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ov(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pv(){return Pn().indexOf("Electron/")>=0}function Rv(){const t=Pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Lv(){return Pn().indexOf("MSAppHost/")>=0}function Fv(){return!Nv()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hd(){return typeof indexedDB=="object"}function Bv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="FirebaseError";class lo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Vv,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gd.prototype.create)}}class Gd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Uv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lo(s,a,r)}}function Uv(t,e){return t.replace($v,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $v=/\{\$([^}]+)}/g;function Aa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(dl(i)&&dl(o)){if(!Aa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function dl(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t,e){return new Promise((n,r)=>{t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var i;r(`${e}: ${(i=s.target.error)===null||i===void 0?void 0:i.message}`)}})}class fl{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,n="readonly"){return new zd(this._db.transaction.call(this._db,e,n))}createObjectStore(e,n){return new Yd(this._db.createObjectStore(e,n))}close(){this._db.close()}}class zd{constructor(e){this._transaction=e,this.complete=new Promise((n,r)=>{this._transaction.oncomplete=function(){n()},this._transaction.onerror=()=>{r(this._transaction.error)},this._transaction.onabort=()=>{r(this._transaction.error)}})}objectStore(e){return new Yd(this._transaction.objectStore(e))}}class Yd{constructor(e){this._store=e}index(e){return new gl(this._store.index(e))}createIndex(e,n,r){return new gl(this._store.createIndex(e,n,r))}get(e){const n=this._store.get(e);return Qr(n,"Error reading from IndexedDB")}put(e,n){const r=this._store.put(e,n);return Qr(r,"Error writing to IndexedDB")}delete(e){const n=this._store.delete(e);return Qr(n,"Error deleting from IndexedDB")}clear(){const e=this._store.clear();return Qr(e,"Error clearing IndexedDB object store")}}class gl{constructor(e){this._index=e}get(e){const n=this._index.get(e);return Qr(n,"Error reading from IndexedDB")}}function jv(t,e,n){return new Promise((r,s)=>{try{const i=indexedDB.open(t,e);i.onsuccess=o=>{r(new fl(o.target.result))},i.onerror=o=>{var a;s(`Error opening indexedDB: ${(a=o.target.error)===null||a===void 0?void 0:a.message}`)},i.onupgradeneeded=o=>{n(new fl(i.result),o.oldVersion,o.newVersion,new zd(i.transaction))}}catch(i){s(`Error opening indexedDB: ${i.message}`)}})}class ws{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Av;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hv(e))try{this.getOrInitializeService({instanceIdentifier:Tn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Tn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tn){return this.instances.has(e)}getOptions(e=Tn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tn){return this.component?this.component.multipleInstances?e:Tn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wv(t){return t===Tn?void 0:t}function Hv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Kv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const zv={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},Yv=ie.INFO,Qv={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},Xv=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Qv[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qd{constructor(e){this.name=e,this._logLevel=Yv,this._logHandler=Xv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Zv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Zv(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ka="@firebase/app",ml="0.7.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Qd("@firebase/app"),ew="@firebase/app-compat",tw="@firebase/analytics-compat",nw="@firebase/analytics",rw="@firebase/app-check-compat",sw="@firebase/app-check",iw="@firebase/auth",ow="@firebase/auth-compat",aw="@firebase/database",uw="@firebase/database-compat",cw="@firebase/functions",lw="@firebase/functions-compat",hw="@firebase/installations",dw="@firebase/installations-compat",fw="@firebase/messaging",gw="@firebase/messaging-compat",mw="@firebase/performance",pw="@firebase/performance-compat",yw="@firebase/remote-config",vw="@firebase/remote-config-compat",ww="@firebase/storage",bw="@firebase/storage-compat",Ew="@firebase/firestore",Tw="@firebase/firestore-compat",Iw="firebase",xw="9.7.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="[DEFAULT]",Cw={[ka]:"fire-core",[ew]:"fire-core-compat",[nw]:"fire-analytics",[tw]:"fire-analytics-compat",[sw]:"fire-app-check",[rw]:"fire-app-check-compat",[iw]:"fire-auth",[ow]:"fire-auth-compat",[aw]:"fire-rtdb",[uw]:"fire-rtdb-compat",[cw]:"fire-fn",[lw]:"fire-fn-compat",[hw]:"fire-iid",[dw]:"fire-iid-compat",[fw]:"fire-fcm",[gw]:"fire-fcm-compat",[mw]:"fire-perf",[pw]:"fire-perf-compat",[yw]:"fire-rc",[vw]:"fire-rc-compat",[ww]:"fire-gcs",[bw]:"fire-gcs-compat",[Ew]:"fire-fst",[Tw]:"fire-fst-compat","fire-js":"fire-js",[Iw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Map,Na=new Map;function _w(t,e){try{t.container.addComponent(e)}catch(n){Du.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(Na.has(e))return Du.debug(`There were multiple attempts to register component ${e}.`),!1;Na.set(e,t);for(const n of Si.values())_w(n,t);return!0}function Sw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},Rn=new Gd("app","Firebase",Dw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=xw;function Nw(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:Xd,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Rn.create("bad-app-name",{appName:String(r)});const s=Si.get(r);if(s){if(Aa(t,s.options)&&Aa(n,s.config))return s;throw Rn.create("duplicate-app",{appName:r})}const i=new Gv(r);for(const a of Na.values())i.addComponent(a);const o=new Aw(t,n,i);return Si.set(r,o),o}function Mw(t=Xd){const e=Si.get(t);if(!e)throw Rn.create("no-app",{appName:t});return e}function gr(t,e,n){var r;let s=(r=Cw[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Du.warn(a.join(" "));return}Di(new ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="firebase-heartbeat-database",Pw=1,bs="firebase-heartbeat-store";let Jo=null;function Jd(){return Jo||(Jo=jv(Ow,Pw,(t,e)=>{switch(e){case 0:t.createObjectStore(bs)}}).catch(t=>{throw Rn.create("storage-open",{originalErrorMessage:t.message})})),Jo}async function Rw(t){try{return(await Jd()).transaction(bs).objectStore(bs).get(Zd(t))}catch(e){throw Rn.create("storage-get",{originalErrorMessage:e.message})}}async function pl(t,e){try{const r=(await Jd()).transaction(bs,"readwrite");return await r.objectStore(bs).put(e,Zd(t)),r.complete}catch(n){throw Rn.create("storage-set",{originalErrorMessage:n.message})}}function Zd(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=1024,Fw=30*24*60*60*1e3;class Bw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Uw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yl();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=Fw}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yl(),{heartbeatsToSend:n,unsentEntries:r}=Vw(this._heartbeatsCache.heartbeats),s=Wd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function yl(){return new Date().toISOString().substring(0,10)}function Vw(t,e=Lw){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),vl(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vl(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Uw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hd()?Bv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Rw(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return pl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return pl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vl(t){return Wd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){Di(new ws("platform-logger",e=>new Jv(e),"PRIVATE")),Di(new ws("heartbeat",e=>new Bw(e),"PRIVATE")),gr(ka,ml,t),gr(ka,ml,"esm2017"),gr("fire-js","")}$w("");var qw="firebase",jw="9.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(qw,jw,"app");var Kw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},R,Au=Au||{},H=Kw||self;function Ai(){}function Ma(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ps(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Ww(t){return Object.prototype.hasOwnProperty.call(t,Zo)&&t[Zo]||(t[Zo]=++Hw)}var Zo="closure_uid_"+(1e9*Math.random()>>>0),Hw=0;function Gw(t,e,n){return t.call.apply(t.bind,arguments)}function zw(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Ve(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ve=Gw:Ve=zw,Ve.apply(null,arguments)}function Zs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function $e(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function gn(){this.s=this.s,this.o=this.o}var Yw=0,Qw={};gn.prototype.s=!1;gn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),Yw!=0)){var t=Ww(this);delete Qw[t]}};gn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ef=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},tf=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)i in s&&e.call(n,s[i],i,t)};function Xw(t){e:{var e=q0;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function wl(t){return Array.prototype.concat.apply([],arguments)}function ku(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ki(t){return/^[\s\xa0]*$/.test(t)}var bl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ge(t,e){return t.indexOf(e)!=-1}function ea(t,e){return t<e?-1:t>e?1:0}var ze;e:{var El=H.navigator;if(El){var Tl=El.userAgent;if(Tl){ze=Tl;break e}}ze=""}function Nu(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function nf(t){const e={};for(const n in t)e[n]=t[n];return e}var Il="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rf(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Il.length;i++)n=Il[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Mu(t){return Mu[" "](t),t}Mu[" "]=Ai;function Jw(t){var e=t0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var Zw=Ge(ze,"Opera"),wr=Ge(ze,"Trident")||Ge(ze,"MSIE"),sf=Ge(ze,"Edge"),Oa=sf||wr,of=Ge(ze,"Gecko")&&!(Ge(ze.toLowerCase(),"webkit")&&!Ge(ze,"Edge"))&&!(Ge(ze,"Trident")||Ge(ze,"MSIE"))&&!Ge(ze,"Edge"),e0=Ge(ze.toLowerCase(),"webkit")&&!Ge(ze,"Edge");function af(){var t=H.document;return t?t.documentMode:void 0}var Ni;e:{var ta="",na=function(){var t=ze;if(of)return/rv:([^\);]+)(\)|;)/.exec(t);if(sf)return/Edge\/([\d\.]+)/.exec(t);if(wr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(e0)return/WebKit\/(\S+)/.exec(t);if(Zw)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(na&&(ta=na?na[1]:""),wr){var ra=af();if(ra!=null&&ra>parseFloat(ta)){Ni=String(ra);break e}}Ni=ta}var t0={};function n0(){return Jw(function(){let t=0;const e=bl(String(Ni)).split("."),n=bl("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=ea(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||ea(s[2].length==0,i[2].length==0)||ea(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Pa;if(H.document&&wr){var xl=af();Pa=xl||parseInt(Ni,10)||void 0}else Pa=void 0;var r0=Pa,s0=function(){if(!H.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{H.addEventListener("test",Ai,e),H.removeEventListener("test",Ai,e)}catch{}return t}();function je(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};function Es(t,e){if(je.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(of){e:{try{Mu(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:i0[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Es.Z.h.call(this)}}$e(Es,je);var i0={2:"touch",3:"pen",4:"mouse"};Es.prototype.h=function(){Es.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Rs="closure_listenable_"+(1e6*Math.random()|0),o0=0;function a0(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++o0,this.ca=this.fa=!1}function ho(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function fo(t){this.src=t,this.g={},this.h=0}fo.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=La(t,e,r,s);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new a0(e,this.src,i,!!r,s),e.fa=n,t.push(e)),e};function Ra(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=ef(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ho(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function La(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return s}return-1}var Ou="closure_lm_"+(1e6*Math.random()|0),sa={};function uf(t,e,n,r,s){if(r&&r.once)return lf(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)uf(t,e[i],n,r,s);return null}return n=Lu(n),t&&t[Rs]?t.N(e,n,Ps(r)?!!r.capture:!!r,s):cf(t,e,n,!1,r,s)}function cf(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Ps(s)?!!s.capture:!!s,a=Ru(t);if(a||(t[Ou]=a=new fo(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=u0(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)s0||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(df(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function u0(){function t(n){return e.call(t.src,t.listener,n)}var e=c0;return t}function lf(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)lf(t,e[i],n,r,s);return null}return n=Lu(n),t&&t[Rs]?t.O(e,n,Ps(r)?!!r.capture:!!r,s):cf(t,e,n,!0,r,s)}function hf(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)hf(t,e[i],n,r,s);else r=Ps(r)?!!r.capture:!!r,n=Lu(n),t&&t[Rs]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=La(i,n,r,s),-1<n&&(ho(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ru(t))&&(e=t.g[e.toString()],t=-1,e&&(t=La(e,n,r,s)),(n=-1<t?e[t]:null)&&Pu(n))}function Pu(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Rs])Ra(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(df(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ru(e))?(Ra(n,t),n.h==0&&(n.src=null,e[Ou]=null)):ho(t)}}}function df(t){return t in sa?sa[t]:sa[t]="on"+t}function c0(t,e){if(t.ca)t=!0;else{e=new Es(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Pu(t),t=n.call(r,e)}return t}function Ru(t){return t=t[Ou],t instanceof fo?t:null}var ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lu(t){return typeof t=="function"?t:(t[ia]||(t[ia]=function(e){return t.handleEvent(e)}),t[ia])}function Me(){gn.call(this),this.i=new fo(this),this.P=this,this.I=null}$e(Me,gn);Me.prototype[Rs]=!0;Me.prototype.removeEventListener=function(t,e,n,r){hf(this,t,e,n,r)};function Ue(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new je(e,t);else if(e instanceof je)e.target=e.target||t;else{var s=e;e=new je(r,t),rf(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=ei(o,r,!0,e)&&s}if(o=e.g=t,s=ei(o,r,!0,e)&&s,s=ei(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=ei(o,r,!1,e)&&s}Me.prototype.M=function(){if(Me.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ho(n[r]);delete t.g[e],t.h--}}this.I=null};Me.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Me.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ei(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Ra(t.i,o),s=a.call(u,r)!==!1&&s}}return s&&!r.defaultPrevented}var Fu=H.JSON.stringify;function l0(){var t=gf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class h0{constructor(){this.h=this.g=null}add(e,n){const r=ff.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ff=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new d0,t=>t.reset());class d0{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function f0(t){H.setTimeout(()=>{throw t},0)}function Bu(t,e){Fa||g0(),Ba||(Fa(),Ba=!0),gf.add(t,e)}var Fa;function g0(){var t=H.Promise.resolve(void 0);Fa=function(){t.then(m0)}}var Ba=!1,gf=new h0;function m0(){for(var t;t=l0();){try{t.h.call(t.g)}catch(n){f0(n)}var e=ff;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ba=!1}function go(t,e){Me.call(this),this.h=t||1,this.g=e||H,this.j=Ve(this.kb,this),this.l=Date.now()}$e(go,Me);R=go.prototype;R.da=!1;R.S=null;R.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ue(this,"tick"),this.da&&(Vu(this),this.start()))}};R.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Vu(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}R.M=function(){go.Z.M.call(this),Vu(this),delete this.g};function Uu(t,e,n){if(typeof t=="function")n&&(t=Ve(t,n));else if(t&&typeof t.handleEvent=="function")t=Ve(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:H.setTimeout(t,e||0)}function mf(t){t.g=Uu(()=>{t.g=null,t.i&&(t.i=!1,mf(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class p0 extends gn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mf(this)}M(){super.M(),this.g&&(H.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(t){gn.call(this),this.h=t,this.g={}}$e(Ts,gn);var Cl=[];function pf(t,e,n,r){Array.isArray(n)||(n&&(Cl[0]=n.toString()),n=Cl);for(var s=0;s<n.length;s++){var i=uf(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function yf(t){Nu(t.g,function(e,n){this.g.hasOwnProperty(n)&&Pu(e)},t),t.g={}}Ts.prototype.M=function(){Ts.Z.M.call(this),yf(this)};Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function mo(){this.g=!0}mo.prototype.Aa=function(){this.g=!1};function y0(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+c+"&"):o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function v0(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function ur(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+b0(t,n)+(r?" "+r:"")})}function w0(t,e){t.info(function(){return"TIMEOUT: "+e})}mo.prototype.info=function(){};function b0(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Fu(n)}catch{return e}}var Hn={},_l=null;function po(){return _l=_l||new Me}Hn.Ma="serverreachability";function vf(t){je.call(this,Hn.Ma,t)}$e(vf,je);function Is(t){const e=po();Ue(e,new vf(e,t))}Hn.STAT_EVENT="statevent";function wf(t,e){je.call(this,Hn.STAT_EVENT,t),this.stat=e}$e(wf,je);function Xe(t){const e=po();Ue(e,new wf(e,t))}Hn.Na="timingevent";function bf(t,e){je.call(this,Hn.Na,t),this.size=e}$e(bf,je);function Ls(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return H.setTimeout(function(){t()},e)}var yo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ef={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $u(){}$u.prototype.h=null;function Sl(t){return t.h||(t.h=t.i())}function Tf(){}var Fs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qu(){je.call(this,"d")}$e(qu,je);function ju(){je.call(this,"c")}$e(ju,je);var Va;function vo(){}$e(vo,$u);vo.prototype.g=function(){return new XMLHttpRequest};vo.prototype.i=function(){return{}};Va=new vo;function Bs(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ts(this),this.P=E0,t=Oa?125:void 0,this.W=new go(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new If}function If(){this.i=null,this.g="",this.h=!1}var E0=45e3,Ua={},Mi={};R=Bs.prototype;R.setTimeout=function(t){this.P=t};function $a(t,e,n){t.K=1,t.v=bo(Ut(e)),t.s=n,t.U=!0,xf(t,null)}function xf(t,e){t.F=Date.now(),Vs(t),t.A=Ut(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Nf(n.h,"t",r),t.C=0,n=t.l.H,t.h=new If,t.g=Xf(t.l,n?e:null,!t.s),0<t.O&&(t.L=new p0(Ve(t.Ia,t,t.g),t.O)),pf(t.V,t.g,"readystatechange",t.gb),e=t.H?nf(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Is(1),y0(t.j,t.u,t.A,t.m,t.X,t.s)}R.gb=function(t){t=t.target;const e=this.L;e&&Lt(t)==3?e.l():this.Ia(t)};R.Ia=function(t){try{if(t==this.g)e:{const l=Lt(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>l)&&(l!=3||Oa||this.g&&(this.h.h||this.g.ga()||Nl(this.g)))){this.I||l!=4||e==7||(e==8||0>=h?Is(3):Is(2)),wo(this);var n=this.g.ba();this.N=n;t:if(Cf(this)){var r=Nl(this.g);t="";var s=r.length,i=Lt(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){An(this),ss(this);var o="";break t}this.h.i=new H.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,v0(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ki(a)){var c=a;break t}}c=null}if(n=c)ur(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qa(this,n);else{this.i=!1,this.o=3,Xe(12),An(this),ss(this);break e}}this.U?(_f(this,l,o),Oa&&this.i&&l==3&&(pf(this.V,this.W,"tick",this.fb),this.W.start())):(ur(this.j,this.m,o,null),qa(this,o)),l==4&&An(this),this.i&&!this.I&&(l==4?Gf(this.l,this):(this.i=!1,Vs(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Xe(12)):(this.o=0,Xe(13)),An(this),ss(this)}}}catch{}finally{}};function Cf(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function _f(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=T0(t,n),s==Mi){e==4&&(t.o=4,Xe(14),r=!1),ur(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Ua){t.o=4,Xe(15),ur(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ur(t.j,t.m,s,null),qa(t,s);Cf(t)&&s!=Mi&&s!=Ua&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Xe(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ju(e),e.L=!0,Xe(11))):(ur(t.j,t.m,n,"[Invalid Chunked Response]"),An(t),ss(t))}R.fb=function(){if(this.g){var t=Lt(this.g),e=this.g.ga();this.C<e.length&&(wo(this),_f(this,t,e),this.i&&t!=4&&Vs(this))}};function T0(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Mi:(n=Number(e.substring(n,r)),isNaN(n)?Ua:(r+=1,r+n>e.length?Mi:(e=e.substr(r,n),t.C=r+n,e)))}R.cancel=function(){this.I=!0,An(this)};function Vs(t){t.Y=Date.now()+t.P,Sf(t,t.P)}function Sf(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ls(Ve(t.eb,t),e)}function wo(t){t.B&&(H.clearTimeout(t.B),t.B=null)}R.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(w0(this.j,this.A),this.K!=2&&(Is(3),Xe(17)),An(this),this.o=2,ss(this)):Sf(this,this.Y-t)};function ss(t){t.l.G==0||t.I||Gf(t.l,t)}function An(t){wo(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Vu(t.W),yf(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function qa(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ja(n.i,t))){if(n.I=t.N,!t.J&&ja(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Li(n),Io(n);else break e;Xu(n),Xe(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=Ls(Ve(n.ab,n),6e3));if(1>=Pf(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else kn(n,11)}else if((t.J||n.g==t)&&Li(n),!ki(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.U=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.J=c[1],n.la=c[2];const l=c[3];l!=null&&(n.ma=l,n.h.info("VER="+n.ma));const h=c[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;!i.g&&(Ge(y,"spdy")||Ge(y,"quic")||Ge(y,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(Hu(i,i.h),i.h=null))}if(r.D){const I=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.sa=I,we(r.F,r.D,I))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=Qf(r,r.H?r.la:null,r.W),o.J){Rf(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(wo(a),Vs(a)),r.g=o}else Wf(r);0<n.l.length&&xo(n)}else c[0]!="stop"&&c[0]!="close"||kn(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?kn(n,7):Qu(n):c[0]!="noop"&&n.j&&n.j.wa(c),n.A=0)}}Is(4)}catch{}}function I0(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Ma(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Ku(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ma(t)||typeof t=="string")tf(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Ma(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=I0(t),s=r.length;for(var i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}}function Dr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Dr)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}R=Dr.prototype;R.R=function(){Wu(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};R.T=function(){return Wu(this),this.g.concat()};function Wu(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Ln(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],Ln(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}R.get=function(t,e){return Ln(this.h,t)?this.h[t]:e};R.set=function(t,e){Ln(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};R.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);t.call(e,i,s,this)}};function Ln(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Df=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function x0(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Fn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Fn){this.g=e!==void 0?e:t.g,Oi(this,t.j),this.s=t.s,Pi(this,t.i),Ri(this,t.m),this.l=t.l,e=t.h;var n=new xs;n.i=e.i,e.g&&(n.g=new Dr(e.g),n.h=e.h),Dl(this,n),this.o=t.o}else t&&(n=String(t).match(Df))?(this.g=!!e,Oi(this,n[1]||"",!0),this.s=is(n[2]||""),Pi(this,n[3]||"",!0),Ri(this,n[4]),this.l=is(n[5]||"",!0),Dl(this,n[6]||"",!0),this.o=is(n[7]||"")):(this.g=!!e,this.h=new xs(null,this.g))}Fn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Xr(e,Al,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Xr(e,Al,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Xr(n,n.charAt(0)=="/"?A0:D0,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Xr(n,N0)),t.join("")};function Ut(t){return new Fn(t)}function Oi(t,e,n){t.j=n?is(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Pi(t,e,n){t.i=n?is(e,!0):e}function Ri(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Dl(t,e,n){e instanceof xs?(t.h=e,M0(t.h,t.g)):(n||(e=Xr(e,k0)),t.h=new xs(e,t.g))}function we(t,e,n){t.h.set(e,n)}function bo(t){return we(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function C0(t){return t instanceof Fn?Ut(t):new Fn(t,void 0)}function _0(t,e,n,r){var s=new Fn(null,void 0);return t&&Oi(s,t),e&&Pi(s,e),n&&Ri(s,n),r&&(s.l=r),s}function is(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xr(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,S0),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function S0(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Al=/[#\/\?@]/g,D0=/[#\?:]/g,A0=/[#\?]/g,k0=/[#\?@]/g,N0=/#/g;function xs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function mn(t){t.g||(t.g=new Dr,t.h=0,t.i&&x0(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}R=xs.prototype;R.add=function(t,e){mn(this),this.i=null,t=Ar(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Af(t,e){mn(t),e=Ar(t,e),Ln(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Ln(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Wu(t)))}function kf(t,e){return mn(t),e=Ar(t,e),Ln(t.g.h,e)}R.forEach=function(t,e){mn(this),this.g.forEach(function(n,r){tf(n,function(s){t.call(e,s,r,this)},this)},this)};R.T=function(){mn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],i=0;i<s.length;i++)n.push(e[r]);return n};R.R=function(t){mn(this);var e=[];if(typeof t=="string")kf(this,t)&&(e=wl(e,this.g.get(Ar(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=wl(e,t[n])}return e};R.set=function(t,e){return mn(this),this.i=null,t=Ar(this,t),kf(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};R.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Nf(t,e,n){Af(t,e),0<n.length&&(t.i=null,t.g.set(Ar(t,e),ku(n)),t.h+=n.length)}R.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;r[i]!==""&&(o+="="+encodeURIComponent(String(r[i]))),t.push(o)}}return this.i=t.join("&")};function Ar(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function M0(t,e){e&&!t.j&&(mn(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Af(this,r),Nf(this,s,n))},t)),t.j=e}var O0=class{constructor(t,e){this.h=t,this.g=e}};function Mf(t){this.l=t||P0,H.PerformanceNavigationTiming?(t=H.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(H.g&&H.g.Ea&&H.g.Ea()&&H.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var P0=10;function Of(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Pf(t){return t.h?1:t.g?t.g.size:0}function ja(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Hu(t,e){t.g?t.g.add(e):t.h=e}function Rf(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Mf.prototype.cancel=function(){if(this.i=Lf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Lf(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return ku(t.i)}function Gu(){}Gu.prototype.stringify=function(t){return H.JSON.stringify(t,void 0)};Gu.prototype.parse=function(t){return H.JSON.parse(t,void 0)};function R0(){this.g=new Gu}function L0(t,e,n){const r=n||"";try{Ku(t,function(s,i){let o=s;Ps(s)&&(o=Fu(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function F0(t,e){const n=new mo;if(H.Image){const r=new Image;r.onload=Zs(ti,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Zs(ti,n,r,"TestLoadImage: error",!1,e),r.onabort=Zs(ti,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zs(ti,n,r,"TestLoadImage: timeout",!1,e),H.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ti(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Us(t){this.l=t.$b||null,this.j=t.ib||!1}$e(Us,$u);Us.prototype.g=function(){return new Eo(this.l,this.j)};Us.prototype.i=function(t){return function(){return t}}({});function Eo(t,e){Me.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=zu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$e(Eo,Me);var zu=0;R=Eo.prototype;R.open=function(t,e){if(this.readyState!=zu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cs(this)};R.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||H).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=zu};R.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof H.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ff(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function Ff(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}R.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?$s(this):Cs(this),this.readyState==3&&Ff(this)}};R.Ua=function(t){this.g&&(this.response=this.responseText=t,$s(this))};R.Ta=function(t){this.g&&(this.response=t,$s(this))};R.ha=function(){this.g&&$s(this)};function $s(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cs(t)}R.setRequestHeader=function(t,e){this.v.append(t,e)};R.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};R.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var B0=H.JSON.parse;function Se(t){Me.call(this),this.headers=new Dr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bf,this.K=this.L=!1}$e(Se,Me);var Bf="",V0=/^https?$/i,U0=["POST","PUT"];R=Se.prototype;R.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Va.g(),this.C=this.u?Sl(this.u):Sl(Va),this.g.onreadystatechange=Ve(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){kl(this,i);return}t=n||"";const s=new Dr(this.headers);r&&Ku(r,function(i,o){s.set(o,i)}),r=Xw(s.T()),n=H.FormData&&t instanceof H.FormData,!(0<=ef(U0,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(i,o){this.g.setRequestHeader(o,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$f(this),0<this.B&&((this.K=$0(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ve(this.pa,this)):this.A=Uu(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){kl(this,i)}};function $0(t){return wr&&n0()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function q0(t){return t.toLowerCase()=="content-type"}R.pa=function(){typeof Au!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))};function kl(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Vf(t),To(t)}function Vf(t){t.D||(t.D=!0,Ue(t,"complete"),Ue(t,"error"))}R.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),To(this))};R.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),To(this,!0)),Se.Z.M.call(this)};R.Fa=function(){this.s||(this.F||this.v||this.l?Uf(this):this.cb())};R.cb=function(){Uf(this)};function Uf(t){if(t.h&&typeof Au!="undefined"&&(!t.C[1]||Lt(t)!=4||t.ba()!=2)){if(t.v&&Lt(t)==4)Uu(t.Fa,0,t);else if(Ue(t,"readystatechange"),Lt(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(Df)[1]||null;if(!s&&H.self&&H.self.location){var i=H.self.location.protocol;s=i.substr(0,i.length-1)}r=!V0.test(s?s.toLowerCase():"")}n=r}if(n)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var o=2<Lt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",Vf(t)}}finally{To(t)}}}}function To(t,e){if(t.g){$f(t);const n=t.g,r=t.C[0]?Ai:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=r}catch{}}}function $f(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(H.clearTimeout(t.A),t.A=null)}function Lt(t){return t.g?t.g.readyState:0}R.ba=function(){try{return 2<Lt(this)?this.g.status:-1}catch{return-1}};R.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};R.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),B0(e)}};function Nl(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Bf:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}R.Da=function(){return this.m};R.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function j0(t){let e="";return Nu(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Yu(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=j0(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):we(t,e,n))}function Vr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qf(t){this.za=0,this.l=[],this.h=new mo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vr("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vr("baseRetryDelayMs",5e3,t),this.$a=Vr("retryDelaySeedMs",1e4,t),this.Ya=Vr("forwardChannelMaxRetries",2,t),this.ra=Vr("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Mf(t&&t.concurrentRequestLimit),this.Ca=new R0,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}R=qf.prototype;R.ma=8;R.G=1;function Qu(t){if(jf(t),t.G==3){var e=t.V++,n=Ut(t.F);we(n,"SID",t.J),we(n,"RID",e),we(n,"TYPE","terminate"),qs(t,n),e=new Bs(t,t.h,e,void 0),e.K=2,e.v=bo(Ut(n)),n=!1,H.navigator&&H.navigator.sendBeacon&&(n=H.navigator.sendBeacon(e.v.toString(),"")),!n&&H.Image&&(new Image().src=e.v,n=!0),n||(e.g=Xf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Vs(e)}Yf(t)}R.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Io(t){t.g&&(Ju(t),t.g.cancel(),t.g=null)}function jf(t){Io(t),t.u&&(H.clearTimeout(t.u),t.u=null),Li(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&H.clearTimeout(t.m),t.m=null)}function oa(t,e){t.l.push(new O0(t.Za++,e)),t.G==3&&xo(t)}function xo(t){Of(t.i)||t.m||(t.m=!0,Bu(t.Ha,t),t.C=0)}function K0(t,e){return Pf(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Ls(Ve(t.Ha,t,e),zf(t,t.C)),t.C++,!0)}R.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new Bs(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=nf(i),rf(i,this.P)):i=this.P),this.o===null&&(s.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Kf(this,s,e),n=Ut(this.F),we(n,"RID",t),we(n,"CVER",22),this.D&&we(n,"X-HTTP-Session-Id",this.D),qs(this,n),this.o&&i&&Yu(n,this.o,i),Hu(this.i,s),this.Ra&&we(n,"TYPE","init"),this.ja?(we(n,"$req",e),we(n,"SID","null"),s.$=!0,$a(s,n,null)):$a(s,n,e),this.G=2}}else this.G==3&&(t?Ml(this,t):this.l.length==0||Of(this.i)||Ml(this))};function Ml(t,e){var n;e?n=e.m:n=t.V++;const r=Ut(t.F);we(r,"SID",t.J),we(r,"RID",n),we(r,"AID",t.U),qs(t,r),t.o&&t.s&&Yu(r,t.o,t.s),n=new Bs(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Kf(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Hu(t.i,n),$a(n,r,e)}function qs(t,e){t.j&&Ku({},function(n,r){we(e,r,n)})}function Kf(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ve(t.j.Oa,t.j,t):null;e:{var s=t.l;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let u=0;u<n;u++){let c=s[u].h;const l=s[u].g;if(c-=i,0>c)i=Math.max(0,s[u].h-100),a=!1;else try{L0(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function Wf(t){t.g||t.u||(t.Y=1,Bu(t.Ga,t),t.A=0)}function Xu(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Ls(Ve(t.Ga,t),zf(t,t.A)),t.A++,!0)}R.Ga=function(){if(this.u=null,Hf(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ls(Ve(this.bb,this),t)}};R.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xe(10),Io(this),Hf(this))};function Ju(t){t.B!=null&&(H.clearTimeout(t.B),t.B=null)}function Hf(t){t.g=new Bs(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Ut(t.oa);we(e,"RID","rpc"),we(e,"SID",t.J),we(e,"CI",t.N?"0":"1"),we(e,"AID",t.U),qs(t,e),we(e,"TYPE","xmlhttp"),t.o&&t.s&&Yu(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=bo(Ut(e)),n.s=null,n.U=!0,xf(n,t)}R.ab=function(){this.v!=null&&(this.v=null,Io(this),Xu(this),Xe(19))};function Li(t){t.v!=null&&(H.clearTimeout(t.v),t.v=null)}function Gf(t,e){var n=null;if(t.g==e){Li(t),Ju(t),t.g=null;var r=2}else if(ja(t.i,e))n=e.D,Rf(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=po(),Ue(r,new bf(r,n,e,s)),xo(t)}else Wf(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&K0(t,e)||r==2&&Xu(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:kn(t,5);break;case 4:kn(t,10);break;case 3:kn(t,6);break;default:kn(t,2)}}}function zf(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function kn(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=Ve(t.jb,t);n||(n=new Fn("//www.google.com/images/cleardot.gif"),H.location&&H.location.protocol=="http"||Oi(n,"https"),bo(n)),F0(n.toString(),r)}else Xe(2);t.G=0,t.j&&t.j.va(e),Yf(t),jf(t)}R.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Xe(2)):(this.h.info("Failed to ping google.com"),Xe(1))};function Yf(t){t.G=0,t.I=-1,t.j&&((Lf(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,ku(t.l),t.l.length=0),t.j.ua())}function Qf(t,e,n){let r=C0(n);if(r.i!="")e&&Pi(r,e+"."+r.i),Ri(r,r.m);else{const s=H.location;r=_0(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&Nu(t.aa,function(s,i){we(r,i,s)}),e=t.D,n=t.sa,e&&n&&we(r,e,n),we(r,"VER",t.ma),qs(t,r),r}function Xf(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Se(new Us({ib:!0})):new Se(t.qa),e.L=t.H,e}function Jf(){}R=Jf.prototype;R.xa=function(){};R.wa=function(){};R.va=function(){};R.ua=function(){};R.Oa=function(){};function Fi(){if(wr&&!(10<=Number(r0)))throw Error("Environmental error: no available transport.")}Fi.prototype.g=function(t,e){return new ft(t,e)};function ft(t,e){Me.call(this),this.g=new qf(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ki(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ki(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new kr(this)}$e(ft,Me);ft.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Bu(Ve(t.hb,t,e))),Xe(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Qf(t,null,t.W),xo(t)};ft.prototype.close=function(){Qu(this.g)};ft.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,oa(this.g,e)}else this.v?(e={},e.__data__=Fu(t),oa(this.g,e)):oa(this.g,t)};ft.prototype.M=function(){this.g.j=null,delete this.j,Qu(this.g),delete this.g,ft.Z.M.call(this)};function Zf(t){qu.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}$e(Zf,qu);function eg(){ju.call(this),this.status=1}$e(eg,ju);function kr(t){this.g=t}$e(kr,Jf);kr.prototype.xa=function(){Ue(this.g,"a")};kr.prototype.wa=function(t){Ue(this.g,new Zf(t))};kr.prototype.va=function(t){Ue(this.g,new eg(t))};kr.prototype.ua=function(){Ue(this.g,"b")};Fi.prototype.createWebChannel=Fi.prototype.g;ft.prototype.send=ft.prototype.u;ft.prototype.open=ft.prototype.m;ft.prototype.close=ft.prototype.close;yo.NO_ERROR=0;yo.TIMEOUT=8;yo.HTTP_ERROR=6;Ef.COMPLETE="complete";Tf.EventType=Fs;Fs.OPEN="a";Fs.CLOSE="b";Fs.ERROR="c";Fs.MESSAGE="d";Me.prototype.listen=Me.prototype.N;Se.prototype.listenOnce=Se.prototype.O;Se.prototype.getLastError=Se.prototype.La;Se.prototype.getLastErrorCode=Se.prototype.Da;Se.prototype.getStatus=Se.prototype.ba;Se.prototype.getResponseJson=Se.prototype.Qa;Se.prototype.getResponseText=Se.prototype.ga;Se.prototype.send=Se.prototype.ea;var W0=function(){return new Fi},H0=function(){return po()},aa=yo,G0=Ef,z0=Hn,Ol={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Y0=Us,ni=Tf,Q0=Se;const Pl="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nr="9.6.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Qd("@firebase/firestore");function Ka(){return Bn.logLevel}function C(t,...e){if(Bn.logLevel<=ie.DEBUG){const n=e.map(Zu);Bn.debug(`Firestore (${Nr}): ${t}`,...n)}}function at(t,...e){if(Bn.logLevel<=ie.ERROR){const n=e.map(Zu);Bn.error(`Firestore (${Nr}): ${t}`,...n)}}function Rl(t,...e){if(Bn.logLevel<=ie.WARN){const n=e.map(Zu);Bn.warn(`Firestore (${Nr}): ${t}`,...n)}}function Zu(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t="Unexpected state"){const e=`FIRESTORE (${Nr}) INTERNAL ASSERTION FAILED: `+t;throw at(e),new Error(e)}function Q(t,e){t||B()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends lo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class Z0{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bt,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new X0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new st(e)}}class eb{constructor(e,n,r){this.type="FirstParty",this.user=st.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class tb{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new eb(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rb{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=i=>{i.error!=null&&C("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.p;return this.p=i.token,C("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?s(i):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q(typeof n.token=="string"),this.p=n.token,new nb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.I(r),this.T=r=>n.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Et.A=-1;class ib{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=sb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Z(t,e){return t<e?-1:t>e?1:0}function br(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function tg(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new Je(0,0))}static max(){return new j(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ob(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(),r===void 0?r=e.length-n:r>e.length-n&&B(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _s.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _s?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class de extends _s{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new F(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const ab=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends _s{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return ab.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new F(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new F(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new F(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.fields=e,e.sort(Ye.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return br(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Oe(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new Oe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Oe.EMPTY_BYTE_STRING=new Oe("");const cb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ln(t){if(Q(!!t),typeof t=="string"){let e=0;const n=cb.exec(t);if(Q(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vn(t){return typeof t=="string"?Oe.fromBase64String(t):Oe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rg(t){const e=t.mapValue.fields.__previous_value__;return ng(e)?rg(e):e}function Ss(t){const e=ln(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r,s,i,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class hn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new hn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t){return t==null}function Bi(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.path=e}static fromPath(e){return new O(de.fromString(e))}static fromName(e){return new O(de.fromString(e).popFirst(5))}static empty(){return new O(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new O(new de(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ig={nullValue:"NULL_VALUE"};function Un(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ng(t)?4:og(t)?9:10:B()}function kt(t,e){if(t===e)return!0;const n=Un(t);if(n!==Un(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ss(t).isEqual(Ss(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=ln(r.timestampValue),o=ln(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Vn(r.bytesValue).isEqual(Vn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Te(r.geoPointValue.latitude)===Te(s.geoPointValue.latitude)&&Te(r.geoPointValue.longitude)===Te(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Te(r.integerValue)===Te(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=Te(r.doubleValue),o=Te(s.doubleValue);return i===o?Bi(i)===Bi(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return br(t.arrayValue.values||[],e.arrayValue.values||[],kt);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Ll(i)!==Ll(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!kt(i[a],o[a])))return!1;return!0}(t,e);default:return B()}}function Ds(t,e){return(t.values||[]).find(n=>kt(n,e))!==void 0}function dn(t,e){if(t===e)return 0;const n=Un(t),r=Un(e);if(n!==r)return Z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=Te(s.integerValue||s.doubleValue),a=Te(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Fl(t.timestampValue,e.timestampValue);case 4:return Fl(Ss(t),Ss(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Vn(s),a=Vn(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=Z(o[u],a[u]);if(c!==0)return c}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Z(Te(s.latitude),Te(i.latitude));return o!==0?o:Z(Te(s.longitude),Te(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=dn(o[u],a[u]);if(c)return c}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){const o=s.fields||{},a=Object.keys(o),u=i.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const h=Z(a[l],c[l]);if(h!==0)return h;const d=dn(o[a[l]],u[c[l]]);if(d!==0)return d}return Z(a.length,c.length)}(t.mapValue,e.mapValue);default:throw B()}}function Fl(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);const n=ln(t),r=ln(e),s=Z(n.seconds,r.seconds);return s!==0?s:Z(n.nanos,r.nanos)}function mr(t){return Wa(t)}function Wa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=ln(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,O.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=Wa(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${Wa(r.fields[a])}`;return i+"}"}(t.mapValue):B();var e,n}function ec(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ha(t){return!!t&&"integerValue"in t}function As(t){return!!t&&"arrayValue"in t}function Bl(t){return!!t&&"nullValue"in t}function Vl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ua(t){return!!t&&"mapValue"in t}function os(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=os(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=os(t.arrayValue.values[n]);return e}return Object.assign({},t)}function og(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function hb(t){return"nullValue"in t?ig:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ec(hn.empty(),O.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:B()}function db(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ec(hn.empty(),O.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?sg:B()}function Ul(t,e){return t===void 0?e:e===void 0||dn(t,e)>0?t:e}function $l(t,e){return t===void 0?e:e===void 0||dn(t,e)<0?t:e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ua(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=os(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=os(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ua(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ua(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bt(os(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n,r,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ie(e,0,j.min(),j.min(),bt.empty(),0)}static newFoundDocument(e,n,r){return new Ie(e,1,n,j.min(),r,0)}static newNoDocument(e,n){return new Ie(e,2,n,j.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Ie(e,3,n,j.min(),bt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ie(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ag{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Ga(t){return t.fields.find(e=>e.kind===2)}function In(t){return t.fields.filter(e=>e.kind!==2)}ag.UNKNOWN_ID=-1;class fb{constructor(e,n){this.fieldPath=e,this.kind=n}}class Vi{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Vi(0,$t.min())}}function gb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=j.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new $t(s,O.empty(),e)}function mb(t){return new $t(t.readTime,t.key,-1)}class $t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $t(j.min(),O.empty(),-1)}static max(){return new $t(j.max(),O.empty(),-1)}}function pb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=O.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.P=null}}function ql(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yb(t,e,n,r,s,i,o)}function $n(t){const e=J(t);if(e.P===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+mr(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Mr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mr(r)).join(",")),e.P=n}return e.P}function vb(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${mr(r.value)}`;var r}).join(", ")}]`),Mr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>mr(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>mr(n)).join(",")),`Target(${e})`}function js(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!_b(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!kt(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hl(t.startAt,e.startAt)&&Hl(t.endAt,e.endAt)}function Ui(t){return O.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $i(t,e){return t.filters.filter(n=>n instanceof qe&&n.field.isEqual(e))}function jl(t,e,n){let r,s=!0;for(const i of $i(t,e)){let o,a=!0;switch(i.op){case"<":case"<=":o=hb(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=ig}Ul(r,o)===o&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Ul(r,o)===o&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Kl(t,e,n){let r,s=!0;for(const i of $i(t,e)){let o,a=!0;switch(i.op){case">=":case">":o=db(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=sg}$l(r,o)===o&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];$l(r,o)===o&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class qe extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.V(e,n,r):new wb(e,n,r):n==="array-contains"?new Tb(e,r):n==="in"?new Ib(e,r):n==="not-in"?new xb(e,r):n==="array-contains-any"?new Cb(e,r):new qe(e,n,r)}static V(e,n,r){return n==="in"?new bb(e,r):new Eb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.v(dn(n,this.value)):n!==null&&Un(this.value)===Un(n)&&this.v(dn(n,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wb extends qe{constructor(e,n,r){super(e,n,r),this.key=O.fromName(r.referenceValue)}matches(e){const n=O.comparator(e.key,this.key);return this.v(n)}}class bb extends qe{constructor(e,n){super(e,"in",n),this.keys=ug("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Eb extends qe{constructor(e,n){super(e,"not-in",n),this.keys=ug("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ug(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>O.fromName(r.referenceValue))}class Tb extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return As(n)&&Ds(n.arrayValue,this.value)}}class Ib extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ds(this.value.arrayValue,n)}}class xb extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ds(this.value.arrayValue,n)}}class Cb extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!As(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ds(this.value.arrayValue,r))}}class Er{constructor(e,n){this.position=e,this.inclusive=n}}class as{constructor(e,n="asc"){this.field=e,this.dir=n}}function _b(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wl(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=O.comparator(O.fromName(o.referenceValue),n.key):r=dn(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hl(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}}function Sb(t,e,n,r,s,i,o,a){return new _o(t,e,n,r,s,i,o,a)}function tc(t){return new _o(t)}function mi(t){return!Mr(t.limit)&&t.limitType==="F"}function qi(t){return!Mr(t.limit)&&t.limitType==="L"}function Db(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ab(t){for(const e of t.filters)if(e.S())return e.field;return null}function kb(t){return t.collectionGroup!==null}function ks(t){const e=J(t);if(e.D===null){e.D=[];const n=Ab(e),r=Db(e);if(n!==null&&r===null)n.isKeyField()||e.D.push(new as(n)),e.D.push(new as(Ye.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.D.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new as(Ye.keyField(),i))}}}return e.D}function qt(t){const e=J(t);if(!e.C)if(e.limitType==="F")e.C=ql(e.path,e.collectionGroup,ks(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of ks(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new as(i.field,o))}const r=e.endAt?new Er(e.endAt.position,!e.endAt.inclusive):null,s=e.startAt?new Er(e.startAt.position,!e.startAt.inclusive):null;e.C=ql(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.C}function Nb(t,e,n){return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function So(t,e){return js(qt(t),qt(e))&&t.limitType===e.limitType}function cg(t){return`${$n(qt(t))}|lt:${t.limitType}`}function za(t){return`Query(target=${vb(qt(t))}; limitType=${t.limitType})`}function nc(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):O.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=Wl(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,ks(n),r)||n.endAt&&!function(s,i,o){const a=Wl(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,ks(n),r))}(t,e)}function Mb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lg(t){return(e,n)=>{let r=!1;for(const s of ks(t)){const i=Ob(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Ob(t,e,n){const r=t.field.isKeyField()?O.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),u=o.data.field(s);return a!==null&&u!==null?dn(a,u):B()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bi(e)?"-0":e}}function Rb(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this._=void 0}}function Lb(t,e,n){return t instanceof Ns?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Tr?hg(t,e):t instanceof Ir?dg(t,e):function(r,s){const i=Bb(r,s),o=Gl(i)+Gl(r.k);return Ha(i)&&Ha(r.k)?Rb(o):Pb(r.M,o)}(t,e)}function Fb(t,e,n){return t instanceof Tr?hg(t,e):t instanceof Ir?dg(t,e):n}function Bb(t,e){return t instanceof Ms?Ha(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Ns extends Do{}class Tr extends Do{constructor(e){super(),this.elements=e}}function hg(t,e){const n=fg(e);for(const r of t.elements)n.some(s=>kt(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ir extends Do{constructor(e){super(),this.elements=e}}function dg(t,e){let n=fg(e);for(const r of t.elements)n=n.filter(s=>!kt(s,r));return{arrayValue:{values:n}}}class Ms extends Do{constructor(e,n){super(),this.M=e,this.k=n}}function Gl(t){return Te(t.integerValue||t.doubleValue)}function fg(t){return As(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.field=e,this.transform=n}}function Ub(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Tr&&r instanceof Tr||n instanceof Ir&&r instanceof Ir?br(n.elements,r.elements,kt):n instanceof Ms&&r instanceof Ms?kt(n.k,r.k):n instanceof Ns&&r instanceof Ns}(t.transform,e.transform)}class $b{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pi(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ao{}function qb(t,e,n){t instanceof ko?function(r,s,i){const o=r.value.clone(),a=Ql(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof No?function(r,s,i){if(!pi(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=Ql(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(gg(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Ya(t,e,n){t instanceof ko?function(r,s,i){if(!pi(r.precondition,s))return;const o=r.value.clone(),a=Xl(r.fieldTransforms,i,s);o.setAll(a),s.convertToFoundDocument(Yl(s),o).setHasLocalMutations()}(t,e,n):t instanceof No?function(r,s,i){if(!pi(r.precondition,s))return;const o=Xl(r.fieldTransforms,i,s),a=s.data;a.setAll(gg(r)),a.setAll(o),s.convertToFoundDocument(Yl(s),a).setHasLocalMutations()}(t,e,n):function(r,s){pi(r.precondition,s)&&s.convertToNoDocument(j.min())}(t,e)}function zl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&br(n,r,(s,i)=>Ub(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Yl(t){return t.isFoundDocument()?t.version:j.min()}class ko extends Ao{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}}class No extends Ao{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}}function gg(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ql(t,e,n){const r=new Map;Q(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Fb(o,a,n[s]))}return r}function Xl(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Lb(i,o,e))}return r}class mg extends Ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class pg extends Ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe,ne;function Kb(t){switch(t){default:return B();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function yg(t){if(t===void 0)return at("GRPC error has no .code"),E.UNKNOWN;switch(t){case xe.OK:return E.OK;case xe.CANCELLED:return E.CANCELLED;case xe.UNKNOWN:return E.UNKNOWN;case xe.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case xe.INTERNAL:return E.INTERNAL;case xe.UNAVAILABLE:return E.UNAVAILABLE;case xe.UNAUTHENTICATED:return E.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case xe.NOT_FOUND:return E.NOT_FOUND;case xe.ALREADY_EXISTS:return E.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return E.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case xe.ABORTED:return E.ABORTED;case xe.OUT_OF_RANGE:return E.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return E.UNIMPLEMENTED;case xe.DATA_LOSS:return E.DATA_LOSS;default:return B()}}(ne=xe||(xe={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ob(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||Fe.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ri(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ri(this.root,e,this.comparator,!1)}getReverseIterator(){return new ri(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ri(this.root,e,this.comparator,!0)}}class ri{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:Fe.RED,this.left=s!=null?s:Fe.EMPTY,this.right=i!=null?i:Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Fe(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Fe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Fe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jl(this.data.getIterator())}getIteratorFrom(e){return new Jl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ye(this.comparator);return n.data=e,n}}class Jl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zn(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new Pe(O.comparator);function Tt(){return Wb}const Hb=new Pe(O.comparator);function Qa(){return Hb}function us(){return new pn(t=>t.toString(),(t,e)=>t.isEqual(e))}const Gb=new Pe(O.comparator),zb=new ye(O.comparator);function ge(...t){let e=zb;for(const n of t)e=e.add(n);return e}const Yb=new ye(Z);function vg(){return Yb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Ks.createSynthesizedTargetChangeForCurrentChange(e,n)),new Mo(j.min(),r,vg(),Tt(),ge())}}class Ks{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Ks(Oe.EMPTY_BYTE_STRING,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r,s){this.O=e,this.removedTargetIds=n,this.key=r,this.F=s}}class wg{constructor(e,n){this.targetId=e,this.$=n}}class bg{constructor(e,n,r=Oe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Zl{constructor(){this.B=0,this.L=th(),this.U=Oe.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return this.B!==0}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=ge(),n=ge(),r=ge();return this.L.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:B()}}),new Ks(this.U,this.q,e,n,r)}J(){this.K=!1,this.L=th()}Y(e,n){this.K=!0,this.L=this.L.insert(e,n)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Qb{constructor(e){this.nt=e,this.st=new Map,this.it=Tt(),this.rt=eh(),this.ot=new ye(Z)}ut(e){for(const n of e.O)e.F&&e.F.isFoundDocument()?this.at(n,e.F):this.ct(n,e.key,e.F);for(const n of e.removedTargetIds)this.ct(n,e.key,e.F)}ht(e){this.forEachTarget(e,n=>{const r=this.lt(n);switch(e.state){case 0:this.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(n);break;case 3:this.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),r.W(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.st.forEach((r,s)=>{this.ft(s)&&n(s)})}_t(e){const n=e.targetId,r=e.$.count,s=this.wt(n);if(s){const i=s.target;if(Ui(i))if(r===0){const o=new O(i.path);this.ct(n,o,Ie.newNoDocument(o,j.min()))}else Q(r===1);else this.gt(n)!==r&&(this.dt(n),this.ot=this.ot.add(n))}}yt(e){const n=new Map;this.st.forEach((i,o)=>{const a=this.wt(o);if(a){if(i.current&&Ui(a.target)){const u=new O(a.target.path);this.it.get(u)!==null||this.It(o,u)||this.ct(o,u,Ie.newNoDocument(u,e))}i.j&&(n.set(o,i.H()),i.J())}});let r=ge();this.rt.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.wt(u);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.it.forEach((i,o)=>o.setReadTime(e));const s=new Mo(e,n,this.ot,this.it,r);return this.it=Tt(),this.rt=eh(),this.ot=new ye(Z),s}at(e,n){if(!this.ft(e))return;const r=this.It(e,n.key)?2:0;this.lt(e).Y(n.key,r),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Tt(n.key).add(e))}ct(e,n,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,n)?s.Y(n,1):s.X(n),this.rt=this.rt.insert(n,this.Tt(n).delete(e)),r&&(this.it=this.it.insert(n,r))}removeTarget(e){this.st.delete(e)}gt(e){const n=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let n=this.st.get(e);return n||(n=new Zl,this.st.set(e,n)),n}Tt(e){let n=this.rt.get(e);return n||(n=new ye(Z),this.rt=this.rt.insert(e,n)),n}ft(e){const n=this.wt(e)!==null;return n||C("WatchChangeAggregator","Detected inactive target",e),n}wt(e){const n=this.st.get(e);return n&&n.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Zl),this.nt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}It(e,n){return this.nt.getRemoteKeysForTarget(e).has(n)}}function eh(){return new Pe(O.comparator)}function th(){return new Pe(O.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Jb=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class Zb{constructor(e,n){this.databaseId=e,this.N=n}}function rc(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eE(t,e){return t.N?e.toBase64():e.toUint8Array()}function tE(t,e){return rc(t,e.toTimestamp())}function ht(t){return Q(!!t),j.fromTimestamp(function(e){const n=ln(e);return new Je(n.seconds,n.nanos)}(t))}function Eg(t,e){return function(n){return new de(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Tg(t){const e=de.fromString(t);return Q(Ag(e)),e}function ji(t,e){return Eg(t.databaseId,e.path)}function Mn(t,e){const n=Tg(e);if(n.get(1)!==t.databaseId.projectId)throw new F(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new O(xg(n))}function Xa(t,e){return Eg(t.databaseId,e)}function Ig(t){const e=Tg(t);return e.length===4?de.emptyPath():xg(e)}function Ja(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xg(t){return Q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nh(t,e,n){return{name:ji(t,e),fields:n.value.mapValue.fields}}function nE(t,e,n){const r=Mn(t,e.name),s=ht(e.updateTime),i=new bt({mapValue:{fields:e.fields}}),o=Ie.newFoundDocument(r,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function rE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,c){return u.N?(Q(c===void 0||typeof c=="string"),Oe.fromBase64String(c||"")):(Q(c===void 0||c instanceof Uint8Array),Oe.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?E.UNKNOWN:yg(u.code);return new F(c,u.message||"")}(o);n=new bg(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mn(t,r.document.name),i=ht(r.document.updateTime),o=new bt({mapValue:{fields:r.document.fields}}),a=Ie.newFoundDocument(s,i,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new yi(u,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Mn(t,r.document),i=r.readTime?ht(r.readTime):j.min(),o=Ie.newNoDocument(s,i),a=r.removedTargetIds||[];n=new yi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Mn(t,r.document),i=r.removedTargetIds||[];n=new yi([],i,s,null)}else{if(!("filter"in e))return B();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new jb(s),o=r.targetId;n=new wg(o,i)}}return n}function Ki(t,e){let n;if(e instanceof ko)n={update:nh(t,e.key,e.value)};else if(e instanceof mg)n={delete:ji(t,e.key)};else if(e instanceof No)n={update:nh(t,e.key,e.data),updateMask:lE(e.fieldMask)};else{if(!(e instanceof pg))return B();n={verify:ji(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Ns)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Tr)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ir)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ms)return{fieldPath:i.field.canonicalString(),increment:o.k};throw B()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:tE(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function Za(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Zt.updateTime(ht(s.updateTime)):s.exists!==void 0?Zt.exists(s.exists):Zt.none()}(e.currentDocument):Zt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)Q(o.setToServerValue==="REQUEST_TIME"),a=new Ns;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new Tr(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new Ir(c)}else"increment"in o?a=new Ms(i,o.increment):B();const u=Ye.fromServerFormat(o.fieldPath);return new Vb(u,a)}(t,s)):[];if(e.update){e.update.name;const s=Mn(t,e.update.name),i=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const u=a.fieldPaths||[];return new ub(u.map(c=>Ye.fromServerFormat(c)))}(e.updateMask);return new No(s,i,o,n,r)}return new ko(s,i,n,r)}if(e.delete){const s=Mn(t,e.delete);return new mg(s,n)}if(e.verify){const s=Mn(t,e.verify);return new pg(s,n)}return B()}function sE(t,e){return t&&t.length>0?(Q(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?ht(r.updateTime):ht(s);return i.isEqual(j.min())&&(i=ht(s)),new $b(i,r.transformResults||[])}(n,e))):[]}function Cg(t,e){return{documents:[Xa(t,e.path)]}}function _g(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Xa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Xa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(u){if(u.length===0)return;const c=u.map(l=>function(h){if(h.op==="=="){if(Vl(h.value))return{unaryFilter:{field:er(h.field),op:"IS_NAN"}};if(Bl(h.value))return{unaryFilter:{field:er(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(Vl(h.value))return{unaryFilter:{field:er(h.field),op:"IS_NOT_NAN"}};if(Bl(h.value))return{unaryFilter:{field:er(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:er(h.field),op:aE(h.op),value:h.value}}}(l));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(c=>function(l){return{field:er(l.field),direction:oE(l.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(u,c){return u.N||Mr(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function Sg(t){let e=Ig(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Q(r===1);const l=n.from[0];l.allDescendants?s=l.collectionId:e=e.child(l.collectionId)}let i=[];n.where&&(i=Dg(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>function(h){return new as(cr(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(l)));let a=null;n.limit&&(a=function(l){let h;return h=typeof l=="object"?l.value:l,Mr(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(l){const h=!!l.before,d=l.values||[];return new Er(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(l){const h=!l.before,d=l.values||[];return new Er(d,h)}(n.endAt)),Sb(e,s,o,i,a,"F",u,c)}function iE(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return B()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dg(t){return t?t.unaryFilter!==void 0?[cE(t)]:t.fieldFilter!==void 0?[uE(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Dg(e)).reduce((e,n)=>e.concat(n)):B():[]}function oE(t){return Xb[t]}function aE(t){return Jb[t]}function er(t){return{fieldPath:t.canonicalString()}}function cr(t){return Ye.fromServerFormat(t.fieldPath)}function uE(t){return qe.create(cr(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(t.fieldFilter.op),t.fieldFilter.value)}function cE(t){switch(t.unaryFilter.op){case"IS_NAN":const e=cr(t.unaryFilter.field);return qe.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=cr(t.unaryFilter.field);return qe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cr(t.unaryFilter.field);return qe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=cr(t.unaryFilter.field);return qe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return B()}}function lE(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ag(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rh(e)),e=hE(t.get(n),e);return rh(e)}function hE(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function rh(t){return t+""}function At(t){const e=t.length;if(Q(e>=2),e===2)return Q(t.charAt(0)===""&&t.charAt(1)===""),de.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&B(),t.charAt(o+1)){case"":const a=t.substring(i,o);let u;s.length===0?u=a:(s+=a,u=s,s=""),r.push(u);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:B()}i=o+2}return new de(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e){return[t,Ze(e)]}function kg(t,e,n){return[t,Ze(e),n]}const dE={},fE=["prefixPath","collectionGroup","readTime","documentId"],gE=["prefixPath","collectionGroup","documentId"],mE=["collectionGroup","readTime","prefixPath","documentId"],pE=["canonicalId","targetId"],yE=["targetId","path"],vE=["path","targetId"],wE=["collectionId","parent"],bE=["indexId","uid"],EE=["uid","sequenceNumber"],TE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],IE=["indexId","uid","orderedDocumentKey"],xE=["userId","collectionPath","documentId"],CE=["userId","collectionPath","largestBatchId"],_E=["userId","collectionGroup","largestBatchId"],Ng=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SE=[...Ng,"documentOverlays"],Mg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],DE=[...Mg,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new p((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof p?n:p.resolve(n)}catch(n){return p.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):p.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):p.reject(n)}static resolve(e){return new p((n,r)=>{n(e)})}static reject(e){return new p((n,r)=>{r(e)})}static waitFor(e){return new p((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=p.resolve(!1);for(const r of e)n=n.next(s=>s?p.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.At=new Bt,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{n.error?this.At.reject(new cs(e,n.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=sc(r.target.error);this.At.reject(new cs(e,s))}}static open(e,n,r,s){try{return new Oo(n,e.transaction(s,r))}catch(i){throw new cs(n,i)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(C("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new kE(n)}}class Ft{constructor(e,n,r){this.name=e,this.version=n,this.bt=r,Ft.Vt(Pn())===12.2&&at("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return C("SimpleDb","Removing database:",e),_n(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!Hd())return!1;if(Ft.St())return!0;const e=Pn(),n=Ft.Vt(e),r=0<n&&n<10,s=Ft.Dt(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static St(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.Ct)==="YES"}static xt(e,n){return e.store(n)}static Vt(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async Nt(e){return this.db||(C("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new cs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new F(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new F(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new cs(e,o))},s.onupgradeneeded=i=>{C("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.bt.kt(o,s.transaction,i.oldVersion,this.version).next(()=>{C("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.Mt&&(this.db.onversionchange=n=>this.Mt(n)),this.db}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.Nt(e);const a=Oo.open(this.db,e,i?"readonly":"readwrite",r),u=s(a).next(c=>(a.Pt(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),await a.Rt,u}catch(a){const u=a.name!=="FirebaseError"&&o<3;if(C("SimpleDb","Transaction failed with error:",a.message,"Retrying:",u),this.close(),!u)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}class AE{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return _n(this.Ft.delete())}}class cs extends F{constructor(e,n){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Gn(t){return t.name==="IndexedDbTransactionError"}class kE{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(C("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(C("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_n(r)}add(e){return C("SimpleDb","ADD",this.store.name,e,e),_n(this.store.add(e))}get(e){return _n(this.store.get(e)).next(n=>(n===void 0&&(n=null),C("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return C("SimpleDb","DELETE",this.store.name,e),_n(this.store.delete(e))}count(){return C("SimpleDb","COUNT",this.store.name),_n(this.store.count())}qt(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.Kt(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new p((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}Gt(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new p((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Qt(e,n){C("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.jt=!1;const s=this.cursor(r);return this.Kt(s,(i,o,a)=>a.delete())}Wt(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.Kt(s,n)}zt(e){const n=this.cursor({});return new p((r,s)=>{n.onerror=i=>{const o=sc(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}Kt(e,n){const r=[];return new p((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const u=new AE(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){const l=c.catch(h=>(u.done(),p.reject(h)));r.push(l)}u.isDone?s():u.Lt===null?a.continue():a.continue(u.Lt)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _n(t){return new p((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=sc(r.target.error);n(s)}})}let ih=!1;function sc(t){const e=Ft.Vt(Pn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ih||(ih=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends Pg{constructor(e,n){super(),this.Ht=e,this.currentSequenceNumber=n}}function Re(t,e){const n=J(t);return Ft.xt(n.Ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&qb(i,e,r[s])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&Ya(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&Ya(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const r=e.get(n.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(j.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&br(this.mutations,e.mutations,(n,r)=>zl(n,r))&&br(this.baseMutations,e.baseMutations,(n,r)=>zl(n,r))}}class oc{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Q(e.mutations.length===r.length);let s=Gb;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new oc(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r,s,i=j.min(),o=j.min(),a=Oe.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new sn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new sn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new sn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this.Jt=e}}function NE(t,e){let n;if(e.document)n=nE(t.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=O.fromSegments(e.noDocument.path),s=jn(e.noDocument.readTime);n=Ie.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return B();{const r=O.fromSegments(e.unknownDocument.path),s=jn(e.unknownDocument.version);n=Ie.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(r){const s=new Je(r[0],r[1]);return j.fromTimestamp(s)}(e.readTime)),n}function ah(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wi(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:ji(s,i.key),fields:i.data.value.mapValue.fields,updateTime:rc(s,i.version.toTimestamp())}}(t.Jt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:qn(e.version)};else{if(!e.isUnknownDocument())return B();r.unknownDocument={path:n.path.toArray(),version:qn(e.version)}}return r}function Wi(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qn(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jn(t){const e=new Je(t.seconds,t.nanoseconds);return j.fromTimestamp(e)}function or(t,e){const n=(e.baseMutations||[]).map(i=>Za(t.Jt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Za(t.Jt,i)),s=Je.fromMillis(e.localWriteTimeMs);return new ic(e.batchId,s,n,r)}function Jr(t){const e=jn(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?jn(t.lastLimboFreeSnapshotVersion):j.min();let r;var s;return t.query.documents!==void 0?(Q((s=t.query).documents.length===1),r=qt(tc(Ig(s.documents[0])))):r=function(i){return qt(Sg(i))}(t.query),new sn(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Oe.fromBase64String(t.resumeToken))}function Lg(t,e){const n=qn(e.snapshotVersion),r=qn(e.lastLimboFreeSnapshotVersion);let s;s=Ui(e.target)?Cg(t.Jt,e.target):_g(t.Jt,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$n(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Fg(t){const e=Sg({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nb(e,e.limit,"L"):e}function ca(t,e){return new ac(e.largestBatchId,Za(t.Jt,e.overlayMutation))}function uh(t,e){const n=e.path.lastSegment();return[t,Ze(e.path.popLast()),n]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{getBundleMetadata(e,n){return ch(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:jn(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return ch(e).put({bundleId:(r=n).id,createTime:qn(ht(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return lh(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:Fg(s.bundledQuery),readTime:jn(s.readTime)};var s})}saveNamedQuery(e,n){return lh(e).put(function(r){return{name:r.name,readTime:qn(ht(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function ch(t){return Re(t,"bundles")}function lh(t){return Re(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.M=e,this.userId=n}static Yt(e,n){const r=n.uid||"";return new uc(e,r)}getOverlay(e,n){return Ur(e).get(uh(this.userId,n)).next(r=>r?ca(this.M,r):null)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new ac(n,o);s.push(this.Xt(e,a))}),p.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Ze(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Ur(e).Qt("collectionPathOverlayIndex",a))}),p.waitFor(i)}getOverlaysForCollection(e,n,r){const s=us(),i=Ze(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ur(e).qt("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const c=ca(this.M,u);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=us();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ur(e).Wt({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{const h=ca(this.M,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):l.done()}).next(()=>i)}Xt(e,n){return Ur(e).put(function(r,s,i){const[o,a,u]=uh(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Ki(r.Jt,i.mutation)}}(this.M,this.userId,n))}}function Ur(t){return Re(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(){}Zt(e,n){this.te(e,n),n.ee()}te(e,n){if("nullValue"in e)this.ne(n,5);else if("booleanValue"in e)this.ne(n,10),n.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(n,15),n.se(Te(e.integerValue));else if("doubleValue"in e){const r=Te(e.doubleValue);isNaN(r)?this.ne(n,13):(this.ne(n,15),Bi(r)?n.se(0):n.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(n,20),typeof r=="string"?n.ie(r):(n.ie(`${r.seconds||""}`),n.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,n),this.oe(n);else if("bytesValue"in e)this.ne(n,30),n.ue(Vn(e.bytesValue)),this.oe(n);else if("referenceValue"in e)this.ae(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(n,45),n.se(r.latitude||0),n.se(r.longitude||0)}else"mapValue"in e?og(e)?this.ne(n,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,n),this.oe(n)):"arrayValue"in e?(this.he(e.arrayValue,n),this.oe(n)):B()}re(e,n){this.ne(n,25),this.le(e,n)}le(e,n){n.ie(e)}ce(e,n){const r=e.fields||{};this.ne(n,55);for(const s of Object.keys(r))this.re(s,n),this.te(r[s],n)}he(e,n){const r=e.values||[];this.ne(n,50);for(const s of r)this.te(s,n)}ae(e,n){this.ne(n,37),O.fromName(e).path.forEach(r=>{this.ne(n,60),this.le(r,n)})}ne(e,n){e.se(n)}oe(e){e.se(2)}}Sn.fe=new Sn;function OE(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function hh(t){const e=64-function(n){let r=0;for(let s=0;s<8;++s){const i=OE(255&n[s]);if(r+=i,i!==8)break}return r}(t);return Math.ceil(e/8)}class PE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this._e(r.value),r=n.next();this.we()}me(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.ge(r.value),r=n.next();this.ye()}pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=n.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=n.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const n=this.Ee(e),r=hh(n);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Re(e){const n=this.Ee(e),r=hh(n);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}_e(e){const n=255&e;n===0?(this.be(0),this.be(255)):n===255?(this.be(255),this.be(0)):this.be(n)}ge(e){const n=255&e;n===0?(this.ve(0),this.ve(255)):n===255?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class RE{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class LE{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class $r{constructor(){this.De=new PE,this.Ce=new RE(this.De),this.xe=new LE(this.De)}seed(e){this.De.seed(e)}Ne(e){return e===0?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Qt(this.indexId,this.documentKey,this.arrayValue,r)}}function wn(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=dh(t.arrayValue,e.arrayValue),n!==0?n:(n=dh(t.directionalValue,e.directionalValue),n!==0?n:O.comparator(t.documentKey,e.documentKey)))}function dh(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const n of e.filters){const r=n;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const n=Ga(e);if(n!==void 0&&!this.Be(n))return!1;const r=In(e);let s=0,i=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(this.Fe!==void 0){const o=r[s];if(!this.Le(this.Fe,o)||!this.Ue(this.Me[i++],o))return!1;++s}for(;s<r.length;++s){const o=r[s];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}Be(e){for(const n of this.Oe)if(this.Le(n,e))return!0;return!1}Le(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ue(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.qe=new cc}addToCollectionParentIndex(e,n){return this.qe.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this.qe.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getFieldIndex(e,n){return p.resolve(null)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}}class cc{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ye(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ye(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Uint8Array(0);class VE{constructor(e,n){this.user=e,this.databaseId=n,this.Ke=new cc,this.Ge=new pn(r=>$n(r),(r,s)=>js(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ke.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.Ke.add(n)});const i={collectionId:r,parent:Ze(s)};return fh(e).put(i)}return p.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[tg(n),""],!1,!0);return fh(e).qt(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(At(o.parent))}return r})}addFieldIndex(e,n){const r=si(e),s=function(i){return{indexId:i.indexId,collectionGroup:i.collectionGroup,fields:i.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(n);return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,n){const r=si(e),s=ii(e),i=qr(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=qr(e);let s=!0;const i=new Map;return p.forEach(this.Qe(n),o=>this.getFieldIndex(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=ge();const a=[];return p.forEach(i,(u,c)=>{var l;C("IndexedDbIndexManager",`Using index ${l=u,`id=${l.indexId}|cg=${l.collectionGroup}|f=${l.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`} to execute ${$n(n)}`);const h=function(A,q){const W=Ga(q);if(W===void 0)return null;for(const G of $i(A,W.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(c,u),d=function(A,q){const W=new Map;for(const G of In(q))for(const $ of $i(A,G.fieldPath))switch($.op){case"==":case"in":W.set(G.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return W.set(G.fieldPath.canonicalString(),$.value),Array.from(W.values())}return null}(c,u),m=function(A,q){const W=[];let G=!0;for(const $ of In(q)){const te=$.kind===0?jl(A,$.fieldPath,A.startAt):Kl(A,$.fieldPath,A.startAt);if(!te.value)return null;W.push(te.value),G&&(G=te.inclusive)}return new Er(W,G)}(c,u),y=function(A,q){const W=[];let G=!0;for(const $ of In(q)){const te=$.kind===0?Kl(A,$.fieldPath,A.endAt):jl(A,$.fieldPath,A.endAt);if(!te.value)return null;W.push(te.value),G&&(G=te.inclusive)}return new Er(W,G)}(c,u),I=this.je(u,c,m),N=this.je(u,c,y),P=this.We(u,c,d),k=this.ze(u.indexId,h,I,!!m&&m.inclusive,N,!!y&&y.inclusive,P);return p.forEach(k,A=>r.Gt(A,n.limit).next(q=>{q.forEach(W=>{const G=O.fromSegments(W.documentKey);o.has(G)||(o=o.add(G),a.push(G))})}))}).next(()=>a)}return p.resolve(null)})}Qe(e){let n=this.Ge.get(e);return n||(n=[e],this.Ge.set(e,n),n)}ze(e,n,r,s,i,o,a){const u=(n!=null?n.length:1)*Math.max(r!=null?r.length:1,i!=null?i.length:1),c=u/(n!=null?n.length:1),l=[];for(let h=0;h<u;++h){const d=n?this.He(n[h/c]):tr,m=r?this.Je(e,d,r[h%c],s):this.Ye(e),y=i?this.Xe(e,d,i[h%c],o):this.Ye(e+1);l.push(...this.createRange(m,y,a.map(I=>this.Je(e,d,I,!0))))}return l}Je(e,n,r,s){const i=new Qt(e,O.empty(),n,r);return s?i:i.ke()}Xe(e,n,r,s){const i=new Qt(e,O.empty(),n,r);return s?i.ke():i}Ye(e){return new Qt(e,O.empty(),tr,tr)}getFieldIndex(e,n){const r=new FE(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{const o=i.filter(a=>r.$e(a));return o.sort((a,u)=>u.fields.length-a.fields.length),o.length>0?o[0]:null})}Ze(e,n){const r=new $r;for(const s of In(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Ne(s.kind);Sn.fe.Zt(i,o)}return r.Se()}He(e){const n=new $r;return Sn.fe.Zt(e,n.Ne(0)),n.Se()}tn(e,n){const r=new $r;return Sn.fe.Zt(ec(this.databaseId,n),r.Ne(function(s){const i=In(s);return i.length===0?0:i[i.length-1].kind}(e))),r.Se()}We(e,n,r){if(r===null)return[];let s=[];s.push(new $r);let i=0;for(const o of In(e)){const a=r[i++];for(const u of s)if(this.en(n,o.fieldPath)&&As(a))s=this.nn(s,o,a);else{const c=u.Ne(o.kind);Sn.fe.Zt(a,c)}}return this.sn(s)}je(e,n,r){return r==null?null:this.We(e,n,r.position)}sn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Se();return n}nn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const u=new $r;u.seed(a.Se()),Sn.fe.Zt(o,u.Ne(n.kind)),i.push(u)}return i}en(e,n){return!!e.filters.find(r=>r instanceof qe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=si(e),s=ii(e);return(n?r.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.qt()).next(i=>{const o=[];return p.forEach(i,a=>s.get([a.indexId,this.uid]).next(u=>{o.push(function(c,l){const h=l?new Vi(l.sequenceNumber,new $t(jn(l.readTime),new O(At(l.documentKey)),l.largestBatchId)):Vi.empty(),d=c.fields.map(([m,y])=>new fb(Ye.fromServerFormat(m),y));return new ag(c.indexId,c.collectionGroup,d,h)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Z(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=si(e),i=ii(e);return this.rn(e).next(o=>s.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>i.put(function(c,l,h,d){return{indexId:c,uid:l.uid||"",sequenceNumber:h,readTime:qn(d.readTime),documentKey:Ze(d.documentKey.path),largestBatchId:d.largestBatchId}}(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return p.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?p.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),p.forEach(a,u=>this.on(e,s,u).next(c=>{const l=this.un(i,u);return c.isEqual(l)?p.resolve():this.an(e,i,u,c,l)}))))})}cn(e,n,r,s){return qr(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.tn(r,n.key),documentKey:n.key.path.toArray()})}hn(e,n,r,s){return qr(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.tn(r,n.key),n.key.path.toArray()])}on(e,n,r){const s=qr(e);let i=new ye(wn);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,n)])},(o,a)=>{i=i.add(new Qt(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}un(e,n){let r=new ye(wn);const s=this.Ze(n,e);if(s==null)return r;const i=Ga(n);if(i!=null){const o=e.data.field(i.fieldPath);if(As(o))for(const a of o.arrayValue.values||[])r=r.add(new Qt(n.indexId,e.key,this.He(a),s))}else r=r.add(new Qt(n.indexId,e.key,tr,s));return r}an(e,n,r,s,i){C("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,u,c,l,h){const d=a.getIterator(),m=u.getIterator();let y=Zn(d),I=Zn(m);for(;y||I;){let N=!1,P=!1;if(y&&I){const k=c(y,I);k<0?P=!0:k>0&&(N=!0)}else y!=null?P=!0:N=!0;N?(l(I),I=Zn(m)):P?(h(y),y=Zn(d)):(y=Zn(d),I=Zn(m))}}(s,i,wn,a=>{o.push(this.cn(e,n,r,a))},a=>{o.push(this.hn(e,n,r,a))}),p.waitFor(o)}rn(e){let n=1;return ii(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>wn(o,a)).filter((o,a,u)=>!a||wn(o,u[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=wn(o,e),u=wn(o,n);if(a===0)s[0]=e.ke();else if(a>0&&u<0)s.push(o),s.push(o.ke());else if(u>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2)i.push(IDBKeyRange.bound([s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,tr,[]],[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,tr,[]]));return i}}function fh(t){return Re(t,"collectionParents")}function qr(t){return Re(t,"indexEntries")}function si(t){return Re(t,"indexConfiguration")}function ii(t){return Re(t,"indexState")}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class it{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new it(e,it.DEFAULT_COLLECTION_PERCENTILE,it.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Wt({range:o},(l,h,d)=>(a++,d.delete()));i.push(u.next(()=>{Q(a===1)}));const c=[];for(const l of n.mutations){const h=kg(e,l.key.path,n.batchId);i.push(s.delete(h)),c.push(l.key)}return p.waitFor(i).next(()=>c)}function Hi(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw B();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */it.DEFAULT_COLLECTION_PERCENTILE=10,it.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,it.DEFAULT=new it(41943040,it.DEFAULT_COLLECTION_PERCENTILE,it.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),it.DISABLED=new it(-1,0,0);class lc{constructor(e,n,r,s){this.userId=e,this.M=n,this.indexManager=r,this.referenceDelegate=s,this.ln={}}static Yt(e,n,r,s){Q(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new lc(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ht(e).Wt({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=ar(e),o=Ht(e);return o.add({}).next(a=>{Q(typeof a=="number");const u=new ic(a,n,r,s),c=function(d,m,y){const I=y.baseMutations.map(P=>Ki(d.Jt,P)),N=y.mutations.map(P=>Ki(d.Jt,P));return{userId:m,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:I,mutations:N}}(this.M,this.userId,u),l=[];let h=new ye((d,m)=>Z(d.canonicalString(),m.canonicalString()));for(const d of s){const m=kg(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(o.put(c)),l.push(i.put(m,dE))}return h.forEach(d=>{l.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.ln[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return Ht(e).get(n).next(r=>r?(Q(r.userId===this.userId),or(this.M,r)):null)}fn(e,n){return this.ln[n]?p.resolve(this.ln[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.ln[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ht(e).Wt({index:"userMutationsIndex",range:s},(o,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),i=or(this.M,a)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ht(e).Wt({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ht(e).qt("userMutationsIndex",n).next(r=>r.map(s=>or(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=vi(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return ar(e).Wt({range:s},(o,a,u)=>{const[c,l,h]=o,d=At(l);if(c===this.userId&&n.path.isEqual(d))return Ht(e).get(h).next(m=>{if(!m)throw B();Q(m.userId===this.userId),i.push(or(this.M,m))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(Z);const s=[];return n.forEach(i=>{const o=vi(this.userId,i.path),a=IDBKeyRange.lowerBound(o),u=ar(e).Wt({range:a},(c,l,h)=>{const[d,m,y]=c,I=At(m);d===this.userId&&i.path.isEqual(I)?r=r.add(y):h.done()});s.push(u)}),p.waitFor(s).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=vi(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ye(Z);return ar(e).Wt({range:o},(u,c,l)=>{const[h,d,m]=u,y=At(d);h===this.userId&&r.isPrefixOf(y)?y.length===s&&(a=a.add(m)):l.done()}).next(()=>this.dn(e,a))}dn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Ht(e).get(i).next(o=>{if(o===null)throw B();Q(o.userId===this.userId),r.push(or(this.M,o))}))}),p.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return Bg(e.Ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this._n(n.batchId)}),p.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return ar(e).Wt({range:r},(i,o,a)=>{if(i[0]===this.userId){const u=At(i[1]);s.push(u)}else a.done()}).next(()=>{Q(s.length===0)})})}containsKey(e,n){return Vg(e,this.userId,n)}wn(e){return Ug(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vg(t,e,n){const r=vi(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ar(t).Wt({range:i,jt:!0},(a,u,c)=>{const[l,h,d]=a;l===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function Ht(t){return Re(t,"mutations")}function ar(t){return Re(t,"documentMutations")}function Ug(t){return Re(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Kn(0)}static yn(){return new Kn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.referenceDelegate=e,this.M=n}allocateTargetId(e){return this.pn(e).next(n=>{const r=new Kn(n.highestTargetId);return n.highestTargetId=r.next(),this.In(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(n=>j.fromTimestamp(new Je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.pn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.In(e,s)))}addTargetData(e,n){return this.Tn(e,n).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(n,r),this.In(e,r))))}updateTargetData(e,n){return this.Tn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>nr(e).delete(n.targetId)).next(()=>this.pn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return nr(e).Wt((o,a)=>{const u=Jr(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(i)).next(()=>s)}forEachTarget(e,n){return nr(e).Wt((r,s)=>{const i=Jr(s);n(i)})}pn(e){return mh(e).get("targetGlobalKey").next(n=>(Q(n!==null),n))}In(e,n){return mh(e).put("targetGlobalKey",n)}Tn(e,n){return nr(e).put(Lg(this.M,n))}En(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$n(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return nr(e).Wt({range:s,index:"queryTargetsIndex"},(o,a,u)=>{const c=Jr(a);js(n,c.target)&&(i=c,u.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Xt(e);return n.forEach(o=>{const a=Ze(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),p.waitFor(s)}removeMatchingKeys(e,n,r){const s=Xt(e);return p.forEach(n,i=>{const o=Ze(i.path);return p.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Xt(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Xt(e);let i=ge();return s.Wt({range:r,jt:!0},(o,a,u)=>{const c=At(o[1]),l=new O(c);i=i.add(l)}).next(()=>i)}containsKey(e,n){const r=Ze(n.path),s=IDBKeyRange.bound([r],[tg(r)],!1,!0);let i=0;return Xt(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([o,a],u,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}Et(e,n){return nr(e).get(n).next(r=>r?Jr(r):null)}}function nr(t){return Re(t,"targets")}function mh(t){return Re(t,"targetGlobal")}function Xt(t){return Re(t,"targetDocuments")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Or(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==Og)throw t;C("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph([t,e],[n,r]){const s=Z(t,n);return s===0?Z(e,r):s}class $E{constructor(e){this.An=e,this.buffer=new ye(ph),this.Rn=0}Pn(){return++this.Rn}bn(e){const n=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ph(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qE{constructor(e,n){this.garbageCollector=e,this.asyncQueue=n,this.Vn=!1,this.vn=null}start(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return this.vn!==null}Sn(e){const n=this.Vn?3e5:6e4;C("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,async()=>{this.vn=null,this.Vn=!0;try{await e.collectGarbage(this.garbageCollector)}catch(r){Gn(r)?C("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Or(r)}await this.Sn(e)})}}class jE{constructor(e,n){this.Dn=e,this.params=n}calculateTargetCount(e,n){return this.Dn.Cn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Et.A);const r=new $E(n);return this.Dn.forEachTarget(e,s=>r.bn(s.sequenceNumber)).next(()=>this.Dn.xn(e,s=>r.bn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Dn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Dn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(C("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(gh)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gh):this.Nn(e,n))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,n){let r,s,i,o,a,u,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(C("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Ka()<=ie.DEBUG&&C("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.db=e,this.garbageCollector=function(r,s){return new jE(r,s)}(this,n)}Cn(e){const n=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}kn(e){let n=0;return this.xn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}xn(e,n){return this.Mn(e,(r,s)=>n(s))}addReference(e,n,r){return oi(e,r)}removeReference(e,n,r){return oi(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return oi(e,n)}On(e,n){return function(r,s){let i=!1;return Ug(r).zt(o=>Vg(r,o,s).next(a=>(a&&(i=!0),p.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Mn(e,(o,a)=>{if(a<=n){const u=this.On(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,j.min()),Xt(e).delete([0,Ze(o.path)])))});s.push(u)}}).next(()=>p.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return oi(e,n)}Mn(e,n){const r=Xt(e);let s,i=Et.A;return r.Wt({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(i!==Et.A&&n(new O(At(s)),i),i=c,s=u):i=Et.A}).next(()=>{i!==Et.A&&n(new O(At(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oi(t,e){return Xt(t).put(function(n,r){return{targetId:0,path:Ze(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.changes=new pn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ie.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return bn(e).put(r)}removeEntry(e,n,r){return bn(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Wi(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Fn(e,r)))}getEntry(e,n){let r=Ie.newInvalidDocument(n);return bn(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(jr(n))},(s,i)=>{r=this.$n(n,i)}).next(()=>r)}Bn(e,n){let r={size:0,document:Ie.newInvalidDocument(n)};return bn(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(jr(n))},(s,i)=>{r={document:this.$n(n,i),size:Hi(i)}}).next(()=>r)}getEntries(e,n){let r=Tt();return this.Ln(e,n,(s,i)=>{const o=this.$n(s,i);r=r.insert(s,o)}).next(()=>r)}Un(e,n){let r=Tt(),s=new Pe(O.comparator);return this.Ln(e,n,(i,o)=>{const a=this.$n(i,o);r=r.insert(i,a),s=s.insert(i,Hi(o))}).next(()=>({documents:r,qn:s}))}Ln(e,n,r){if(n.isEmpty())return p.resolve();let s=new ye(wh);n.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(jr(s.first()),jr(s.last())),o=s.getIterator();let a=o.getNext();return bn(e).Wt({index:"documentKeyIndex",range:i},(u,c,l)=>{const h=O.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&wh(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?l.Ut(jr(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const s=[n.popLast().toArray(),n.lastSegment(),Wi(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],i=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bn(e).qt(IDBKeyRange.bound(s,i,!0)).next(o=>{let a=Tt();for(const u of o){const c=this.$n(O.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(c.key,c)}return a})}getAllFromCollectionGroup(e,n,r,s){let i=Tt();const o=vh(n,r),a=vh(n,$t.max());return bn(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,l)=>{const h=this.$n(O.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&l.done()}).next(()=>i)}newChangeBuffer(e){return new HE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return yh(e).get("remoteDocumentGlobalKey").next(n=>(Q(!!n),n))}Fn(e,n){return yh(e).put("remoteDocumentGlobalKey",n)}$n(e,n){if(n){const r=NE(this.M,n);if(!(r.isNoDocument()&&r.version.isEqual(j.min())))return r}return Ie.newInvalidDocument(e)}}class HE extends $g{constructor(e,n){super(),this.Kn=e,this.trackRemovals=n,this.Gn=new pn(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ye((i,o)=>Z(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Gn.get(i);if(n.push(this.Kn.removeEntry(e,i,a.readTime)),o.isValidDocument()){const u=ah(this.Kn.M,o);s=s.add(i.path.popLast()),r+=Hi(u)-a.size,n.push(this.Kn.addEntry(e,i,u))}else if(r-=a.size,this.trackRemovals){const u=ah(this.Kn.M,o.convertToNoDocument(j.min()));n.push(this.Kn.addEntry(e,i,u))}}),s.forEach(i=>{n.push(this.Kn.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Kn.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.Kn.Bn(e,n).next(r=>(this.Gn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Kn.Un(e,n).next(({documents:r,qn:s})=>(s.forEach((i,o)=>{this.Gn.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function yh(t){return Re(t,"remoteDocumentGlobal")}function bn(t){return Re(t,"remoteDocumentsV14")}function jr(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vh(t,e){const n=e.documentKey.path.toArray();return[t,Wi(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function wh(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Z(n[i],r[i]),s)return s;return s=Z(n.length,r.length),s||(s=Z(n[n.length-2],r[r.length-2]),s||Z(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.M=e}kt(e,n,r,s){const i=new Oo("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sh,{unique:!0}),a.createObjectStore("documentMutations")}(e),bh(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=p.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),bh(e)),o=o.next(()=>function(a){const u=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(a,u){return u.store("mutations").qt().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sh,{unique:!0});const l=u.store("mutations"),h=c.map(d=>l.put(d));return p.waitFor(h)})}(e,i))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Qn(i))),r<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.jn(i)))),r<7&&s>=7&&(o=o.next(()=>this.Wn(i))),r<8&&s>=8&&(o=o.next(()=>this.zn(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Hn(i))),r<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(a){const u=a.createObjectStore("documentOverlays",{keyPath:xE});u.createIndex("collectionPathOverlayIndex",CE,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",_E,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(a){const u=a.createObjectStore("remoteDocumentsV14",{keyPath:fE});u.createIndex("documentKeyIndex",gE),u.createIndex("collectionGroupIndex",mE)}(e)).next(()=>this.Jn(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>{(function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:bE}).createIndex("sequenceNumberIndex",EE,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:TE}).createIndex("documentKeyIndex",IE,{unique:!1})})(e)})),o}jn(e){let n=0;return e.store("remoteDocuments").Wt((r,s)=>{n+=Hi(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next(s=>p.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",o).next(a=>p.forEach(a,u=>{Q(u.userId===i.userId);const c=or(this.M,u);return Bg(e,i.userId,c).next(()=>{})}))}))}Wn(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Wt((o,a)=>{const u=new de(o),c=function(l){return[0,Ze(l)]}(u);i.push(n.get(c).next(l=>l?p.resolve():(h=>n.put({targetId:0,path:Ze(h),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(i))})}zn(e,n){e.createObjectStore("collectionParents",{keyPath:wE});const r=n.store("collectionParents"),s=new cc,i=o=>{if(s.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Ze(u)})}};return n.store("remoteDocuments").Wt({jt:!0},(o,a)=>{const u=new de(o);return i(u.popLast())}).next(()=>n.store("documentMutations").Wt({jt:!0},([o,a,u],c)=>{const l=At(a);return i(l.popLast())}))}Hn(e){const n=e.store("targets");return n.Wt((r,s)=>{const i=Jr(s),o=Lg(this.M,i);return n.put(o)})}Jn(e,n){const r=n.store("remoteDocuments"),s=[];return r.Wt((i,o)=>{const a=n.store("remoteDocumentsV14"),u=(c=o,c.document?new O(de.fromString(c.document.name).popFirst(5)):c.noDocument?O.fromSegments(c.noDocument.path):c.unknownDocument?O.fromSegments(c.unknownDocument.path):B()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(l))}).next(()=>p.waitFor(s))}}function bh(t){t.createObjectStore("targetDocuments",{keyPath:yE}).createIndex("documentTargetsIndex",vE,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pE,{unique:!0}),t.createObjectStore("targetGlobal")}const la="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hc{constructor(e,n,r,s,i,o,a,u,c,l,h=13){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Yn=i,this.window=o,this.document=a,this.Xn=c,this.Zn=l,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=d=>Promise.resolve(),!hc.vt())throw new F(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KE(this,s),this.hs=n+"main",this.M=new Rg(u),this.ls=new Ft(this.hs,this.ts,new GE(this.M)),this.fs=new UE(this.referenceDelegate,this.M),this.ds=function(d){return new WE(d)}(this.M),this._s=new ME,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,l===!1&&at("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(E.FAILED_PRECONDITION,la);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Et(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){return this.cs=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(async()=>{this.started&&await this.gs()}))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ai(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(n=>{n||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(n=>this.isPrimary&&!n?this.Rs(e).next(()=>!1):!!n&&this.Ps(e).next(()=>!0))).catch(e=>{if(Gn(e))return C("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return C("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Kr(e).get("owner").next(n=>p.resolve(this.bs(n)))}Vs(e){return ai(e).delete(this.clientId)}async vs(){if(this.isPrimary&&!this.Ss(this.us,18e5)){this.us=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Re(n,"clientMetadata");return r.qt().next(s=>{const i=this.Ds(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return p.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ws)for(const n of e)this.ws.removeItem(this.Cs(n.clientId))}}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?p.resolve(!0):Kr(e).get("owner").next(n=>{if(n!==null&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)){if(this.bs(n)&&this.networkEnabled)return!0;if(!this.bs(n)){if(!n.allowTabSynchronization)throw new F(E.FAILED_PRECONDITION,la);return!1}}return!(!this.networkEnabled||!this.inForeground)||ai(e).qt().next(r=>this.Ds(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&C("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),await this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new oh(e,Et.A);return this.Rs(n).next(()=>this.Vs(n))}),this.ls.close(),this.Os()}Ds(e,n){return e.filter(r=>this.Ss(r.updateTimeMs,n)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>ai(e).qt().next(n=>this.Ds(n,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,n){return lc.Yt(e,this.M,n,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new VE(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return uc.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,n,r){C("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(o=this.ts)===14?DE:o===13?Mg:o===12?SE:o===11?Ng:void B();var o;let a;return this.ls.runTransaction(e,s,i,u=>(a=new oh(u,this.es?this.es.next():Et.A),n==="readwrite-primary"?this.Es(a).next(c=>!!c||this.As(a)).next(c=>{if(!c)throw at(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new F(E.FAILED_PRECONDITION,Og);return r(a)}).next(c=>this.Ps(a).next(()=>c)):this.$s(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}$s(e){return Kr(e).get("owner").next(n=>{if(n!==null&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)&&!this.bs(n)&&!(this.Zn||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(E.FAILED_PRECONDITION,la)})}Ps(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kr(e).put("owner",n)}static vt(){return Ft.vt()}Rs(e){const n=Kr(e);return n.get("owner").next(r=>this.bs(r)?(C("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ss(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(at(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ys(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground=this.document.visibilityState==="visible")}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ss=()=>{this.Ns(),Fv()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var n;try{const r=((n=this.ws)===null||n===void 0?void 0:n.getItem(this.Cs(e)))!==null;return C("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return at("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){at("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch{}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kr(t){return Re(t,"owner")}function ai(t){return Re(t,"clientMetadata")}function zE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r){this.ds=e,this.Bs=n,this.indexManager=r}Ls(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.Us(e,n,r))}Us(e,n,r){return this.ds.getEntry(e,n).next(s=>{for(const i of r)i.applyToLocalView(s);return s})}qs(e,n){e.forEach((r,s)=>{for(const i of n)i.applyToLocalView(s)})}Ks(e,n){return this.ds.getEntries(e,n).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.qs(n,r))}Qs(e,n,r){return function(s){return O.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.js(e,n.path):kb(n)?this.Ws(e,n,r):this.zs(e,n,r)}js(e,n){return this.Ls(e,new O(n)).next(r=>{let s=Qa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Ws(e,n,r){const s=n.collectionGroup;let i=Qa();return this.indexManager.getCollectionParents(e,s).next(o=>p.forEach(o,a=>{const u=function(c,l){return new _o(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.zs(e,u,r).next(c=>{c.forEach((l,h)=>{i=i.insert(l,h)})})}).next(()=>i))}zs(e,n,r){let s;return this.ds.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.Bs.getAllMutationBatchesAffectingQuery(e,n))).next(i=>{for(const o of i)for(const a of o.mutations){const u=a.key;let c=s.get(u);c==null&&(c=Ie.newInvalidDocument(u),s=s.insert(u,c)),Ya(a,c,o.localWriteTime),c.isFoundDocument()||(s=s.remove(u))}}).next(()=>(s.forEach((i,o)=>{nc(n,o)||(s=s.remove(i))}),s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hs=r,this.Js=s}static Ys(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new dc(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{Xs(e){this.Zs=e}Qs(e,n,r,s){return function(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(j.min())?this.ti(e,n):this.Zs.Ks(e,s).next(i=>{const o=this.ei(n,i);return(mi(n)||qi(n))&&this.ni(n.limitType,o,s,r)?this.ti(e,n):(Ka()<=ie.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),za(n)),this.Zs.Qs(e,n,gb(r,-1)).next(a=>(o.forEach(u=>{a=a.insert(u.key,u)}),a)))})}ei(e,n){let r=new ye(lg(e));return n.forEach((s,i)=>{nc(e,i)&&(r=r.add(i))}),r}ni(e,n,r,s){if(r.size!==n.size)return!0;const i=e==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ti(e,n){return Ka()<=ie.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",za(n)),this.Zs.Qs(e,n,$t.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,r,s){this.persistence=e,this.si=n,this.M=s,this.ii=new Pe(Z),this.ri=new pn(i=>$n(i),js),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new YE(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ii))}}function jg(t,e,n,r){return new QE(t,e,n,r)}async function Kg(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.Bs.getAllMutationBatches(r).next(i=>(s=i,n.ai(e),n.Bs.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=ge();for(const c of s){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of i){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.ci.Ks(r,u).next(c=>({hi:c,removedBatchIds:o,addedBatchIds:a}))})})}function XE(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,h=l.keys();let d=p.resolve();return h.forEach(m=>{d=d.next(()=>c.getEntry(a,m)).next(y=>{const I=u.docVersions.get(m);Q(I!==null),y.version.compareTo(I)<0&&(l.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),c.addEntry(y)))})}),d.next(()=>o.Bs.removeMutationBatch(a,l))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.Bs.performConsistencyCheck(r)).next(()=>n.ci.Ks(r,s))})}function Wg(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.fs.getLastRemoteSnapshotVersion(n))}function JE(t,e){const n=J(t),r=e.snapshotVersion;let s=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ui.newChangeBuffer({trackRemovals:!0});s=n.ii;const a=[];e.targetChanges.forEach((c,l)=>{const h=s.get(l);if(!h)return;a.push(n.fs.removeMatchingKeys(i,c.removedDocuments,l).next(()=>n.fs.addMatchingKeys(i,c.addedDocuments,l)));let d=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(l)?d=d.withResumeToken(Oe.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,r)),s=s.insert(l,d),function(m,y,I){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,d,c)&&a.push(n.fs.updateTargetData(i,d))});let u=Tt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(ZE(i,o,e.documentUpdates).next(c=>{u=c})),!r.isEqual(j.min())){const c=n.fs.getLastRemoteSnapshotVersion(i).next(l=>n.fs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return p.waitFor(a).next(()=>o.apply(i)).next(()=>n.ci.Gs(i,u)).next(()=>u)}).then(i=>(n.ii=s,i))}function ZE(t,e,n){let r=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=Tt();return n.forEach((o,a)=>{const u=s.get(o);a.isNoDocument()&&a.version.isEqual(j.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||a.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):C("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",a.version)}),i})}function eT(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.Bs.getNextMutationBatchAfterBatchId(r,e)))}function tT(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.fs.getTargetData(r,e).next(i=>i?(s=i,p.resolve(s)):n.fs.allocateTargetId(r).next(o=>(s=new sn(e,o,0,r.currentSequenceNumber),n.fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ii.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ii=n.ii.insert(r.targetId,r),n.ri.set(e,r.targetId)),r})}async function eu(t,e,n){const r=J(t),s=r.ii.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Gn(o))throw o;C("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ii=r.ii.remove(e),r.ri.delete(s.target)}function Eh(t,e,n){const r=J(t);let s=j.min(),i=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=J(a),h=l.ri.get(c);return h!==void 0?p.resolve(l.ii.get(h)):l.fs.getTargetData(u,c)}(r,o,qt(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.si.Qs(o,e,n?s:j.min(),n?i:ge())).next(a=>(nT(r,Mb(e),a),{documents:a,li:i})))}function nT(t,e,n){let r=j.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.oi.set(e,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,n){return p.resolve(this.wi.get(n))}saveBundleMetadata(e,n){var r;return this.wi.set(n.id,{id:(r=n).id,version:r.version,createTime:ht(r.createTime)}),p.resolve()}getNamedQuery(e,n){return p.resolve(this.mi.get(n))}saveNamedQuery(e,n){return this.mi.set(n.name,function(r){return{name:r.name,query:Fg(r.bundledQuery),readTime:ht(r.readTime)}}(n)),p.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.overlays=new Pe(O.comparator),this.gi=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Xt(e,n,i)}),p.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.gi.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.gi.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){const s=us(),i=n.length+1,o=new O(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return p.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pe((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=i.get(c.largestBatchId);l===null&&(l=us(),i=i.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=us(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=s)););return p.resolve(a)}Xt(e,n,r){if(r===null)return;const s=this.overlays.get(r.key);if(s!==null){const o=this.gi.get(s.largestBatchId).delete(r.key);this.gi.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ac(n,r));let i=this.gi.get(n);i===void 0&&(i=ge(),this.gi.set(n,i)),this.gi.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this.yi=new ye(Ae.pi),this.Ii=new ye(Ae.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,n){const r=new Ae(e,n);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ai(new Ae(e,n))}Ri(e,n){e.forEach(r=>this.removeReference(r,n))}Pi(e){const n=new O(new de([])),r=new Ae(n,e),s=new Ae(n,e+1),i=[];return this.Ii.forEachInRange([r,s],o=>{this.Ai(o),i.push(o.key)}),i}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const n=new O(new de([])),r=new Ae(n,e),s=new Ae(n,e+1);let i=ge();return this.Ii.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ae(e,0),r=this.yi.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ae{constructor(e,n){this.key=e,this.vi=n}static pi(e,n){return O.comparator(e.key,n.key)||Z(e.vi,n.vi)}static Ti(e,n){return Z(e.vi,n.vi)||O.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new ye(Ae.pi)}checkEmpty(e){return p.resolve(this.Bs.length===0)}addMutationBatch(e,n,r,s){const i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const o=new ic(i,n,r,s);this.Bs.push(o);for(const a of s)this.Di=this.Di.add(new Ae(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(o)}lookupMutationBatch(e,n){return p.resolve(this.Ci(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.xi(r),i=s<0?0:s;return p.resolve(this.Bs.length>i?this.Bs[i]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.Bs.length===0?-1:this.Si-1)}getAllMutationBatches(e){return p.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ae(n,0),s=new Ae(n,Number.POSITIVE_INFINITY),i=[];return this.Di.forEachInRange([r,s],o=>{const a=this.Ci(o.vi);i.push(a)}),p.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(Z);return n.forEach(s=>{const i=new Ae(s,0),o=new Ae(s,Number.POSITIVE_INFINITY);this.Di.forEachInRange([i,o],a=>{r=r.add(a.vi)})}),p.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;O.isDocumentKey(i)||(i=i.child(""));const o=new Ae(new O(i),0);let a=new ye(Z);return this.Di.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.vi)),!0)},o),p.resolve(this.Ni(a))}Ni(e){const n=[];return e.forEach(r=>{const s=this.Ci(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Q(this.ki(n.batchId,"removed")===0),this.Bs.shift();let r=this.Di;return p.forEach(n.mutations,s=>{const i=new Ae(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,n){const r=new Ae(n,0),s=this.Di.firstAfterOrEqual(r);return p.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.Bs.length,p.resolve()}ki(e,n){return this.xi(e)}xi(e){return this.Bs.length===0?0:e-this.Bs[0].batchId}Ci(e){const n=this.xi(e);return n<0||n>=this.Bs.length?null:this.Bs[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.Mi=e,this.docs=new Pe(O.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mi(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Ie.newInvalidDocument(n))}getEntries(e,n){let r=Tt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ie.newInvalidDocument(s))}),p.resolve(r)}getAllFromCollection(e,n,r){let s=Tt();const i=new O(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||pb(mb(u),r)<=0||(s=s.insert(u.key,u.mutableCopy()))}return p.resolve(s)}getAllFromCollectionGroup(e,n,r,s){B()}Oi(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aT(this)}getSize(e){return p.resolve(this.size)}}class aT extends $g{constructor(e){super(),this.Kn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.Kn.getEntry(e,n)}getAllFromCache(e,n){return this.Kn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.persistence=e,this.Fi=new pn(n=>$n(n),js),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.$i=0,this.Bi=new fc,this.targetCount=0,this.Li=Kn.gn()}forEachTarget(e,n){return this.Fi.forEach((r,s)=>n(s)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$i&&(this.$i=n),p.resolve()}Tn(e){this.Fi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Li=new Kn(n),this.highestTargetId=n),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,n){return this.Tn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.Tn(n),p.resolve()}removeTargetData(e,n){return this.Fi.delete(n.target),this.Bi.Pi(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Fi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),p.waitFor(i).next(()=>s)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fi.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Bi.Ei(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Bi.Ri(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),p.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Bi.Pi(n),p.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Bi.Vi(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Bi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.Ui={},this.overlays={},this.es=new Et(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new uT(this),this.indexManager=new BE,this.ds=function(r){return new oT(r)}(r=>this.referenceDelegate.qi(r)),this.M=new Rg(n),this._s=new rT(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ui[e.toKey()];return r||(r=new iT(n,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,n,r){C("MemoryPersistence","Starting transaction:",e);const s=new lT(this.es.next());return this.referenceDelegate.Ki(),r(s).next(i=>this.referenceDelegate.Gi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Qi(e,n){return p.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,n)))}}class lT extends Pg{constructor(e){super(),this.currentSequenceNumber=e}}class gc{constructor(e){this.persistence=e,this.ji=new fc,this.Wi=null}static zi(e){return new gc(e)}get Hi(){if(this.Wi)return this.Wi;throw B()}addReference(e,n,r){return this.ji.addReference(r,n),this.Hi.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.ji.removeReference(r,n),this.Hi.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Hi.add(n.toString()),p.resolve()}removeTarget(e,n){this.ji.Pi(n.targetId).forEach(s=>this.Hi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Hi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ki(){this.Wi=new Set}Gi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Hi,r=>{const s=O.fromPath(r);return this.Ji(e,s).next(i=>{i||n.removeEntry(s,j.min())})}).next(()=>(this.Wi=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ji(e,n).next(r=>{r?this.Hi.delete(n.toString()):this.Hi.add(n.toString())})}qi(e){return 0}Ji(e,n){return p.or([()=>p.resolve(this.ji.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Qi(e,n)])}}class Th{constructor(){this.activeTargetIds=vg()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hg{constructor(){this.$r=new Th,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,n,r){this.Br[e]=n}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Th,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{Lr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){C("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){C("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.io=n+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,n,r,s,i){const o=this.uo(e,n);C("RestConnection","Sending: ",o,r);const a={};return this.ao(a,s,i),this.co(e,o,a,r).then(u=>(C("RestConnection","Received: ",u),u),u=>{throw Rl("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}ho(e,n,r,s,i){return this.oo(e,n,r,s,i)}ao(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}uo(e,n){const r=dT[e];return`${this.io}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,s){return new Promise((i,o)=>{const a=new Q0;a.listenOnce(G0.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case aa.NO_ERROR:const c=a.getResponseJson();C("Connection","XHR received:",JSON.stringify(c)),i(c);break;case aa.TIMEOUT:C("Connection",'RPC "'+e+'" timed out'),o(new F(E.DEADLINE_EXCEEDED,"Request time out"));break;case aa.HTTP_ERROR:const l=a.getStatus();if(C("Connection",'RPC "'+e+'" failed with status:',l,"response text:",a.getResponseText()),l>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(m){const y=m.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(y)>=0?y:E.UNKNOWN}(h.status);o(new F(d,h.message))}else o(new F(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new F(E.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{C("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(s);a.send(n,"POST",u,r,15)})}lo(e,n,r){const s=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=W0(),o=H0(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Y0({})),this.ao(a.initMessageHeaders,n,r),kv()||Ov()||Pv()||Rv()||Lv()||Mv()||(a.httpHeadersOverwriteParam="$httpHeaders");const u=s.join("");C("Connection","Creating WebChannel: "+u,a);const c=i.createWebChannel(u,a);let l=!1,h=!1;const d=new fT({Wr:y=>{h?C("Connection","Not sending because WebChannel is closed:",y):(l||(C("Connection","Opening WebChannel transport."),c.open(),l=!0),C("Connection","WebChannel sending:",y),c.send(y))},zr:()=>c.close()}),m=(y,I,N)=>{y.listen(I,P=>{try{N(P)}catch(k){setTimeout(()=>{throw k},0)}})};return m(c,ni.EventType.OPEN,()=>{h||C("Connection","WebChannel transport opened.")}),m(c,ni.EventType.CLOSE,()=>{h||(h=!0,C("Connection","WebChannel transport closed"),d.no())}),m(c,ni.EventType.ERROR,y=>{h||(h=!0,Rl("Connection","WebChannel transport errored:",y),d.no(new F(E.UNAVAILABLE,"The operation could not be completed")))}),m(c,ni.EventType.MESSAGE,y=>{var I;if(!h){const N=y.data[0];Q(!!N);const P=N,k=P.error||((I=P[0])===null||I===void 0?void 0:I.error);if(k){C("Connection","WebChannel received error:",k);const A=k.status;let q=function(G){const $=xe[G];if($!==void 0)return yg($)}(A),W=k.message;q===void 0&&(q=E.INTERNAL,W="Unknown error status: "+A+" with message "+k.message),h=!0,d.no(new F(q,W)),c.close()}else C("Connection","WebChannel received:",N),d.so(N)}}),m(o,z0.STAT_EVENT,y=>{y.stat===Ol.PROXY?C("Connection","Detected buffering proxy"):y.stat===Ol.NOPROXY&&C("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.eo()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){return typeof window!="undefined"?window:null}function wi(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){return new Zb(t,!0)}class zg{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Yn=e,this.timerId=n,this.fo=r,this._o=s,this.wo=i,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),s=Math.max(0,n-r);s>0&&C("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.mo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){this.yo!==null&&(this.yo.skipDelay(),this.yo=null)}cancel(){this.yo!==null&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n,r,s,i,o,a,u){this.Yn=e,this.Ro=r,this.Po=s,this.bo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new zg(e,n)}Co(){return this.state===1||this.state===5||this.xo()}xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.No()}async stop(){this.Co()&&await this.close(0)}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&this.vo===null&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}async Oo(){if(this.xo())return this.close(0)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}async close(e,n){this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,e!==4?this.Do.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(at(n.toString()),at("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Lo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Yr(n)}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Vo===n&&this.qo(r,s)},r=>{e(()=>{const s=new F(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(s)})})}qo(e,n){const r=this.Uo(this.Vo);this.stream=this.Go(e,n),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(s=>{r(()=>this.Ko(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}No(){this.state=5,this.Do.To(async()=>{this.state=0,this.start()})}Ko(e){return C("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return n=>{this.Yn.enqueueAndForget(()=>this.Vo===e?n():(C("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pT extends Yg{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.M=i}Go(e,n){return this.bo.lo("Listen",e,n)}onMessage(e){this.Do.reset();const n=rE(this.M,e),r=function(s){if(!("targetChange"in s))return j.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?j.min():i.readTime?ht(i.readTime):j.min()}(e);return this.listener.Qo(n,r)}jo(e){const n={};n.database=Ja(this.M),n.addTarget=function(s,i){let o;const a=i.target;return o=Ui(a)?{documents:Cg(s,a)}:{query:_g(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=eE(s,i.resumeToken):i.snapshotVersion.compareTo(j.min())>0&&(o.readTime=rc(s,i.snapshotVersion.toTimestamp())),o}(this.M,e);const r=iE(this.M,e);r&&(n.labels=r),this.Fo(n)}Wo(e){const n={};n.database=Ja(this.M),n.removeTarget=e,this.Fo(n)}}class yT extends Yg{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.M=i,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,n){return this.bo.lo("Write",e,n)}onMessage(e){if(Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const n=sE(e.writeResults,e.commitTime),r=ht(e.commitTime);return this.listener.Yo(r,n)}return Q(!e.writeResults||e.writeResults.length===0),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Ja(this.M),this.Fo(e)}Jo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ki(this.M,r))};this.Fo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.M=s,this.tu=!1}eu(){if(this.tu)throw new F(E.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,n,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.bo.oo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(E.UNKNOWN,s.toString())})}ho(e,n,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.bo.ho(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(E.UNKNOWN,s.toString())})}terminate(){this.tu=!0}}class wT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){this.nu===0&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){this.state==="Online"?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,e==="Online"&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(at(n),this.iu=!1):C("OnlineStateTracker",n)}cu(){this.su!==null&&(this.su.cancel(),this.su=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=i,this._u.Lr(o=>{r.enqueueAndForget(async()=>{zn(this)&&(C("RemoteStore","Restarting streams for network reachability change."),await async function(a){const u=J(a);u.fu.add(4),await Ws(u),u.wu.set("Unknown"),u.fu.delete(4),await Po(u)}(this))})}),this.wu=new wT(r,s)}}async function Po(t){if(zn(t))for(const e of t.du)await e(!0)}async function Ws(t){for(const e of t.du)await e(!1)}function Qg(t,e){const n=J(t);n.lu.has(e.targetId)||(n.lu.set(e.targetId,e),yc(n)?pc(n):Pr(n).xo()&&mc(n,e))}function Xg(t,e){const n=J(t),r=Pr(n);n.lu.delete(e),r.xo()&&Jg(n,e),n.lu.size===0&&(r.xo()?r.Mo():zn(n)&&n.wu.set("Unknown"))}function mc(t,e){t.mu.Z(e.targetId),Pr(t).jo(e)}function Jg(t,e){t.mu.Z(e),Pr(t).Wo(e)}function pc(t){t.mu=new Qb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.lu.get(e)||null}),Pr(t).start(),t.wu.ru()}function yc(t){return zn(t)&&!Pr(t).Co()&&t.lu.size>0}function zn(t){return J(t).fu.size===0}function Zg(t){t.mu=void 0}async function ET(t){t.lu.forEach((e,n)=>{mc(t,e)})}async function TT(t,e){Zg(t),yc(t)?(t.wu.au(e),pc(t)):t.wu.set("Unknown")}async function IT(t,e,n){if(t.wu.set("Online"),e instanceof bg&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.lu.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.lu.delete(o),r.mu.removeTarget(o))}(t,e)}catch(r){C("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gi(t,r)}else if(e instanceof yi?t.mu.ut(e):e instanceof wg?t.mu._t(e):t.mu.ht(e),!n.isEqual(j.min()))try{const r=await Wg(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.mu.yt(i);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=s.lu.get(u);c&&s.lu.set(u,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const u=s.lu.get(a);if(!u)return;s.lu.set(a,u.withResumeToken(Oe.EMPTY_BYTE_STRING,u.snapshotVersion)),Jg(s,a);const c=new sn(u.target,a,1,u.sequenceNumber);mc(s,c)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){C("RemoteStore","Failed to raise snapshot:",r),await Gi(t,r)}}async function Gi(t,e,n){if(!Gn(e))throw e;t.fu.add(1),await Ws(t),t.wu.set("Offline"),n||(n=()=>Wg(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{C("RemoteStore","Retrying IndexedDB access"),await n(),t.fu.delete(1),await Po(t)})}function em(t,e){return e().catch(n=>Gi(t,n,e))}async function Ro(t){const e=J(t),n=fn(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;xT(e);)try{const s=await eT(e.localStore,r);if(s===null){e.hu.length===0&&n.Mo();break}r=s.batchId,CT(e,s)}catch(s){await Gi(e,s)}tm(e)&&nm(e)}function xT(t){return zn(t)&&t.hu.length<10}function CT(t,e){t.hu.push(e);const n=fn(t);n.xo()&&n.Ho&&n.Jo(e.mutations)}function tm(t){return zn(t)&&!fn(t).Co()&&t.hu.length>0}function nm(t){fn(t).start()}async function _T(t){fn(t).Zo()}async function ST(t){const e=fn(t);for(const n of t.hu)e.Jo(n.mutations)}async function DT(t,e,n){const r=t.hu.shift(),s=oc.from(r,e,n);await em(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ro(t)}async function AT(t,e){e&&fn(t).Ho&&await async function(n,r){if(s=r.code,Kb(s)&&s!==E.ABORTED){const i=n.hu.shift();fn(n).ko(),await em(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Ro(n)}var s}(t,e),tm(t)&&nm(t)}async function xh(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),C("RemoteStore","RemoteStore received new credentials");const r=zn(n);n.fu.add(3),await Ws(n),r&&n.wu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.fu.delete(3),await Po(n)}async function kT(t,e){const n=J(t);e?(n.fu.delete(2),await Po(n)):e||(n.fu.add(2),await Ws(n),n.wu.set("Unknown"))}function Pr(t){return t.gu||(t.gu=function(e,n,r){const s=J(e);return s.eu(),new pT(n,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(t.datastore,t.asyncQueue,{Hr:ET.bind(null,t),Yr:TT.bind(null,t),Qo:IT.bind(null,t)}),t.du.push(async e=>{e?(t.gu.ko(),yc(t)?pc(t):t.wu.set("Unknown")):(await t.gu.stop(),Zg(t))})),t.gu}function fn(t){return t.yu||(t.yu=function(e,n,r){const s=J(e);return s.eu(),new yT(n,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(t.datastore,t.asyncQueue,{Hr:_T.bind(null,t),Yr:AT.bind(null,t),Xo:ST.bind(null,t),Yo:DT.bind(null,t)}),t.du.push(async e=>{e?(t.yu.ko(),await Ro(t)):(await t.yu.stop(),t.hu.length>0&&(C("RemoteStore",`Stopping write stream with ${t.hu.length} pending writes`),t.hu=[]))})),t.yu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new vc(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rm(t,e){if(at("AsyncQueue",`${e}: ${t}`),Gn(t))return new F(E.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||O.comparator(n.key,r.key):(n,r)=>O.comparator(n.key,r.key),this.keyedMap=Qa(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new pr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.pu=new Pe(O.comparator)}track(e){const n=e.doc.key,r=this.pu.get(n);r?e.type!==0&&r.type===3?this.pu=this.pu.insert(n,e):e.type===3&&r.type!==1?this.pu=this.pu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pu=this.pu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pu=this.pu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pu=this.pu.remove(n):e.type===1&&r.type===2?this.pu=this.pu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pu=this.pu.insert(n,{type:2,doc:e.doc}):B():this.pu=this.pu.insert(n,e)}Iu(){const e=[];return this.pu.inorderTraversal((n,r)=>{e.push(r)}),e}}class xr{constructor(e,n,r,s,i,o,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u}static fromInitialDocuments(e,n,r,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new xr(e,n,pr.emptySet(n),i,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&So(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.Tu=void 0,this.listeners=[]}}class MT{constructor(){this.queries=new pn(e=>cg(e),So),this.onlineState="Unknown",this.Eu=new Set}}async function OT(t,e){const n=J(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new NT),s)try{i.Tu=await n.onListen(r)}catch(o){const a=rm(o,`Initialization of query '${za(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.Au(n.onlineState),i.Tu&&e.Ru(i.Tu)&&wc(n)}async function PT(t,e){const n=J(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function RT(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Ru(s)&&(r=!0);o.Tu=s}}r&&wc(n)}function LT(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function wc(t){t.Eu.forEach(e=>{e.next()})}class FT{constructor(e,n,r){this.query=e,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),n=!0):this.Su(e,this.onlineState)&&(this.Du(e),n=!0),this.Vu=e,n}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let n=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),n=!0),n}Su(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Cu||!r)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Du(e){e=xr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this.key=e}}class im{constructor(e){this.key=e}}class BT{constructor(e,n){this.query=e,this.$u=n,this.Bu=null,this.current=!1,this.Lu=ge(),this.mutatedKeys=ge(),this.Uu=lg(e),this.qu=new pr(this.Uu)}get Ku(){return this.$u}Gu(e,n){const r=n?n.Qu:new Ch,s=n?n.qu:this.qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=mi(this.query)&&s.size===this.query.limit?s.last():null,c=qi(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((l,h)=>{const d=s.get(l),m=nc(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),I=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let N=!1;d&&m?d.data.isEqual(m.data)?y!==I&&(r.track({type:3,doc:m}),N=!0):this.ju(d,m)||(r.track({type:2,doc:m}),N=!0,(u&&this.Uu(m,u)>0||c&&this.Uu(m,c)<0)&&(a=!0)):!d&&m?(r.track({type:0,doc:m}),N=!0):d&&!m&&(r.track({type:1,doc:d}),N=!0,(u||c)&&(a=!0)),N&&(m?(o=o.add(m),i=I?i.add(l):i.delete(l)):(o=o.delete(l),i=i.delete(l)))}),mi(this.query)||qi(this.query))for(;o.size>this.query.limit;){const l=mi(this.query)?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:a,mutatedKeys:i}}ju(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const i=e.Qu.Iu();i.sort((c,l)=>function(h,d){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return m(h)-m(d)}(c.type,l.type)||this.Uu(c.doc,l.doc)),this.Wu(r);const o=n?this.zu():[],a=this.Lu.size===0&&this.current?1:0,u=a!==this.Bu;return this.Bu=a,i.length!==0||u?{snapshot:new xr(this.query,e.qu,s,i,e.mutatedKeys,a===0,u,!1),Hu:o}:{Hu:o}}Au(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Ch,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(n=>this.$u=this.$u.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.$u=this.$u.delete(n)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=ge(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const n=[];return e.forEach(r=>{this.Lu.has(r)||n.push(new im(r))}),this.Lu.forEach(r=>{e.has(r)||n.push(new sm(r))}),n}Yu(e){this.$u=e.li,this.Lu=ge();const n=this.Gu(e.documents);return this.applyChanges(n,!0)}Xu(){return xr.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,this.Bu===0)}}class VT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UT{constructor(e){this.key=e,this.Zu=!1}}class $T{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new pn(a=>cg(a),So),this.na=new Map,this.sa=new Set,this.ia=new Pe(O.comparator),this.ra=new Map,this.oa=new fc,this.ua={},this.aa=new Map,this.ca=Kn.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return this.ha===!0}}async function qT(t,e){const n=XT(t);let r,s;const i=n.ea.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Xu();else{const o=await tT(n.localStore,qt(e));n.isPrimaryClient&&Qg(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await jT(n,e,r,a==="current")}return s}async function jT(t,e,n,r){t.la=(l,h,d)=>async function(m,y,I,N){let P=y.view.Gu(I);P.ni&&(P=await Eh(m.localStore,y.query,!1).then(({documents:q})=>y.view.Gu(q,P)));const k=N&&N.targetChanges.get(y.targetId),A=y.view.applyChanges(P,m.isPrimaryClient,k);return Sh(m,y.targetId,A.Hu),A.snapshot}(t,l,h,d);const s=await Eh(t.localStore,e,!0),i=new BT(e,s.li),o=i.Gu(s.documents),a=Ks.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),u=i.applyChanges(o,t.isPrimaryClient,a);Sh(t,n,u.Hu);const c=new VT(e,n,i);return t.ea.set(e,c),t.na.has(n)?t.na.get(n).push(e):t.na.set(n,[e]),u.snapshot}async function KT(t,e){const n=J(t),r=n.ea.get(e),s=n.na.get(r.targetId);if(s.length>1)return n.na.set(r.targetId,s.filter(i=>!So(i,e))),void n.ea.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await eu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Xg(n.remoteStore,r.targetId),tu(n,r.targetId)}).catch(Or)):(tu(n,r.targetId),await eu(n.localStore,r.targetId,!0))}async function om(t,e){const n=J(t);try{const r=await JE(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.ra.get(i);o&&(Q(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Zu=!0:s.modifiedDocuments.size>0?Q(o.Zu):s.removedDocuments.size>0&&(Q(o.Zu),o.Zu=!1))}),await Lo(n,r,e)}catch(r){await Or(r)}}function _h(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ea.forEach((i,o)=>{const a=o.view.Au(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=J(i);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const h of l.listeners)h.Au(o)&&(u=!0)}),u&&wc(a)}(r.eventManager,e),s.length&&r.ta.Qo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WT(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.ra.get(e),i=s&&s.key;if(i){let o=new Pe(O.comparator);o=o.insert(i,Ie.newNoDocument(i,j.min()));const a=ge().add(i),u=new Mo(j.min(),new Map,new ye(Z),o,a);await om(r,u),r.ia=r.ia.remove(i),r.ra.delete(e),bc(r)}else await eu(r.localStore,e,!1).then(()=>tu(r,e,n)).catch(Or)}async function HT(t,e){const n=J(t),r=e.batch.batchId;try{const s=await XE(n.localStore,e);um(n,r,null),am(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lo(n,s)}catch(s){await Or(s)}}async function GT(t,e,n){const r=J(t);try{const s=await function(i,o){const a=J(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.Bs.lookupMutationBatch(u,o).next(l=>(Q(l!==null),c=l.keys(),a.Bs.removeMutationBatch(u,l))).next(()=>a.Bs.performConsistencyCheck(u)).next(()=>a.ci.Ks(u,c))})}(r.localStore,e);um(r,e,n),am(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lo(r,s)}catch(s){await Or(s)}}function am(t,e){(t.aa.get(e)||[]).forEach(n=>{n.resolve()}),t.aa.delete(e)}function um(t,e,n){const r=J(t);let s=r.ua[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.ua[r.currentUser.toKey()]=s}}function tu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.na.get(e))t.ea.delete(r),n&&t.ta.fa(r,n);t.na.delete(e),t.isPrimaryClient&&t.oa.Pi(e).forEach(r=>{t.oa.containsKey(r)||cm(t,r)})}function cm(t,e){t.sa.delete(e.path.canonicalString());const n=t.ia.get(e);n!==null&&(Xg(t.remoteStore,n),t.ia=t.ia.remove(e),t.ra.delete(n),bc(t))}function Sh(t,e,n){for(const r of n)r instanceof sm?(t.oa.addReference(r.key,e),zT(t,r)):r instanceof im?(C("SyncEngine","Document no longer in limbo: "+r.key),t.oa.removeReference(r.key,e),t.oa.containsKey(r.key)||cm(t,r.key)):B()}function zT(t,e){const n=e.key,r=n.path.canonicalString();t.ia.get(n)||t.sa.has(r)||(C("SyncEngine","New document in limbo: "+n),t.sa.add(r),bc(t))}function bc(t){for(;t.sa.size>0&&t.ia.size<t.maxConcurrentLimboResolutions;){const e=t.sa.values().next().value;t.sa.delete(e);const n=new O(de.fromString(e)),r=t.ca.next();t.ra.set(r,new UT(n)),t.ia=t.ia.insert(n,r),Qg(t.remoteStore,new sn(qt(tc(n.path)),r,2,Et.A))}}async function Lo(t,e,n){const r=J(t),s=[],i=[],o=[];r.ea.isEmpty()||(r.ea.forEach((a,u)=>{o.push(r.la(u,e,n).then(c=>{if(c){r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c.fromCache?"not-current":"current"),s.push(c);const l=dc.Ys(u.targetId,c);i.push(l)}}))}),await Promise.all(o),r.ta.Qo(s),await async function(a,u){const c=J(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",l=>p.forEach(u,h=>p.forEach(h.Hs,d=>c.persistence.referenceDelegate.addReference(l,h.targetId,d)).next(()=>p.forEach(h.Js,d=>c.persistence.referenceDelegate.removeReference(l,h.targetId,d)))))}catch(l){if(!Gn(l))throw l;C("LocalStore","Failed to update sequence numbers: "+l)}for(const l of u){const h=l.targetId;if(!l.fromCache){const d=c.ii.get(h),m=d.snapshotVersion,y=d.withLastLimboFreeSnapshotVersion(m);c.ii=c.ii.insert(h,y)}}}(r.localStore,i))}async function YT(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){C("SyncEngine","User change. New user:",e.toKey());const r=await Kg(n.localStore,e);n.currentUser=e,function(s,i){s.aa.forEach(o=>{o.forEach(a=>{a.reject(new F(E.CANCELLED,i))})}),s.aa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lo(n,r.hi)}}function QT(t,e){const n=J(t),r=n.ra.get(e);if(r&&r.Zu)return ge().add(r.key);{let s=ge();const i=n.na.get(e);if(!i)return s;for(const o of i){const a=n.ea.get(o);s=s.unionWith(a.view.Ku)}return s}}function XT(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=om.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WT.bind(null,e),e.ta.Qo=RT.bind(null,e.eventManager),e.ta.fa=LT.bind(null,e.eventManager),e}function JT(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GT.bind(null,e),e}class lm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=Gg(e.databaseInfo.databaseId),this.sharedClientState=this._a(e),this.persistence=this.wa(e),await this.persistence.start(),this.gcScheduler=this.ma(e),this.localStore=this.ga(e)}ma(e){return null}ga(e){return jg(this.persistence,new qg,e.initialUser,this.M)}wa(e){return new cT(gc.zi,this.M)}_a(e){return new Hg}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ZT extends lm{constructor(e,n,r){super(),this.ya=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ya.initialize(this,e),await JT(this.ya.syncEngine),await Ro(this.ya.remoteStore),await this.persistence.Ts(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}ga(e){return jg(this.persistence,new qg,e.initialUser,this.M)}ma(e){const n=this.persistence.referenceDelegate.garbageCollector;return new qE(n,e.asyncQueue)}wa(e){const n=zE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?it.withCacheSize(this.cacheSizeBytes):it.DEFAULT;return new hc(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,mT(),wi(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Hg}}class hm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_h(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YT.bind(null,this.syncEngine),await kT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new MT}createDatastore(e){const n=Gg(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new gT(s));var s;return function(i,o,a,u){return new vT(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>_h(this.syncEngine,a,0),o=Ih.vt()?new Ih:new hT,new bT(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,u,c){const l=new $T(r,s,i,o,a,u);return c&&(l.ha=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=J(e);C("RemoteStore","RemoteStore shutting down."),n.fu.add(5),await Ws(n),n._u.shutdown(),n.wu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=st.UNAUTHENTICATED,this.clientId=ib.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{C("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(C("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dm(t,e){t.asyncQueue.verifyOperationInProgress(),C("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Kg(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function fm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nI(t);C("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>xh(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>xh(e.remoteStore,i)),t.onlineComponents=e}async function nI(t){return t.offlineComponents||(C("FirestoreClient","Using default OfflineComponentProvider"),await dm(t,new lm)),t.offlineComponents}async function rI(t){return t.onlineComponents||(C("FirestoreClient","Using default OnlineComponentProvider"),await fm(t,new hm)),t.onlineComponents}async function sI(t){const e=await rI(t),n=e.eventManager;return n.onListen=qT.bind(null,e.syncEngine),n.onUnlisten=KT.bind(null,e.syncEngine),n}function iI(t,e,n={}){const r=new Bt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,u){const c=new eI({next:h=>{i.enqueueAndForget(()=>PT(s,l)),h.fromCache&&a.source==="server"?u.reject(new F(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),l=new FT(o,c,{includeMetadataChanges:!0,Cu:!0});return OT(s,l)}(await sI(t),t.asyncQueue,e,n,r)),r.promise}const Dh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t,e,n){if(!n)throw new F(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aI(t,e,n,r){if(e===!0&&r===!0)throw new F(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ah(t){if(O.isDocumentKey(t))throw new F(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function nu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uI(t);throw new F(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new F(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,aI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1,e instanceof hn?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new F(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hn(s.options.projectId)}(e))}get app(){if(!this._app)throw new F(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new J0;switch(n.type){case"gapi":const r=n.client;return Q(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new tb(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new F(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Dh.get(e);n&&(C("ComponentProvider","Removing Datastore"),Dh.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class Fo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class yr extends Fo{constructor(e,n,r){super(e,n,tc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new O(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function mm(t,e,...n){if(t=qv(t),oI("collection","path",e),t instanceof gm){const r=de.fromString(e,...n);return Ah(r),new yr(t,null,r)}{if(!(t instanceof Rr||t instanceof yr))throw new F(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return Ah(r),new yr(t.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new zg(this,"async_queue_retry"),this.qa=()=>{const n=wi();n&&C("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Do.Ao()};const e=wi();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const n=wi();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const n=new Bt;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}async Qa(){if(this.Ma.length!==0){try{await this.Ma[0](),this.Ma.shift(),this.Do.reset()}catch(e){if(!Gn(e))throw e;C("AsyncQueue","Operation failed with retryable error: "+e)}this.Ma.length>0&&this.Do.To(()=>this.Qa())}}Ga(e){const n=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{this.$a=r,this.Ba=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw at("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ba=!1,r))));return this.ka=n,n}enqueueAfterDelay(e,n,r){this.Ka(),this.Ua.indexOf(e)>-1&&(n=0);const s=vc.createAndSchedule(this,e,n,r,i=>this.ja(i));return this.Fa.push(s),s}Ka(){this.$a&&B()}verifyOperationInProgress(){}async Wa(){let e;do e=this.ka,await e;while(e!==this.ka)}za(e){for(const n of this.Fa)if(n.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Fa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const n=this.Fa.indexOf(e);this.Fa.splice(n,1)}}class Ec extends gm{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new cI,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ym(this),this._firestoreClient.terminate()}}function lI(t=Mw()){return Sw(t,"firestore").getImmediate()}function pm(t){return t._firestoreClient||ym(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ym(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new lb(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new tI(t._authCredentials,t._appCheckCredentials,t._queue,r)}function hI(t,e){fI(t=nu(t,Ec));const n=pm(t),r=t._freezeSettings(),s=new hm;return dI(n,s,new ZT(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function dI(t,e,n){const r=new Bt;return t.asyncQueue.enqueue(async()=>{try{await dm(t,n),await fm(t,e),r.resolve()}catch(s){if(!function(i){return i.name==="FirebaseError"?i.code===E.FAILED_PRECONDITION||i.code===E.UNIMPLEMENTED:typeof DOMException!="undefined"&&i instanceof DOMException?i.code===22||i.code===20||i.code===11:!0}(s))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function fI(t){if(t._initialized||t._terminated)throw new F(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(Oe.fromBase64String(e))}catch(n){throw new F(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(Oe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}}const mI=new RegExp("[~\\*/\\[\\]]");function pI(t,e,n){if(e.search(mI)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vm(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new F(E.INVALID_ARGUMENT,a+t+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yI extends wm{data(){return super.data()}}function bm(t,e){return typeof e=="string"?pI(t,e):e instanceof vm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vI extends wm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bi extends vI{data(e={}){return super.data(e)}}class wI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ui(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bi(this._firestore,this._userDataWriter,r.key,r,new ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new bi(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ui(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:i++}))}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new bi(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ui(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:bI(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t){if(qi(t)&&t.explicitOrderBy.length===0)throw new F(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{convertValue(e,n="none"){switch(Un(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){const r={};return Co(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new gI(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ss(e));default:return null}}convertTimestamp(e){const n=ln(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);Q(Ag(r));const s=new hn(r.get(1),r.get(3)),i=new O(r.popFirst(5));return s.isEqual(n)||at(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class II extends TI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,n)}}function Em(t){t=nu(t,Fo);const e=nu(t.firestore,Ec),n=pm(e),r=new II(e);return EI(t._query),iI(n,t._query).then(s=>new wI(e,r,t,s))}(function(t,e=!0){(function(n){Nr=n})(kw),Di(new ws("firestore",(n,{options:r})=>{const s=n.getProvider("app").getImmediate(),i=new Ec(s,new Z0(n.getProvider("auth-internal")),new rb(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),i._setSettings(r),i},"PUBLIC")),gr(Pl,"3.4.8",t),gr(Pl,"3.4.8","esm2017")})();const xI={apiKey:"AIzaSyCLTr44k_s8lQt2YQiNTwz42BDLHJdjXtE",authDomain:"hcs-pool-play.firebaseapp.com",databaseURL:"https://hcs-pool-play-default-rtdb.firebaseio.com",projectId:"hcs-pool-play",storageBucket:"hcs-pool-play.appspot.com",messagingSenderId:"356396912458",appId:"1:356396912458:web:b65ee1fc7d580d240ffbb3"},CI=Nw(xI),Tc=lI(CI);hI(Tc);const Tm=an(null),Mh=an(!1),Oh=t=>{Tm.value=t};function Ic(){const t=an([]),e=mm(Tc,"teams");Em(e).then(s=>{t.value=s.docs.map(i=>{const o=i.data();return jo(qo({},o),{id:i.id})})});const n=s=>t.value.find(i=>i.id===s),{windowWidth:r}=co();return fi([r,Mh],s=>{Oh(null)}),{teams:t,getTeam:n,clickToHighlight:Mh,hoveredTeam:Tm,setHover:Oh}}var xc=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const _I=t=>(Np("data-v-fe264dde"),t=t(),Mp(),t),SI={class:"w-full flex flex-col sm:flex-row flex-wrap lg:items-center"},DI=xt(" vs "),AI={class:"match-teams min-w-full flex-col items-center hidden lg:flex xl:hidden"},kI=_I(()=>Y("span",null,"vs",-1)),NI={class:"lg:hidden pl-4"},MI=["href"],OI=Wn({props:{match:null},setup(t){const e=t,{hoveredTeam:n,getTeam:r}=Ic(),{windowWidth:s}=co(),i=Jt(()=>s.value<=1024),o=Jt(()=>r(e.match.team1)),a=Jt(()=>r(e.match.team2)),u=Jt(()=>{var c,l,h,d,m,y;return((c=n.value)==null?void 0:c.name)===((l=o.value)==null?void 0:l.name)?(h=o.value)==null?void 0:h.color:((d=n.value)==null?void 0:d.name)===((m=a.value)==null?void 0:m.name)?(y=a.value)==null?void 0:y.color:"transparent"});return(c,l)=>(ue(),De(Ce,null,[Y("div",{class:"background",style:ls({borderColor:ee(u)})},null,4),Y("div",SI,[Y("div",{class:"match-teams text-sm lg:hidden xl:block",style:ls({textDecoration:ee(i)?"underline":"none",textDecorationThickness:"3px",textDecorationColor:ee(u)})},[Y("span",null,ot(ee(o)&&ee(o).name),1),DI,Y("span",null,ot(ee(a)&&ee(a).name),1)],4),Y("div",AI,[Y("span",null,ot(ee(o)&&ee(o).name),1),kI,Y("span",null,ot(ee(a)&&ee(a).name),1)]),Y("div",NI,[Y("a",{class:"underline text-xs leading-4",href:t.match.stream.link,target:"_blank"},ot(t.match.stream.name),9,MI)])])],64))}});var PI=xc(OI,[["__scopeId","data-v-fe264dde"]]);const RI={},LI={class:"px-6 py-4 whitespace-nowrap"},FI={class:"text-sm font-medium text-gray-200 mobile-row data-slot"};function BI(t,e){return ue(),De("td",LI,[Y("div",FI,[Pd(t.$slots,"default",{},void 0,!0)])])}var Cc=xc(RI,[["render",BI],["__scopeId","data-v-20ef03f2"]]);const VI=xt(" Click the time to show "),UI=Wn({props:{matches:null,time:null},setup(t){const e=an(!0);return(n,r)=>{const s=Cc,i=PI;return ue(),De("tr",null,[he(s,{onClick:r[0]||(r[0]=()=>e.value=!e.value)},{default:He(()=>[xt(ot(t.time),1)]),_:1}),(ue(!0),De(Ce,null,ys(t.matches,(o,a)=>(ue(),un(s,{class:"hidden lg:table-cell",key:`match-${t.time}-${a}`},{default:He(()=>[he(i,{match:o},null,8,["match"])]),_:2},1024))),128)),he(s,{class:"table-cell lg:hidden"},{default:He(()=>[e.value?(ue(!0),De(Ce,{key:0},ys(t.matches,(o,a)=>(ue(),un(i,{key:`match-${t.time}-${a}`,match:o},null,8,["match"]))),128)):(ue(),De(Ce,{key:1},[VI],64))]),_:1})])}}});var Zr=(t=>(t[t.Halo=0]="Halo",t[t.Xbox=1]="Xbox",t[t.Red=2]="Red",t[t.Blue=3]="Blue",t))(Zr||{}),es=(t=>(t[t.NA=0]="NA",t[t.EU=1]="EU",t[t.MX=2]="MX",t[t.AZ=3]="AZ",t[t.null=4]="null",t))(es||{});const $I={[Zr.Halo]:{name:"A Stream (Halo)",link:"https://www.twitch.tv/halo"},[Zr.Xbox]:{name:"B Stream (Xbox)",link:"https://www.twitch.tv/xbox"},[Zr.Red]:{name:"C Stream (HCS_Red)",link:"https://www.twitch.tv/hcs_red"},[Zr.Blue]:{name:"D Stream (HCS_Blue)",link:"https://www.twitch.tv/hcs_blue"}};function mt(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function et(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Nt(t){et(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function qI(t,e){et(2,arguments);var n=Nt(t).getTime(),r=mt(e);return new Date(n+r)}function jI(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function KI(t){return et(1,arguments),t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function WI(t){if(et(1,arguments),!KI(t)&&typeof t!="number")return!1;var e=Nt(t);return!isNaN(Number(e))}var HI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GI=function(t,e,n){var r,s=HI[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},zI=GI;function ha(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var YI={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QI={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},XI={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JI={date:ha({formats:YI,defaultWidth:"full"}),time:ha({formats:QI,defaultWidth:"full"}),dateTime:ha({formats:XI,defaultWidth:"full"})},ZI=JI,ex={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tx=function(t,e,n,r){return ex[t]},nx=tx;function Wr(t){return function(e,n){var r=n||{},s=r.context?String(r.context):"standalone",i;if(s==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,a=r.width?String(r.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{var u=t.defaultWidth,c=r.width?String(r.width):t.defaultWidth;i=t.values[c]||t.values[u]}var l=t.argumentCallback?t.argumentCallback(e):e;return i[l]}}var rx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ix={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ox={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ax={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ux={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cx=function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},lx={ordinalNumber:cx,era:Wr({values:rx,defaultWidth:"wide"}),quarter:Wr({values:sx,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Wr({values:ix,defaultWidth:"wide"}),day:Wr({values:ox,defaultWidth:"wide"}),dayPeriod:Wr({values:ax,defaultWidth:"wide",formattingValues:ux,defaultFormattingWidth:"wide"})},hx=lx;function Hr(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?fx(a,function(h){return h.test(o)}):dx(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;var l=e.slice(o.length);return{value:c,rest:l}}}function dx(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function fx(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function gx(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var mx=/^(\d+)(th|st|nd|rd)?/i,px=/\d+/i,yx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vx={any:[/^b/i,/^(a|c)/i]},wx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bx={any:[/1/i,/2/i,/3/i,/4/i]},Ex={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ix={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_x={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sx={ordinalNumber:gx({matchPattern:mx,parsePattern:px,valueCallback:function(t){return parseInt(t,10)}}),era:Hr({matchPatterns:yx,defaultMatchWidth:"wide",parsePatterns:vx,defaultParseWidth:"any"}),quarter:Hr({matchPatterns:wx,defaultMatchWidth:"wide",parsePatterns:bx,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Hr({matchPatterns:Ex,defaultMatchWidth:"wide",parsePatterns:Tx,defaultParseWidth:"any"}),day:Hr({matchPatterns:Ix,defaultMatchWidth:"wide",parsePatterns:xx,defaultParseWidth:"any"}),dayPeriod:Hr({matchPatterns:Cx,defaultMatchWidth:"any",parsePatterns:_x,defaultParseWidth:"any"})},Dx=Sx,Ax={code:"en-US",formatDistance:zI,formatLong:ZI,formatRelative:nx,localize:hx,match:Dx,options:{weekStartsOn:0,firstWeekContainsDate:1}},kx=Ax;function Nx(t,e){et(2,arguments);var n=mt(e);return qI(t,-n)}var Mx=864e5;function Ox(t){et(1,arguments);var e=Nt(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/Mx)+1}function Yi(t){et(1,arguments);var e=1,n=Nt(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Im(t){et(1,arguments);var e=Nt(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Yi(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Yi(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Px(t){et(1,arguments);var e=Im(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Yi(n);return r}var Rx=6048e5;function Lx(t){et(1,arguments);var e=Nt(t),n=Yi(e).getTime()-Px(e).getTime();return Math.round(n/Rx)+1}function Qi(t,e){et(1,arguments);var n=e||{},r=n.locale,s=r&&r.options&&r.options.weekStartsOn,i=s==null?0:mt(s),o=n.weekStartsOn==null?i:mt(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var a=Nt(t),u=a.getUTCDay(),c=(u<o?7:0)+u-o;return a.setUTCDate(a.getUTCDate()-c),a.setUTCHours(0,0,0,0),a}function xm(t,e){et(1,arguments);var n=Nt(t),r=n.getUTCFullYear(),s=e||{},i=s.locale,o=i&&i.options&&i.options.firstWeekContainsDate,a=o==null?1:mt(o),u=s.firstWeekContainsDate==null?a:mt(s.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var l=Qi(c,e),h=new Date(0);h.setUTCFullYear(r,0,u),h.setUTCHours(0,0,0,0);var d=Qi(h,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Fx(t,e){et(1,arguments);var n=e||{},r=n.locale,s=r&&r.options&&r.options.firstWeekContainsDate,i=s==null?1:mt(s),o=n.firstWeekContainsDate==null?i:mt(n.firstWeekContainsDate),a=xm(t,e),u=new Date(0);u.setUTCFullYear(a,0,o),u.setUTCHours(0,0,0,0);var c=Qi(u,e);return c}var Bx=6048e5;function Vx(t,e){et(1,arguments);var n=Nt(t),r=Qi(n,e).getTime()-Fx(n,e).getTime();return Math.round(r/Bx)+1}function ae(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Ux={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return ae(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):ae(n+1,2)},d:function(t,e){return ae(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return ae(t.getUTCHours()%12||12,e.length)},H:function(t,e){return ae(t.getUTCHours(),e.length)},m:function(t,e){return ae(t.getUTCMinutes(),e.length)},s:function(t,e){return ae(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),s=Math.floor(r*Math.pow(10,n-3));return ae(s,e.length)}},Gt=Ux,rr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$x={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Gt.y(t,e)},Y:function(t,e,n,r){var s=xm(t,r),i=s>0?s:1-s;if(e==="YY"){var o=i%100;return ae(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ae(i,e.length)},R:function(t,e){var n=Im(t);return ae(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return ae(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ae(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ae(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Gt.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return ae(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var s=Vx(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ae(s,e.length)},I:function(t,e,n){var r=Lx(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ae(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Gt.d(t,e)},D:function(t,e,n){var r=Ox(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ae(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var s=t.getUTCDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ae(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var s=t.getUTCDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ae(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ae(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),s=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours(),s;switch(r===12?s=rr.noon:r===0?s=rr.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours(),s;switch(r>=17?s=rr.evening:r>=12?s=rr.afternoon:r>=4?s=rr.morning:s=rr.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Gt.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Gt.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ae(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ae(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Gt.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Gt.s(t,e)},S:function(t,e){return Gt.S(t,e)},X:function(t,e,n,r){var s=r._originalDate||t,i=s.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Rh(i);case"XXXX":case"XX":return xn(i);case"XXXXX":case"XXX":default:return xn(i,":")}},x:function(t,e,n,r){var s=r._originalDate||t,i=s.getTimezoneOffset();switch(e){case"x":return Rh(i);case"xxxx":case"xx":return xn(i);case"xxxxx":case"xxx":default:return xn(i,":")}},O:function(t,e,n,r){var s=r._originalDate||t,i=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ph(i,":");case"OOOO":default:return"GMT"+xn(i,":")}},z:function(t,e,n,r){var s=r._originalDate||t,i=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ph(i,":");case"zzzz":default:return"GMT"+xn(i,":")}},t:function(t,e,n,r){var s=r._originalDate||t,i=Math.floor(s.getTime()/1e3);return ae(i,e.length)},T:function(t,e,n,r){var s=r._originalDate||t,i=s.getTime();return ae(i,e.length)}};function Ph(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e||"";return n+String(s)+o+ae(i,2)}function Rh(t,e){if(t%60===0){var n=t>0?"-":"+";return n+ae(Math.abs(t)/60,2)}return xn(t,e)}function xn(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=ae(Math.floor(s/60),2),o=ae(s%60,2);return r+i+n+o}var qx=$x;function Lh(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function Cm(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}function jx(t,e){var n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Lh(t,e);var i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Lh(r,e)).replace("{{time}}",Cm(s,e))}var Kx={p:Cm,P:jx},Wx=Kx,Hx=["D","DD"],Gx=["YY","YYYY"];function zx(t){return Hx.indexOf(t)!==-1}function Yx(t){return Gx.indexOf(t)!==-1}function Fh(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Qx=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xx=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jx=/^'([^]*?)'?$/,Zx=/''/g,eC=/[a-zA-Z]/;function ci(t,e,n){et(2,arguments);var r=String(e),s=n||{},i=s.locale||kx,o=i.options&&i.options.firstWeekContainsDate,a=o==null?1:mt(o),u=s.firstWeekContainsDate==null?a:mt(s.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,l=c==null?0:mt(c),h=s.weekStartsOn==null?l:mt(s.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var d=Nt(t);if(!WI(d))throw new RangeError("Invalid time value");var m=jI(d),y=Nx(d,m),I={firstWeekContainsDate:u,weekStartsOn:h,locale:i,_originalDate:d},N=r.match(Xx).map(function(P){var k=P[0];if(k==="p"||k==="P"){var A=Wx[k];return A(P,i.formatLong,I)}return P}).join("").match(Qx).map(function(P){if(P==="''")return"'";var k=P[0];if(k==="'")return tC(P);var A=qx[k];if(A)return!s.useAdditionalWeekYearTokens&&Yx(P)&&Fh(P,e,t),!s.useAdditionalDayOfYearTokens&&zx(P)&&Fh(P,e,t),A(y,P,i.localize,I);if(k.match(eC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return P}).join("");return N}function tC(t){return t.match(Jx)[1].replace(Zx,"'")}async function nC(){let t=an([]);const e=mm(Tc,"matches"),n=await Em(e);for await(const r of n.docs){const s=r.data();t.value.push(jo(qo({},s),{stream:s.stream.id,team1:s.team1.id,team2:s.team2.id}))}return{matches:t}}const rC=xt("Broadcast Start"),sC=xt("Anaheim Preshow"),iC=xt("HCS All-Star Showdown"),oC=Wn({async setup(t){let e,n;const{matches:r}=([e,n]=Ly(()=>nC()),e=await e,n(),e),{windowWidth:s}=co(),i=[new Date("2022-02-11T18:00:00+0000"),new Date("2022-02-11T19:15:00+0000"),new Date("2022-02-11T20:30:00+0000"),new Date("2022-02-11T21:45:00+0000"),new Date("2022-03-11T23:00:00+0000"),new Date("2022-03-11T00:15:00+0000")],o=Jt(()=>i.map(c=>ci(c,"h:mmaaa"))),a=Jt(()=>s.value>=1024?[{text:"Timeslot"},...Object.values($I).map(c=>({text:c.name,link:c.link}))]:[{text:"Timeslot"},{text:"Matches"}]),u=c=>r.value.filter(l=>l.timeslot===c);return(c,l)=>{const h=Cc,d=UI,m=qd;return ue(),un(m,{headers:ee(a)},{default:He(()=>[Y("tr",null,[he(h,null,{default:He(()=>[xt(ot(ee(ci)(new Date("2022-02-11T17:30:00+0000"),"h:mmaaa")),1)]),_:1}),he(h,{colspan:ee(a).length-1,class:"text-left lg:text-center"},{default:He(()=>[rC]),_:1},8,["colspan"])]),Y("tr",null,[he(h,null,{default:He(()=>[xt(ot(ee(ci)(new Date("2022-02-11T17:40:00+0000"),"h:mmaaa")),1)]),_:1}),he(h,{colspan:ee(a).length-1,class:"text-left lg:text-center"},{default:He(()=>[sC]),_:1},8,["colspan"])]),(ue(!0),De(Ce,null,ys(ee(o),(y,I)=>(ue(),un(d,{key:I,time:y,matches:u(I)},null,8,["time","matches"]))),128)),Y("tr",null,[he(h,null,{default:He(()=>[xt(ot(ee(ci)(new Date("2022-03-11T01:30:00+0000"),"h:mmaaa")),1)]),_:1}),he(h,{colspan:ee(a).length-1,class:"text-left lg:text-center"},{default:He(()=>[iC]),_:1},8,["colspan"])])]),_:1},8,["headers"])}}});const aC=Wn({props:{title:null,teams:null},setup(t){const e={[es.NA]:"NA",[es.EU]:"EU",[es.MX]:"MX",[es.AZ]:"AZ"},{windowWidth:n}=co(),r=Jt(()=>n.value>1200),{setHover:s,hoveredTeam:i,clickToHighlight:o}=Ic(),a=u=>{var c;o.value&&((c=i.value)==null?void 0:c.name)===u.name?s(null):(r.value,s(u))};return(u,c)=>{const l=Cc,h=qd;return ue(),un(h,{headers:[{text:t.title}]},{default:He(()=>[(ue(!0),De(Ce,null,ys(t.teams,d=>(ue(),De("tr",{key:d.name},[he(l,{class:"team-data cursor-pointer flex flex-row justify-between",onClick:()=>a(d),onMouseenter:m=>ee(r)&&!ee(o)&&ee(s)(d),onMouseleave:c[0]||(c[0]=m=>ee(r)&&!ee(o)&&ee(s)(null))},{default:He(()=>[Y("span",null,ot(d.name),1),Y("span",null,ot(e[d.region]),1)]),_:2},1032,["onClick","onMouseenter"])]))),128))]),_:1},8,["headers"])}}});var li=xc(aC,[["__scopeId","data-v-541285d6"]]);const uC=Y("h1",{class:"text-gray-200 text-center text-3xl mb-4 font-bold"},"HCS Kansas City Major",-1),cC={class:"py-2 px-8 bg-gray-700 shadow-lg rounded-lg mb-4"},lC={class:"flex flex-row justify-between"},hC=Y("p",{class:"text-gray-200"},[xt(" All times are automatically converted to your timezone. "),Y("span",{class:"xs:inline xl:hidden"},"Click a team in the pools below to highlight them in the schedule."),Y("span",{class:"xs:inline xl:hidden"}," Click the time to show and hide it's matches.")],-1),dC={class:"hidden xl:inline"},fC={class:"cursor-pointer",for:"toggle"},gC={class:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},mC=Y("label",{for:"toggle",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),pC={class:"flex flex-col items-center"},yC={class:"min-w-full shadow border-b border-gray-200"},vC=Y("div",{class:"flex justify-center items-center space-x-1 text-md m-16"},[Y("svg",{fill:"none",class:"w-6 h-6 animate-spin",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},[Y("path",{"clip-rule":"evenodd",d:"M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z",fill:"currentColor","fill-rule":"evenodd"})]),Y("div",null,"Loading ...")],-1),wC={class:"pools"},bC=Y("p",{class:"text-gray-200 text-xs underline text-right"},[Y("a",{href:"https://liquipedia.net/halo/Halo_Championship_Series/2021-22/Kansas_City/Pool_Play",target:"_blank"}," Liquipedia Page for this event ")],-1),EC=Wn({setup(t){const{clickToHighlight:e,teams:n}=Ic(),r=zr(()=>n.value.filter(a=>a.pool==="A")),s=zr(()=>n.value.filter(a=>a.pool==="B")),i=zr(()=>n.value.filter(a=>a.pool==="C")),o=zr(()=>n.value.filter(a=>a.pool==="D"));return(a,u)=>{const c=bv;return ue(),De(Ce,null,[uC,Y("div",cC,[Y("div",lC,[hC,Y("div",dC,[Y("label",fC,ot(ee(e)?"Click":"Hover")+" team name to highlight ",1),Y("div",gC,[py(Y("input",{"onUpdate:modelValue":u[0]||(u[0]=l=>ke(e)?e.value=l:null),type:"checkbox",name:"toggle",id:"toggle",class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,512),[[rv,ee(e)]]),mC])])])]),Y("div",pC,[Y("div",yC,[(ue(),un(Vp,null,{fallback:He(()=>[vC]),default:He(()=>[he(oC,{class:"max-w-full"})]),_:1}))])]),Y("div",wC,[he(li,{class:"shadow border-b border-gray-200",title:"Pool A",teams:ee(r)},null,8,["teams"]),he(li,{class:"shadow border-b border-gray-200",title:"Pool B",teams:ee(s)},null,8,["teams"]),he(li,{class:"shadow border-b border-gray-200",title:"Pool C",teams:ee(i)},null,8,["teams"]),he(li,{class:"shadow border-b border-gray-200",title:"Pool D",teams:ee(o)},null,8,["teams"])]),bC,he(c)],64)}}});av(EC).mount("#app");
